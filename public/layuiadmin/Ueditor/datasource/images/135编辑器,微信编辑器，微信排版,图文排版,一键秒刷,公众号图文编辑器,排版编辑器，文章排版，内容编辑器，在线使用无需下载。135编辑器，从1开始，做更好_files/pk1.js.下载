!function(t,e){function i(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}function n(){return F++}function a(t,e,i){i=i||this;for(var n=0,a=t.length;a>n;n++)"undefined"!=typeof t[n]&&e.call(i,t[n],n,t)}function o(t){return t.match(Q)[0]}function r(t){for(t=t.replace(z,"/"),t=t.replace(D,"$1/");t.match(U);)t=t.replace(U,"/");return t}function l(t){var e=t.length-1,i=t.charAt(e);return"#"===i?t.substring(0,e):".css"===t.substring(e-3)?t:".js"===t.substring(e-2)||t.indexOf("?")>0||"/"===i?t:t+".js"}function s(t){var e=q.alias;return e&&N(e[t])?e[t]:t}function c(t){var e;if(t.indexOf(".")>-1&&(e=H.exec(t))){var i;(i=e[1])&&(t=t.substring(0,t.lastIndexOf(i))),i=".js"+(i||""),t=t.split(".").join("/")+i}return t}function p(t){var e,i=q.paths;return i&&(e=t.match(V))&&N(i[e[1]])&&(t=i[e[1]]+e[2]),t}function d(t){var e=q.vars;return e&&t.indexOf("{")>-1&&(t=t.replace(G,function(t,i){return N(e[i])?e[i]:t})),t}function u(t){var e=q.map,i=t;if(e)for(var n=0,a=e.length;a>n;n++){var o=e[n];if(i=B(o)?o(t)||t:t.replace(o[0],o[1]),i!==t)break}return i}function h(t,e){var i,n=t.charAt(0);if(K.test(t))i=t;else if("."===n)i=r((e?o(e):q.cwd)+t);else if("/"===n){var a=q.cwd.match(Y);i=a?a[0]+t.substring(1):t}else i=q.base+t;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function f(t,e){if(!t)return"";t=s(t),t=c(t),t=s(t),t=p(t),t=d(t),t=l(t);var i=h(t,e);return i=u(i)}function g(t){return t.hasAttribute?t.src:t.getAttribute("src",4)}function m(t,e,i){var n=ot.test(t),a=X.createElement(n?"link":"script");if(i){var o=B(i)?i(t):i;o&&(a.charset=o)}return b(a,e,n,t),n?(a.rel="stylesheet",a.href=t):(a.async=!0,a.src=t),et=a,at?nt.insertBefore(a,at):nt.appendChild(a),et=null,a}function b(t,e,i,n){function a(){t.onload=t.onerror=t.onreadystatechange=null,i||q.debug||nt.removeChild(t),t=null,e()}var o="onload"in t;return!i||!rt&&o?void(o?(t.onload=a,t.onerror=function(){j("error",{uri:n,node:t}),a()}):t.onreadystatechange=function(){/loaded|complete/.test(t.readyState)&&a()}):void setTimeout(function(){x(t,e)},1)}function x(t,e){var i,n=t.sheet;if(rt)n&&(i=!0);else if(n)try{n.cssRules&&(i=!0)}catch(a){"NS_ERROR_DOM_SECURITY_ERR"===a.name&&(i=!0)}setTimeout(function(){i?e():x(t,e)},20)}function v(){if(et)return et;if(it&&"interactive"===it.readyState)return it;for(var t=nt.getElementsByTagName("script"),e=t.length-1;e>=0;e--){var i=t[e];if("interactive"===i.readyState)return it=i}}function w(t){var e=pt.exec(t),i=st;e&&"require"!==(e=e[1])&&(i=i.toString().replace(/require/g,e),i=i.slice(1,i.length-2),i=new RegExp(i,"g"));var n=[];return t.replace(ct,"").replace(i,function(t,e,i){i&&n.push(i)}),n}function _(t,e){this.uri=t,this.dependencies=e||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function y(t){var e=t.length;if(!(2>e)&&q.combo){q.comboSyntax&&(_t=q.comboSyntax),q.comboMaxLength&&(yt=q.comboMaxLength),q.comboSuffix&&(xt=q.comboSuffix),bt=q.comboExcludes;for(var i=[],n=0;e>n;n++){var a=t[n];if(!wt[a]){var o=_.get(a);o.status<vt&&!C(a)&&!I(a)&&!P(a)&&i.push(a)}}i.length>1&&k(i)}}function E(t){q.combo&&(t.requestUri=wt[t.uri]||t.uri)}function k(t){var e=[],i=Et.exec(t[0])[1],n=i.length;a(t,function(t){e.push(t.substr(n))}),T(i,e)}function T(t,e){for(var i=[],n=0,a=e.length;a>n;n++)i[n]=e[n].replace(/\?.*$/,"");var o=t+_t[0]+i.join(_t[1]);xt&&(o+=xt);var r=o.length>yt;if(e.length>1&&r){var l=A(e,yt-(t+_t[0]).length);T(t,l[0]),T(t,l[1])}else{if(r)throw new Error("The combo url is too long: "+o);for(var n=0,a=e.length;a>n;n++)wt[t+e[n]]=o}}function A(t,e){for(var i=_t[1],n=t[0],a=1,o=t.length;o>a;a++)if(n+=i+t[a],n.length>e)return[t.splice(0,a),t]}function C(t){return kt.test(t)}function I(t){return bt?bt.test?bt.test(t):bt(t):void 0}function P(t){var e=q.comboSyntax||_t,i=e[0],n=e[1];return i&&t.indexOf(i)>0||n&&t.indexOf(n)>0}if(t.LBF)var S=t.LBF;var exports=t.LBF={version:"0.8.0"},q=exports.data={};exports.noConflict=function(){S&&(t.LBF=S)};var L=i("Object"),N=i("String"),O=Array.isArray||i("Array"),B=i("Function"),M=i("Number"),W=i("RegExp"),F=0,R=q.events={};exports.on=function(t,e){var i=R[t]||(R[t]=[]);return i.push(e),exports},exports.off=function(t,e){if(!t&&!e)return R=q.events={},exports;var i=R[t];if(i)if(e)for(var n=i.length-1;n>=0;n--)i[n]===e&&i.splice(n,1);else delete R[t];return exports};var j=exports.emit=function(t,e){var i=R[t];if(i){i=i.slice();for(var n=0,a=i.length;a>n;n++)i[n](e)}return exports},Q=/[^?#]*\//,z=/\/\.\//g,U=/\/[^\/]+\/\.\.\//,D=/([^:\/])\/+\//g,V=/^([^\/:]+)(\/.+)$/,G=/{([^{]+)}/g,H=/^[\w-_]*(?:\.[\w-_]+)*(\?[\w-_&=]*)?$/,K=/^\/\/.|:\//,Y=/^.*?\/\/.*?\//,X=document,J=location.href&&0!==location.href.indexOf("about:")?o(location.href):"",$=X.scripts,Z=X.getElementById("LBFnode")||$[$.length-1],tt=o(g(Z)||J);exports.resolve=f;var et,it,nt=X.head||X.getElementsByTagName("head")[0]||X.documentElement,at=nt.getElementsByTagName("base")[0],ot=/\.css(?:\?|$)/i,rt=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;exports.request=m;var lt,st=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,ct=/\\\\/g,pt=/^function[\s]*\([\s]*([^\f\n\r\t\v,\)]+)/,dt=exports.cache={},ut={},ht={},ft={},gt=_.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};_.prototype.resolve=function(){for(var t=this,e=t.dependencies,i=[],n=0,a=e.length;a>n;n++)i[n]=_.resolve(e[n],t.uri);return i},_.prototype.load=function(){var t=this;if(!(t.status>=gt.LOADING)){t.status=gt.LOADING;var e=t.resolve();j("load",e);for(var i,n=t._remain=e.length,a=0;n>a;a++)i=_.get(e[a]),i.status<gt.LOADED?i._waitings[t.uri]=(i._waitings[t.uri]||0)+1:t._remain--;if(0===t._remain)return void t.onload();var o={};for(a=0;n>a;a++)i=dt[e[a]],i.status<gt.FETCHING?i.fetch(o):i.status===gt.SAVED&&i.load();for(var r in o)o.hasOwnProperty(r)&&o[r]()}},_.prototype.onload=function(){var t=this;t.status=gt.LOADED,t.callback&&t.callback();var e,i,n=t._waitings;for(e in n)n.hasOwnProperty(e)&&(i=dt[e],i._remain-=n[e],0===i._remain&&i.onload());delete t._waitings,delete t._remain},_.prototype.fetch=function(t){function e(){exports.request(o.requestUri,o.onRequest,o.charset)}function i(){delete ut[r],ht[r]=!0,lt&&(_.save(a,lt),lt=null);var t,e=ft[r];for(delete ft[r];t=e.shift();)t.load()}var n=this,a=n.uri;n.status=gt.FETCHING;var o={uri:a};j("fetch",o);var r=o.requestUri||a;return!r||ht[r]?void n.load():ut[r]?void ft[r].push(n):(ut[r]=!0,ft[r]=[n],j("request",o={uri:a,requestUri:r,onRequest:i,charset:q.charset}),void(o.requested||(t?t[o.requestUri]=e:e())))},_.prototype.exec=function(){function require(t){return _.get(require.resolve(t)).exec()}var t=this;if(t.status>=gt.EXECUTING)return t.exports;t.status=gt.EXECUTING;var i=t.uri;require.resolve=function(t){return _.resolve(t,i)},require.async=function(t,e){return _.use(t,e,i+"_async_"+n()),require};var a=t.factory,exports=B(a)?a(require,t.exports={},t):a;return exports===e&&(exports=t.exports),delete t.factory,t.exports=exports,t.status=gt.EXECUTED,j("exec",t),exports},_.resolve=function(t,e){var i={id:t,refUri:e};return j("resolve",i),i.uri||exports.resolve(i.id,e)},_.define=function(t,i,n){var a=arguments.length;1===a?(n=t,t=e):2===a&&(n=i,O(t)?(i=t,t=e):i=e),!O(i)&&B(n)&&(i=w(n.toString()));var o={id:t,uri:_.resolve(t),deps:i,factory:n};if(!o.uri&&X.attachEvent){var r=v();r&&(o.uri=r.src)}j("define",o),o.uri?_.save(o.uri,o):lt=o},_.save=function(t,e){var i=_.get(t);i.status<gt.SAVED&&(i.id=e.id||t,i.dependencies=e.deps||[],i.factory=e.factory,i.status=gt.SAVED,j("save",i))},_.get=function(t,e){return dt[t]||(dt[t]=new _(t,e))},_.use=function(e,i,n){var a=_.get(n,O(e)?e:[e]);a.callback=function(){for(var exports=[],e=a.resolve(),n=0,o=e.length;o>n;n++)exports[n]=dt[e[n]].exec();i&&i.apply(t,exports),delete a.callback},a.load()},exports.use=function(t,e){return _.use(t,e,q.cwd+"_use_"+n()),exports},_.define.cmd={},exports.define=_.define,exports.Module=_,q.fetchedList=ht,q.cid=n,exports.require=function(t){var e=_.get(_.resolve(t));return e.status<gt.EXECUTING&&(e.onload(),e.exec()),e.exports},q.base=tt,q.dir=tt,q.cwd=J,q.charset="utf-8",exports.config=function(t){for(var e in t){var i=t[e],n=q[e];if(n&&L(n))for(var a in i)n[a]=i[a];else O(n)?i=n.concat(i):"base"===e&&("/"!==i.slice(-1)&&(i+="/"),i=h(i)),q[e]=i}return j("config",t),exports};var mt=[["globalSettings",exports.data],["lang.forEach",a],["lang.isType",i],["lang.isObject",L],["lang.isString",N],["lang.isArray",O],["lang.isFunction",B],["lang.isNumber",M],["lang.isRegExp",W],["util.request",m]];t.JSON&&mt.push(["lang.JSON",t.JSON]),t.jQuery&&0===(t.jQuery.version||"").indexOf("1.7")&&mt.push(["lib.jQuery",t.jQuery]),a(mt,function(t){exports.define(t[0],function(require,exports,module){module.exports=t[1]})});var bt,xt,_=LBF.Module,vt=_.STATUS.FETCHING,q=LBF.data,wt=q.comboHash={},_t=["c/=/",",/"],yt=1e3;LBF.on("load",y),LBF.on("fetch",E);var Et=/^(\S+:\/{2,3}[^\/]+\/)/,kt=/\.css(?:\?.*)?$/;if(q.test){var Tt=LBF.test||(LBF.test={});Tt.uris2paths=k,Tt.paths2hash=paths2hash}}(this),LBF.config({paths:{wpa:__WPA.staticBase},debug:__WPA.env,protocol:__WPA.protocol,apiBase:__WPA.apiBase,staticBase:__WPA.staticBase}),LBF.define("wpa.app",function(require,exports,module){var t=require("lang.forEach"),e=require("lang.extend"),i=require("lang.isFunction"),n=require("util.Event"),a=require("wpa.proto.main"),o=require("wpa.api");require("globalSettings");module.exports=exports=__WPA,exports.init=function(){var e=exports,i=e._evtBkt;for(var n in i)i.hasOwnProperty(n)&&t(i[n],function(t){e.on(n,t)});delete e._evtBkt;var a=e._stack;t(a,function(t){t&&e.create(t)}),delete e._stack,e.trigger("load")},exports.ready=function(t){i(t)&&t()},exports.create=function(t){new a(t)},e(exports,o,n)}),LBF.define("lang.extend",function(require,exports,module){var t=require("lang.isPlainObject");module.exports=function(e,i,n){function a(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function o(e,i){for(var n in i)i.hasOwnProperty(n)&&(t(i[n])?(e[n]=e[n]||{},o(e[n],i[n])):e[n]=i[n])}var r=[].slice.apply(arguments),l=r.shift(),s=a;"boolean"==typeof l&&(l=r.shift(),l&&(s=o));for(var c=0,p=r.length;p>c;c++)s(l,r[c]);return l}}),LBF.define("util.Event",function(require,exports){var t=require("lang.toArray"),e=require("util.Callbacks"),i="_EVENTS";exports.on=function(t,n,a){var o=this[i];o||(o=this[i]={});var r=o[t]||(o[t]=e("stopOnFalse"));if(1===a){var l=n,s=this;n=function(){return s.off(t,n),l.apply(this,arguments)}}return r.add(n),this},exports.off=function(t,e){if(!t)return this[i]={},this;var n=this[i];return n&&n[t]?e?(n[t].remove(e),this):(n[t].empty(),this):this},exports.trigger=function(){var e=t(arguments),n=e.shift(),a=this[i];return a&&a[n]?(a[n].fireWith(this,e),this):this},exports.once=function(t,e){return this.on(t,e,1)}}),LBF.define("wpa.proto.main",function(require,exports,module){var t=require("lang.extend"),e=require("util.Event"),i=require("wpa.proto.render"),n=require("wpa.proto.uiEvents"),a=(require("util.GUID"),require("util.localStorage")),o=(require("wpa.protocol.kfuin"),require("wpa.proto.custom")),r=require("wpa.conf.config"),l=r.KFUINS,s=r.WEB_IM,c=s.WPAS_IM_TYPE,p=r.gWin,d=(require("lang.browser"),r.isMobile),u=r.GLOBAL_WPA,h=r.WPAS_BASED_ON_KFUIN,f=require("wpa.protocol.Reporter"),g=require("wpa.util.getRootDomain"),m=require("wpa.util.ids"),b=(require("wpa.util.log"),require("util.Cookie")),x=require("wpa.proto.chat"),v=require("wpa.proto.phone"),w=require("wpa.proto.add"),_=require("wpa.proto.im"),y=require("wpa.im.init"),E=require("wpa.invite.main"),k=require("wpa.proto.socket"),T=require("wpa.proto.getGdtClickId"),A=require("wpa.proto.UnreadMsgCircle"),C=require("wpa.proto.addDa");p[u]=p[u]?p[u]:{},p.__WPA[l]="undefined"!=typeof p.__WPA[l]?p.__WPA[l]:{},p.__WPA[h]="undefined"!=typeof p.__WPA[h]?p.__WPA[h]:{},p.__WPA[c]="undefined"!=typeof p.__WPA[c]?p.__WPA[c]:{},module.exports=exports=function(t){this.initialize(t)};var I=exports.prototype;p.__WPA.IM=_;var P=function(){return Math.round(2147483647*(Math.random()||.5))*+new Date%1e10},S=function(){var t=window.__qq_qidian_da_pid;return t&&/^QD\./.test(t)||(t=window.__qq_qidian_da_pid=m.createPid(!0)),t},q=function(){var t=g.getRootDomain(),e=g.isCookieEnabled,i="";return e?(i=b.get("_qddaz"),i&&/^QD\./.test(i)||(i=m.createQid(!0),b.set("_qddaz",i,t,"/",31536e6))):(i=window.__qq_qidian_da_qid,i&&/^QD\./.test(i)||(i=window.__qq_qidian_da_qid=m.createQid(!0))),i},L=function(){this.on("render",function(t){f.report(t.reportType,t)}),this.on("click",function(t){f.report(t.reportType,t)}),this.on("PCChat",function(){}),this.on("mobileChat",function(){}),this.on("anonyChat",function(){}),this.on("linkChat",function(){}),this.on("gdtReport",function(t){f.report(t.reportType,t)})};I.initialize=function(t){var e=this,i=t.fkfuin;if(p.__WPA[l][i]||(p.__WPA[l][i]={}),L.apply(this),a.getItem(r.tencentSig))t.guid=a.getItem(r.tencentSig);else{var n=P();t.guid=n,a.setItem(r.tencentSig,n)}t.wpa=this,this.params=t,this.params.pid=S().substring(3),this.params.qid=q().substring(3);var o=this.params.fkfuin+"_"+this.params.id;p[u][o]=e,p.__WPA[h][i]?p.__WPA[h][i].push(e):p.__WPA[h][i]=[e],t.customEle?this.custom(t):e.render(),C(t.fkfuin),T(t),t.cate==r.TYPES.IM&&(e.imInit(this.params),t.cate==r.TYPES.IM&&("undefined"!=typeof p.__WPA[c][i]?p.__WPA[c][i].push(e):p.__WPA[c][i]=[e])),t.cate==r.TYPES.IM&&!r.isInAdmin&&(!r.isLocal&&d||r.isLocal)&&this.establishSocket()},t(I,e,i,x,n,o,v,w,_,y,A,k,{Invite:E})}),LBF.define("wpa.api",function(require,exports,module){var t=exports.api={},e=require("wpa.proto.main"),i=require("wpa.protocol.chat");t.create=function(t){return new e(t)},t.createCustom=function(t){return new e(t)},t.chat=function(t){},t.PCChat=function(t,e){i.PCChat(t,e)},t.mobileChat=function(t,e){i.mobileChat(t,e)},t.anonyChat=function(t,e){i.anonyChat(t,e)},t.linkChat=function(t,e){i.linkChat(t,e)}}),LBF.define("lang.isPlainObject",function(require,exports,module){var t=require("lang.isObject"),e=function(t){return t&&t===t.window};module.exports=function(i){if(!i||!t(i)||i.nodeType||e(i))return!1;var n=Object.prototype.hasOwnProperty;try{if(i.constructor&&!n.call(i,"constructor")&&!n.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}var o;for(o in i);return void 0===o||n.call(i,o)}}),LBF.define("lang.toArray",function(require,exports,module){module.exports=function(t){return[].slice.call(t)}}),LBF.define("util.Callbacks",function(require,exports,module){var t=(require("lang.Class"),require("lang.forEach")),e=require("lang.extend"),i=require("lang.isFunction"),n=require("lang.isString"),a=require("lang.inArray"),o=/\S+/g,r={},l=function(e){var i=r[e]={};return t(e.match(o)||[],function(t){i[t]=!0}),i};module.exports=function(o){o="string"==typeof o?r[o]||l(o):e({},o);var s,c,p,d,u,h,f=[],g=!o.once&&[],m=function(t){for(c=o.memory&&t,p=!0,u=h||0,h=0,d=f.length,s=!0;f&&d>u;u++)if(f[u].apply(t[0],t[1])===!1&&o.stopOnFalse){c=!1;break}s=!1,f&&(g?g.length&&m(g.shift()):c?f=[]:b.disable())},b={add:function(){if(f){var e=f.length;!function a(e){t(e,function(t){i(t)?o.unique&&b.has(t)||f.push(t):t&&t.length&&n(t)&&a(t)})}(arguments),s?d=f.length:c&&(h=e,m(c))}return this},remove:function(){return f&&t(arguments,function(t){for(var e;(e=a(t,f,e))>-1;)f.splice(e,1),s&&(d>=e&&d--,u>=e&&u--)}),this},has:function(t){return t?a(t,f)>-1:!(!f||!f.length)},empty:function(){return f=[],d=0,this},disable:function(){return f=g=c=void 0,this},disabled:function(){return!f},lock:function(){return g=void 0,c||b.disable(),this},locked:function(){return!g},fireWith:function(t,e){return!f||p&&!g||(e=e||[],e=[t,e.slice?e.slice():e],s?g.push(e):m(e)),this},fire:function(){return b.fireWith(this,arguments),this},fired:function(){return!!p}};return b}}),LBF.define("wpa.proto.render",function(require,exports,module){var t=require("wpa.util.onIframeLoaded"),e=require("wpa.util.tmplCompiler"),i=require("wpa.util.Style"),n=require("lang.extend"),a=require("wpa.conf.wpaType"),o=require("wpa.util.insertIframe"),r=require("wpa.conf.floatCss"),l=require("wpa.conf.Events"),s=require("lang.proxy"),c=require("wpa.conf.wpaTmpl"),p=require("lang.inArray"),d=require("wpa.util.domEvent"),u=require("wpa.conf.defaultConst"),h=require("wpa.util.getSize"),f=require("lang.browser"),g="box-shadow:0 1px 15px rgba(0, 0, 0, 0.15);",m="border-top: 1px solid #e3e3e3;border-bottom:1px solid #e3e3e3;",b="border-radius: {borderRadius};",x="middle",v=function(l,s){c.init({ratio:l.ratio});var d=h(l.ratio),u=l.cate,v=l.type,_=l.theme,y=s,E=l.scriptPosition,k=l.container,T=(l.ratio,l.scene),A=l.position,C=c.get(u,v),I=a[u][v],P=I.borderRadius,S=I.hasBoxShadow,q=I.iframeBorder,L=I.floatStyle,N=p("position",I.htmlRequired||[]),O="",B=I.isPC,M=I.isInQQ,W=C.cssText,F=B?C.width:d(C.width),R=B?C.height:d(C.height),j="undefined"!=typeof l.enableFloat?l.enableFloat:!0;if(!j||void 0==l.position&&void 0==C.defaultPosition||(O=r.getFloatStyle({width:F,height:R,floatStyle:L,position:l.position,defaultPosition:C.defaultPosition})),O+=S?g:"","object"==typeof q){var Q=q.theme;("undefined"!=typeof Q&&_==Q||"undefined"==typeof Q)&&(O+="border:"+q.width+" solid "+q.color+";")}O+="undefined"!=typeof P?b.replace("{borderRadius}",P):"";var z=(1==T||2==T)&&0==A&&-1!==N;z&&(l.className=l.className+x+" "),O+=z?m:"",O+=M?m:"";var U="qidian_wpa_"+l.id,D="class_qidian_wpa",V='<iframe scrolling="no" class="'+D+'" id="'+U+'" frameborder="0" width="'+F+'" height="'+R+'" allowtransparency="true" src="about:blank" {style} ></iframe>';V=O?V.replace("{style}",'style="'+O+'"'):V.replace("{style}","");var G;try{G=document.createElement(V)}catch(H){G=document.createElement("iframe"),G.width=F,G.height=R,G.id=U,G.style.cssText=O,G.setAttribute("scrolling","no"),G.setAttribute("frameborder",0),G.setAttribute("allowtransparency",!0),G.setAttribute("src","about:blank"),G.setAttribute("class",D)}o({ele:G,lastScript:E,container:k});var K=e.compile({tpl:C.tpl,params:l,htmlRequired:I.htmlRequired});if(f.msie)try{G.contentWindow.document}catch(H){G.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close()})())"}var Y=function(){var t=G.contentWindow,e=G.contentDocument||t.document;if(e.open(),e.write(["<!doctype html>",'<html xmlns="http://www.w3.org/1999/xhtml">',"<head>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',f.msie&&"about:blank"!==G.src?"<script>document.domain='"+document.domain+"';</script>":"","</head>","<body>",K,"</body>","</html>"].join("")),e.close(),f.isIOS||f.isAndroid)try{e.body.addEventListener("touchmove",function(t){t.preventDefault()},!1)}catch(a){}var o={self:y,name:"style",cssText:W,doc:e};i.add(o);var r=e.getElementsByName(c.defaultEventTagName);w(r,s),setTimeout(function(){s.trigger("render",n({reportType:"render"},l))},1e3)};return t(G,Y),G},w=function(t,e){if(t.length)for(var i=0,n=t.length;n>i;i++){var a=t[i],o=a.attributes["data-event"].nodeValue,r=o.split(";"),c=r[0],p=r[1]||l.defaultEventType,u=s(e[c],e);u&&d.addEvent(a,p,u)}},_=function(t){t.className="",t.theme||(t.theme=u.THEME),"number"!=typeof t.width&&(t.width="100%"),"number"!=typeof t.height&&(t.height="100%"),t.btnBgColor||(t.btnBgColor={}),t.btnBgColor.value||(t.btnBgColor.value=u.BTN_COLOR),t.title||(t.title=u.TITLE[t.cate]),t.signature||(t.signature=u.SIGNATURE[t.cate]),t.btnText||(t.btnText=u.BTN_TEXT[t.cate]),t.ratio||(t.ratio=window.devicePixelRatio)};exports.render=function(){_(this.params),this.el=v(this.params,this)},exports.remove=function(){var t=this.el;t&&t.parentNode&&t.parentNode.removeChild(t)}}),LBF.define("wpa.proto.uiEvents",function(require,exports,module){function t(t){t.wpa.trigger("click",e({reportType:"click"},t)),setTimeout(function(){t.wpa.trigger("gdtReport",e({reportType:"gdtReport"},n._gdtReportData))},120)}var e=require("lang.extend"),i=require("wpa.conf.config"),n=(i.isInAdmin,i.gWin),a=require("wpa.util.ids"),o={QQ:"roleQQ",TEL:"roleTEL",KFEXT:"roleKFEXT",GROUP:"roleGROUP",PUB:"rolePUB"},r=1,l=2,s=3,c=function(t){var e=t.roleKey||o.QQ,i=t[e]||{};t.roleValue=i.value,t.roleUin=i.uin,t.roleData=i.data,t.clickid=a.createClickId(),t.isPub=i.isPub,t.isPub&&(t.onlyMobile=!0,t.roleUin=i.pub.uin,t.roleData=i.data,t.value=i.value)};exports.defaultEventType="click",exports.callClose=function(){this.remove(),this.trigger("close")},exports.callChat=function(){this.params.roleKey=o.QQ,c(this.params),this.params._tptype=this.params.roleQQ.value?r:l,"object"==typeof n._gdtReportData&&(n._gdtReportData.tptype=this.params._tptype),t(this.params),this.chat()},exports.callPhone=function(){this.params.roleKey=o.TEL,c(this.params),this.params._tptype=s,"object"==typeof n._gdtReportData&&(n._gdtReportData.tptype=this.params._tptype),t(this.params),this.phone()},exports.callAddPal=function(){this.params.roleKey=o.KFEXT,c(this.params),t(this.params),this.addPal()},exports.callAddGroup=function(){this.params.roleKey=o.GROUP,c(this.params),t(this.params),this.addGroup()},exports.callAddFan=function(){this.params.roleKey=o.PUB,c(this.params),t(this.params),this.addFan()},exports.callIm=function(){this.im(e({isClickWpa:!0},this.params))}}),LBF.define("util.GUID",function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}),LBF.define("util.localStorage",function(require){var t=require("util.Cookie"),e=require("lang.trim"),i="IELS",n=31536e8,a=document,o=new RegExp("(?:^|[ ;])"+i+"[^=]+=([^;$])"),r=function(t){return i+t},l=function(t){var e,i=a.cookie.split(";"),n=0,r=i.length,l=[];if(t)for(;r>n;n++)(e=o.exec(i[n]))&&(l.push(e[1]),t(e[1]));else for(;r>n;n++)(e=o.exec(i[n]))&&l.push(e[1]);return l};return window.localStorage||{length:l().length,key:function(t){return l()[t]||null},getItem:function(e){return t.get(r(e))},setItem:function(e,i){t.set(r(e),i,null,"/",n),this.length=l().length},removeItem:function(e){t.del(e),this.length=l().length},clear:function(){this.length=l(function(i){t.del(e(i.split("=")[0]))}).length}}}),LBF.define("wpa.protocol.kfuin",function(require,exports,module){function t(){}var e=require("util.jsonp"),i=require("wpa.conf.chat"),n=require("lang.isFunction"),a=i.WPL_B_QQ_COM_CONV,o={};return{get:function(i,r){if(!n(r)&&(r=t),!i||o[i])return void r(o[i]);var l={num:i};e(a,l,function(t){if(!t||0!==t.r)return void r();var e=o[i]=t.data.kfuin;r(e)})},set:function(t,e){o[t]=e}}}),LBF.define("wpa.proto.custom",function(require,exports,module){var t=require("util.domEvent"),e=require("lang.extend"),i=(require("wpa.protocol.Reporter"),{callChat:"callChat",callPhone:"callPhone",callAddPal:"callAddPal",callAddGroup:"callAddGroup",callAddFan:"callAddFan"});exports.custom=function(n){var a=this,o=n.action?i[n.action]:i.callChat;t.addEvent(n.customEle,"click",function(){a[o]&&a[o]()}),this.trigger("render",e({reportType:"render"},n))}}),LBF.define("wpa.conf.config",function(require,exports,module){function t(){var t=window;return-1!==location.href.indexOf("qdconnect.html")&&-1!==location.search.indexOf("wp.qiye.qq.com")&&(t=r?top:parent),t}var e=require("globalSettings"),i=e.staticBase,n=e.base,a=e.protocol,o=require("lang.browser"),r=o.isAndroid||o.isIOS,l=-1!==location.hostname.indexOf("local.qiye.qq.com")?!0:!1,s=-1!==location.hostname.indexOf("devadmin.qidian.qq.com")?!0:!1,c=-1!=location.protocol.indexOf("https")?!0:!1,p="admin.qidian.qq.com",d={common:p+"/tp/wpaCall/getProtocol",mp:p+"/tp/wpaCall/getMpProtocol"},u=t(),h=u,f=h.document,g=f.body,m=-1!==h.location.href.indexOf("admin.qidian.qq.com/tp/wpa")?!0:!1;"undefined"==typeof h.__WPA&&(h.__WPA=window.__WPA);var b="";__WPAENV="undefined"!=typeof __WPAENV?__WPAENV:"production","development"==__WPAENV?b="dev":"test"==__WPAENV&&(b="oa");var x="http://local.qiye.qq.com/mockup/socket.html",v="http://local.qiye.qq.com/mockup/status_socket.html",w="https://"+b+"static.qidian.qq.com/2/chat/h5/index.html",_="https://"+b+"static.qidian.qq.com/2/chat/statusManager/index.html";module.exports={imageBaseUrl:i+"/images",customBaseUrl:n,isSSL:c,tencentSig:"tencentSig",CGIS:{GET_SIGT:{development:a+"//dev"+d.common,test:a+"//oa"+d.common,production:a+"//"+d.common},GET_MP_SIGT:{development:a+"//dev"+d.mp,test:a+"//oa"+d.mp,production:a+"//"+d.mp}},host:p,ENV:"undefined"!=typeof __WPAENV?__WPAENV:"production",TYPES:{QQ:1,PHONE:2,PUB:3,GROUP:4,KFEXT:5,IM:7},SCROLL_TOP_NAME:"__QD_SCROLL_TOP",GLOBAL_WPA:"__qd_wpas",KFUINS:"KFUINS",WPAS_BASED_ON_KFUIN:"WPAS_BASED_ON_KFUIN",SOCKET:{URL:l?v:_,SOCKET_IFRAME_ID:"_QD_STATUS_MANAGE_SOCKET_IFRAME",ACTS:{SM_READY:"SM_READY",SM_INIT:"SM_INIT",SM_UNREAD:"SM_UNREAD",SM_INVITE_CONF:"SM_INVITE_CONF",SM_MANUAL_INVITE:"SM_MANUAL_INVITE",SM_INVITE_RET:"SM_INVITE_RET",SM_REFUSE:"SM_REFUSE",SMS_SM_FORCE_CONNECT:"SMS_SM_FORCE_CONNECT"}},INVITATION_TYPE:{OFFLINE:3,AUTO:4},UNREAD_MSG_INFO:"UNREAD_MSG_INFO",INVITE_IFRAME_ID_PREFIX:"_QD_INVITE_IFRAME_ID_PREFIX_",KFUIN_INVITED_TIMES:"KFUIN_INVITED_TIMES",WEB_IM:{WEB_IM_IFRAMES_OBJ_NAME:"_QIDIAN_WEB_IM_IFRAMES",WEB_IM_IFRAME_ID:"_QIDIAN_WEB_IM_IFRAME_",WEB_IM_IFRAMES_LOADED:"_QIDIAN_WEB_IM_IFRAMES_LOADED",WPAS_IM_TYPE:"WPAS_IM_TYPE",POSITION_HELP_EL:"__QD_IM_POSITION_HELPER",URL:l?x:w,ACTS:{UNREAD:"UNREAD",OPEN:"OPEN",CLOSE:"CLOSE",INIT:"INIT",LAUNCH:"LAUNCH",INPUT:"INPUT",FOCUS:"FOCUS",BLUR:"BLUR"},LAUNCH_TYPES:{QQ:"QQ",PHONE:"PHONE"}},isMobile:r,isLocal:l,isDev:s,gWin:u,GLOBAL_INVITE_TPL_AND_CONF:"GLOBAL_INVITE_TPL_AND_CONF",winWidth:g.offsetWidth,winHeight:g.offsetHeight,IM_CHAT_IFRAME_OPENING:"IM_CHAT_IFRAME_OPENING",isInAdmin:m}}),LBF.define("lang.browser",function(require,exports){var t,e,i=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[];i.indexOf("trident")>-1&&(e=/rv:([\d.]+)/.exec(i))&&(n[1]="msie",n[2]=e[1]),t={browser:n[1]||"",version:n[2]||"0"},t.browser&&(exports[t.browser]=!0,exports.version=t.version),exports.chrome?exports.webkit=!0:exports.webkit&&(exports.safari=!0);var a=exports.msie,o=parseInt(exports.version,10),r=exports.isMobile=i.match(/(nokia|iphone|android|motorola|^mot\-|softbank|foma|docomo|kddi|up\.browser|up\.link|htc|dopod|blazer|netfront|helio|hosin|huawei|novarra|CoolPad|webos|techfaith|palmsource|blackberry|alcatel|amoi|ktouch|nexian|samsung|^sam\-|s[cg]h|^lge|ericsson|philips|sagem|wellcom|bunjalloo|maui|symbian|smartphone|midp|wap|phone|windows ce|iemobile|^spice|^bird|^zte\-|longcos|pantech|gionee|^sie\-|portalmmm|jig\s browser|hiptop|^ucweb|^benq|haier|^lct|opera\s*mobi|opera\*mini|320x320|240x320|176x220)/i);exports.isWin=/windows|win32/.test(i),exports.isMac=/Mac/.test(i),exports.isIOS=/(?:iphone|ipad|ipod)/i.test(i),exports.isAndroid=/android/i.test(i),exports.browser=t.browser||"",exports.majorVersion=o,exports.isIE6=a&&6===o,exports.isIE9=a&&9===o,exports.isIE9Below=a&&9>o,exports.isMobile=r}),LBF.define("wpa.protocol.Reporter",function(require,exports,module){var t=(require("wpa.conf.report"),require("lang.JSON"),require("wpa.util.formReport")),e=require("wpa.conf.config"),i=e.gWin,n=e.ENV,a=(require("util.jsonp"),require("lang.browser")),o=require("lang.extend"),r=require("globalSettings"),l=require("wpa.proto.getCPType"),s={development:"devadmin.",test:"oaadmin.",production:"admin."},c=s[r.debug]||"",p="https://"+c+"qidian.qq.com",d={render:"/ar/ActCap/ActRpt",click:"/ar/ActCap/ActRpt",gdtReport:"/ar/actCap/gdtRpt"},u=1,h=2,f="gdtReport",g=location.hostname,m=function(){var t={},e=["post.mp.qq.com","article.mp.qq.com","mp.weixin.qq.com","wap.qidian.qq.com"].join(",");if(-1!==e.indexOf(g)){var i=location.href.match(/taskid=\d+/);t.taskid=i?i[0].split("=")[1]:0}return t},b=function(e,r){var s=p+d[e];if(e===f&&0!=i._gdtReportData)return void t({action:s,data:i._gdtReportData});var c=r.fkfuin;switch(r.cate){case 1:c=0==r.roleQQ.value?r.roleQQ.data:c;break;case 2:c=0==r.roleTEL.value?r.roleTEL.data:c;break;case 3:c=r.rolePUB.uin;break;case 4:break;case 5:c=r.roleKFEXT.data}var u={mid:"",id:r.id,cate:r.cate,type:r.type,visitorid:r.guid,qidianid:r.guid,kfuin:r.fkfuin,kfext:c,ldpg:i.location.href,refurl:"undefined"!=typeof document.referrer?document.referrer:"",ua:window.navigator.userAgent,title:encodeURIComponent(document.title),eptype:a.isMobile?2:1,pid:r.pid,qid:r.qid,env:n};if(1==r.customEnterSwitch&&(u.qidian_src_desc=encodeURIComponent(i.qidian_src_desc)||"",u.qidian_track_id=i.qidian_track_id||""),o(u,m()),"render"===e)dataObj=x(r,u);else{if("click"!==e)return;dataObj=o({eventtp:h,clickid:r.clickid||""},o(u,l(r)))}t({action:s,data:dataObj})},x=function(t,e){var i=l(t);return i.eventtp=u,o(i,e)};exports.report=b}),LBF.define("wpa.util.getRootDomain",function(require,exports,module){var t,e=require("util.Cookie"),i=require("wpa.conf.config"),n=i.gWin,a=require("lang.inArray"),o=(n.document,n.location.hostname),r=(o.length,o.split(".")),l=r.length,s="",c=31536e6,p="__root_domain_v",d=n.navigator.cookieEnabled,u=[".qq.com"],h=function(){for(var i=l-1;i>=0;i--)if(s="."+r[i]+s,-1===a(s,u)&&(e.set(p,s,s,"/",c),e.get(p))){t=s;break}return t};exports.getRootDomain=h,exports.isCookieEnabled=d}),LBF.define("wpa.util.ids",function(require,exports,module){var t=require("wpa.conf.config"),e=t.gWin,i=e.document,n="QD.",a=function(t){return t.toString(36)},o=function(t){var e=1;if(t){var i=0;e=0;for(var n=t.length-1;n>=0;n--)i=t.charCodeAt(n),e=(e<<6&268435455)+i+(i<<14),i=266338304&e,e=0!=i?e^i>>21:e}return e},r=function(){var t;try{var i=new Uint32Array(1);e.crypto.getRandomValues(i),t=2147483647&i[0]}catch(n){t=Math.floor(2147483648*Math.random())}return t},l=function(t){var l=e.navigator.userAgent+(i.cookie?i.cookie:"")+(i.referrer?i.referrer:"")+e.location.href,s=a(r()^2147483647&o(l))+"."+a(r())+"."+a(+new Date);return t?n+s:s},s=l,c=l;exports.createPid=l,exports.createClickId=s,exports.createQid=c}),LBF.define("wpa.util.log",function(){return function(){console&&console.log}}),LBF.define("util.Cookie",function(){var t=document;return{set:function(e,i,n,a,o){o&&(o=new Date(+new Date+o));var r=e+"="+escape(i)+(o?"; expires="+o.toGMTString():"")+(a?"; path="+a:"")+(n?"; domain="+n:"");return r.length<4096&&(t.cookie=r),this},get:function(e){var i=t.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=i?unescape(i[2]):null},del:function(e,i,n){return this.get(e)&&(t.cookie=e+"="+(n?"; path="+n:"")+(i?"; domain="+i:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"),this},find:function(e){return t.cookie.match(e)}}}),LBF.define("wpa.proto.chat",function(require,exports,module){var t=require("lang.browser"),e=require("wpa.protocol.chat"),i=require("wpa.conf.chat"),n=require("wpa.protocol.getQQVersion"),a=require("wpa.proto.chatSelect"),o=require("lang.proxy"),r=require("wpa.conf.config"),l=r.gWin,s=(require("wpa.util.openMqqPage"),"仅支持移动端咨询，请重新使用手机QQ发起咨询"),c=i.LAUNCH_MOBILE_QQ;exports.chat=function(e){var p=this,d=o(function(){e&&e.apply(this,arguments),this.trigger("chat")},this),u=t.isIOS||t.isAndroid,h=this.params.onlyMobile,f=parseInt(this.params.chatType||i.CHAT_TYPE_AUTO,10);if(1==this.params.customEnterSwitch){var g=this.params.mediaId,m=this.params.id,b=this.params.fkfuin,x=this.params.guid,v="",w="lbs.qidian.qq.com/authorize/show";return"development"==r.ENV?(w="dev"+w,v="dev"):"test"==r.ENV&&(w="oa"+w,v="oa"),w="https://"+w+"?id="+m+"&mediaId="+g+"&visitorId="+x+"&kfuin="+b+"&_bid=2399",void(u?l.location.href=c+"?mqqPage="+w:l.open(w))}if(f===i.CHAT_TYPE_ANONYMOUS)return this.anonyChat(d);if(h&&!u){if(this.params.isPub){var _=r.host+"/template/blue/wpa/launch-qr-code.html?qrCodeImg="+this.params.qrCodeImg;return _="development"===r.ENV?"https://dev"+_:"test"===r.ENV?"https://oa"+_:"https://"+_,window.open(_)}return alert(s)}return u?this.mobileChat(d):f===i.CHAT_TYPE_QQ?this.PCChat(d):t.msie?void n(function(e){return e?void(t.msie&&p.PCChat(d)):void new a({onAIOChat:function(){
p.PCChat(d)},onAnonyChat:function(){p.anonyChat(d)}})}):this.PCChat(d)},exports.PCChat=function(t){var i=this;e.PCChat(this.params,function(){t.apply(i,arguments),i.trigger("PCChat")})},exports.mobileChat=function(t){var i=this;e.mobileChat(this.params,function(){t.apply(i,arguments),i.trigger("mobileChat")})},exports.anonyChat=function(t){var i=this;e.anonyChat(this.params,function(){t.apply(i,arguments),i.trigger("anonyChat")})},exports.linkChat=function(t){var i=this;e.linkChat(this.params,function(){t.apply(i,arguments),i.trigger("linkChat")})}}),LBF.define("wpa.proto.phone",function(require,exports,module){var t,e,i,n=require("lang.browser"),a=(require("util.jsonp"),require("lang.isFunction"),require("wpa.conf.config")),o=a.gWin,r=(a.CGIS,1),l=n.isMobile,s=a.ENV,c={development:"devadmin.",test:"oaadmin.",production:"admin."},p=/\bQQ\/([\d\.]+)/,d=/\bIPadQQ\/([\d\.]+).*?\bQQ\/([\d\.]+)/,u=/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/,h=navigator.userAgent.toLowerCase();document.getElementsByTagName("body")[0],p.test(h)||d.test(h)||u.test(h);if(n.isMobile)if(h.indexOf("micromessenger")>-1){var f=/QQ\/(\d+\.\d+)\.\d/,g=/V1_AND_SQ_(\d+\.\d+)\.\d/,m=f.exec(h)||g.exec(h);(t=!!m)&&(QQVersion=m[1])}else{var f=/QQ\/(\d+\.\d+)\.\d/,g=/V1_AND_SQ_(\d+\.\d+)\.\d/,m=f.exec(h)||g.exec(h);(t=!!m)&&(e=m[1])}else t=!1,i=!1;exports.phone=function(t){var e=this.params;if(!l)return alert("来电仅限移动端呼起");var i=({kfuin:e.fkfuin,kfext:e.fkfext,visitorId:e.guid,fid:e.id,key:e.key,cate:e.cate,type:e.type,ftype:r,roleKey:e.roleKey,roleValue:e.roleValue,roleName:e.roleName,roleUin:e.roleUin,roleData:e.roleData},"https://"+c[s]+"qidian.qq.com/lighttalk/CallCheck?source=1&wpaId="+e.id+"&id="+e.fkfuin+"&vid="+e.guid+"&pid="+e.pid+"&clickid="+e.clickid+"&qid="+e.qid+"&sourceUrl="+o.location.href+"&refurl="+("undefined"!=typeof document.referrer?document.referrer:"")),n="https://"+c[s]+"qidian.qq.com/template/blue/mp/menu/wx-jump-phone.html?url="+encodeURIComponent(i);return void setTimeout(function(){return o.location.href=n},500)}}),LBF.define("wpa.proto.add",function(require,exports,module){var t,e,i,n=require("lang.browser"),a=require("util.jsonp"),o=require("wpa.conf.chat"),r=(require("lang.isFunction"),require("util.serialize")),l=require("wpa.conf.config"),s=require("wpa.util.launch"),c=l.gWin,p=l.CGIS,d=0,u=1,h=n.isMobile,f=l.ENV,g=o.LAUNCH_MOBILE_QQ,m=/\bQQ\/([\d\.]+)/,b=/\bIPadQQ\/([\d\.]+).*?\bQQ\/([\d\.]+)/,x=/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/,v=navigator.userAgent.toLowerCase();document.getElementsByTagName("body")[0],m.test(v)||b.test(v)||x.test(v);if(n.isMobile)if(v.indexOf("micromessenger")>-1){var w=/QQ\/(\d+\.\d+)\.\d/,_=/V1_AND_SQ_(\d+\.\d+)\.\d/,y=w.exec(v)||_.exec(v);(t=!!y)&&(QQVersion=y[1])}else{var w=/QQ\/(\d+\.\d+)\.\d/,_=/V1_AND_SQ_(\d+\.\d+)\.\d/,y=w.exec(v)||_.exec(v);(t=!!y)&&(e=y[1])}else t=!1,i=!1;exports.addPal=function(t){if(!n.isMobile)return alert("加好友仅限移动端呼起");var e=this.params,i={kfuin:e.fkfuin,kfext:e.fkfext,visitorId:e.guid,fid:e.id,key:e.key,cate:e.cate,type:e.type,ftype:u,pid:e.pid,clickid:e.clickid,qid:e.qid,env:f,roleKey:e.roleKey,roleValue:e.roleValue,roleName:e.roleName,roleUin:e.roleUin,roleData:e.roleData};a(p.GET_SIGT[f],i,function(t){if(!t||0!==t.r||!t.data)return alert(t.data.message||ERROR_MSG_INVALID_STAFF);var e=t.data.sign;return c.location.href=g+"?protocol="+e})},exports.addGroup=function(t){var e=this.params,i={kfuin:e.fkfuin,kfext:e.fkfext,visitorId:e.guid,fid:e.id,key:e.key,cate:e.cate,type:e.type,ftype:h?u:d,pid:e.pid,clickid:e.clickid,qid:e.qid,env:f,roleKey:e.roleKey,roleValue:e.roleValue,roleName:e.roleName,roleUin:e.roleUin,roleData:e.roleData};a(p.GET_SIGT[f],i,function(t){if(!t||0!==t.r||!t.data)return alert(t.data.message||ERROR_MSG_INVALID_STAFF);var e=t.data.sign;return h?c.location.href=g+"?protocol="+e:s(e)})},exports.addFan=function(t){if(!n.isMobile)return alert("加关注仅限移动端呼起");var e=this.params,i={kfuin:e.fkfuin,kfext:e.fkfext,visitorId:e.guid,fid:e.id,key:e.key,cate:e.cate,type:e.type,ftype:u,pid:e.pid,clickid:e.clickid,qid:e.qid,env:f,roleKey:e.roleKey,roleValue:e.roleValue,roleName:e.roleName,roleUin:e.roleUin,roleData:e.roleData};a(p.GET_SIGT[f],i,function(t){if(!t||0!==t.r||!t.data)return alert(t.data.message||ERROR_MSG_INVALID_STAFF);var e=t.data.sign;return c.location.href=g+"?"+r(i)+"&protocol="+e})}}),LBF.define("wpa.proto.im",function(require,exports,module){var t,e=require("wpa.conf.config"),i=e.isInAdmin,n=e.isMobile,a=e.INVITATION_TYPE,o=require("lang.extend"),r=e.WEB_IM.ACTS,l=e.SCROLL_TOP_NAME,s=e.WEB_IM,c=s.WEB_IM_IFRAME_ID,p=(s.WPAS_IM_TYPE,e.GLOBAL_WPA,e.UNREAD_MSG_INFO),d=(e.WEB_IM.POSITION_HELP_EL,e.GLOBAL_INVITE_TPL_AND_CONF),u=require("wpa.util.log"),h=require("wpa.util.offset"),f=h.getClientWidth(),g=(h.getClientHeight(),require("wpa.util.domEvent")),m=require("wpa.proto.UnreadMsgCircle"),b=require("wpa.invite.main"),x=(require("lang.browser"),e.gWin),v=x.document,w=(v.body,{x:10,y:10}),_=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()};x[l]="undefined"!=typeof x[l]?x[l]:0;var y={mobile:{open:["right:0;"].join(""),close:["right:-"+(f+w.x)+"px;"].join("")},pc:{open:["right:10px","bottom:10px","width:360px","height:530px","border-bottom-left-radius:6px","border-bottom-right-radius:6px"].join(";")+";",close:["width:300px","height:50px","bottom:0"].join(";")+";"}},E=n?y.mobile.open:y.pc.open,k=n?y.mobile.close:y.pc.close,T=function(t){var e=t.fkfuin||t.kfuin,i=v.getElementById(c+e);return{imIframe:i}};exports.openChatIframe=function(e){e=e||{};var i=e.isClickWpa,s=e.clickId,c=e.invitationType,f=e.seq,v=e.key,w=e.type,y=e.receptionUin,k=e.isDirectOpen,A=e.isB2C,C=k?e:this.params,I=T(k?e:this.params),P=I.imIframe,S=C.fkfuin||C.kfuin,q=C.id,L=C.guid,N=C.roleQQ||{},O=N.value||"",B=N.data||"",M=C.key;if(m.removeAllRedCircles(S),b.clearInvitePanel({kfuin:S}),!P||1==P.getAttribute("data-isOpen"))return u("[im.js]no im iframe found");if(x.__WPA.IM_CHAT_IFRAME_OPENING=1,n&&(t=x.document.body.style.cssText,x[l]=h.getNewScrollTop(),x.document.body.style.cssText+="position:fixed;left:0;top:0;width:100%;",g.addEvent(top,"touchmove",_)),P.style.cssText+=E,P.setAttribute("data-isOpen","1"),k)return void P.contentWindow.postMessage({kfuin:S,seq:f,receptionUin:y,key:v,invitationType:w,act:r.OPEN},"*");var W=x.__WPA[d][S],F=W?W.key:null,R={kfuin:S,wpaId:q,visitorid:L,wpaKey:M,roleValue:O,roleData:B,act:r.OPEN};s&&(R.clickId=s),c&&(R=o(R,{invitationType:c,key:F}),R.reception=W.conf.autoInvited.reception),x.__WPA[p][S]&&i&&(R=o(R,x.__WPA[p][S]),R.invitationType=a.OFFLINE),x.__WPA[p][S]=void 0,A&&(R.seq=f,R.receptionUin=y,R.invitationType=w,R.key=v),P.contentWindow.postMessage(R,"*")},exports.closeChatIframe=function(e){var i=e.kfuin,a=T({kfuin:i}),o=a.imIframe;return o&&0!=o.getAttribute("data-isOpen")?(x.__WPA.IM_CHAT_IFRAME_OPENING=0,n?(clearTimeout(x.__qd_keyboard_interval),x.document.body.style.cssText=t,x.scrollTo(0,x[l]||0),k="right:-"+2*h.getClientWidth()+"px;",o.style.cssText+=k,g.removeEvent(top,"touchmove",_)):o.style.cssText+=o._styles.close,void o.setAttribute("data-isOpen","0")):u("[im.js]no im iframe found or already closed")},exports.im=function(t){return n||e.isLocal?void(i||this.params.isImForbidden||this.openChatIframe(t)):alert("网页接待目前仅支持移动端使用")}}),LBF.define("wpa.im.init",function(require,exports,module){function t(t,e){for(var i=k[t]||[],n=e.contentWindow;i.length;){var a=i.shift();n.postMessage(a,"*")}}var e=(require("lang.browser"),require("wpa.conf.config")),i=(e.WPAS_BASED_ON_KFUIN,require("wpa.util.offset")),n=require("wpa.util.onIframeLoaded"),a=e.isMobile,o=e.GLOBAL_WPA,r=(require("wpa.util.log"),require("lang.JSON"),require("wpa.util.launch")),l=require("wpa.util.domEvent"),s=e.gWin,c=s.document,p=c.body,d=(e.WEB_IM.POSITION_HELP_EL,i.getClientWidth()),u=i.getClientHeight(),h=e.WEB_IM.URL,f=e.WEB_IM.WEB_IM_IFRAME_ID,g=e.WEB_IM.WEB_IM_IFRAMES_OBJ_NAME,m=e.WEB_IM.WEB_IM_IFRAMES_LOADED,b=e.WEB_IM.ACTS,x=(e.WEB_IM.LAUNCH_TYPES,["position:fixed;","z-index:2000000010;"].join("")),v=0,w={x:10,y:10},_={PC:{right:10,width:100}},y=["width:100%","height:100%","border:none!important","transition: all .4s;","right:-"+(d+w.x)+"px","top:0","bottom:0"].join(";")+";",E=["width: 300px","height: 50px","border:1px solid #dadee7","bottom:0","right:{right}","box-shadow:0 1px 15px rgba(0, 0, 0, 0.15)","border-top-left-radius: 6px","border-top-right-radius: 6px","border-bottom-left-radius: 0","border-bottom-right-radius: 0"].join(";")+";",k={};a&&(x+=y),s[g]=s[g]?s[g]:{},s[m]=s[m]?s[m]:{};var T=exports.isImIframeLoaded=function(t){return s[g][t]?!0:!1},A=exports.initIframe=function(e){e=e||{};var o=e.fkfuin,r=e.id,c=f+o,w=e.guid,y=h+"?kfuin="+o,A={kfuin:o,wpaId:r,act:b.INIT,isMobile:a,visitorid:w};if(k[o]=k[o]?k[o]:[],k[o].push(A),!T(o)){if(!a){var C=(_.PC.width+_.PC.right)*v++ +_.PC.right+"px";x+=E.replace("{right}",C)}var I,P='<iframe scrolling="no" id="'+c+'" frameborder="0" width="100%" height="100%" allowtransparency="true" src="'+y+'" style="'+x+'"></iframe>';try{I=document.createElement(P)}catch(S){I=document.createElement("iframe"),I.width=d,I.height=u,I.id=c,I.style.cssText=x,I.setAttribute("scrolling","no"),I.setAttribute("frameborder",0),I.setAttribute("allowtransparency",!0),I.setAttribute("src",y)}if(I._styles={close:x},p.appendChild(I),a){var q;l.addEvent(s,"resize",function(){clearTimeout(q),q=setTimeout(function(){var t=i.getClientWidth(),e=(i.getClientHeight(),I.getAttribute("data-isOpen"));0==e&&(I.style.cssText+="right:-"+2*t+"px;")},300)})}s[g][o]=!0,n(I,function(){s[m][o]=!0,t(o,I),I.setAttribute("data-isOpen","0")},!0)}s[m][o]&&t(o,I)},C=function(){l.addEvent(s,"message",function(t){if(t&&t.data){var e=t.data,i=e.kfuin||0,n=(e.wpaId||0,e.act),l=e.kfuin+"_"+e.wpaId,c=(e.type||"",e.protocol||"");if(n===b.UNREAD){if(a){if(0==e.data.number)return s[o][l].removeUnreadMsgCircle(i);s[o][l].updateUnreadMsgCircle(e.data.number)}}else n===b.CLOSE?s.__WPA.IM.closeChatIframe({kfuin:i}):n===b.LAUNCH?a?s.location.href=c:r(c):n===b.FOCUS?a&&(s.__qd_keyboard_interval=setTimeout(function(){var t=window.innerHeight+80;window.scrollY<t&&window.scrollTo(0,t),clearTimeout(s.__qd_keyboard_interval),s.__qd_keyboard_interval=setTimeout(arguments.callee,300)},300)):n===b.BLUR&&a&&clearTimeout(s.__qd_keyboard_interval)}})};exports.imInit=function(t,i){!e.isLocal&&!a||t.isImForbidden||(C(),A(t),"function"==typeof i&&i())}}),LBF.define("wpa.invite.main",function(require,exports,module){var t=require("wpa.invite.getInviteConf"),e=require("wpa.conf.config"),i=e.SOCKET.ACTS,n=e.WEB_IM,a=e.WPAS_BASED_ON_KFUIN,o=e.INVITATION_TYPE,r=(n.WEB_IM_IFRAME_ID,n.WEB_IM_IFRAMES_OBJ_NAME),l=e.INVITE_IFRAME_ID_PREFIX,s=e.WEB_IM.WPAS_IM_TYPE,c=e.KFUIN_INVITED_TIMES,p=require("wpa.util.Style"),d=(require("wpa.util.offset"),require("lang.browser")),u=d.isAndroid||d.isIOS,h=require("lang.extend"),f=require("wpa.invite.tpl"),g=require("wpa.util.ids"),m=require("wpa.util.domEvent"),b=require("wpa.util.onIframeLoaded"),x=require("wpa.util.log"),v=e.gWin,w=v.document,_=w.body,y={},E={},k=e.GLOBAL_INVITE_TPL_AND_CONF;v.__WPA[k]="undefined"!=typeof v.__WPA[k]?v.__WPA[k]:{},v.__WPA[c]="undefined"!=typeof v.__WPA[c]?v.__WPA[c]:{};var T=exports.clearInvitePanel=function(t){var e=t.kfuin,i=t.iframe||w.getElementById(l+e),n=t.$close,a=t.$btn1||{},o=t.$btn2||{};n=a=o=null,y[e]=!1,i&&i.parentNode.removeChild(i)},A={qq:function(){alert("qq")},phone:function(){alert("phone")},im:function(t,e){var i=t.kfuin,n=t.isB2C,a=t.seq,l=t.key,s=t.type,c=t.receptionUin,p=g.createClickId(),d=n?null:o.AUTO,h={clickId:p,invitationType:d};n&&(h.isB2C=!0,h.seq=a,h.type=s,h.key=l,h.receptionUin=c),v[r][i]?(x(i+" exists"),u?e.openChatIframe(h):alert("pc im")):(u?alert("mobile im invite without im iframe"):alert("pc im invite without im iframe"),x(i+" doesn't exist")),T(t)}},C=function(t,e,n){if(t){var o=e.kfuin,r=e.isB2C,l=(e.seq,e.type,e.receptionUin,t.getAttribute("data-event"));return(n=n||v.__WPA[s][o][0]||v.__WPA[a][o][0])?void m.addEvent(t,"click",function(){x("isB2C:"+r),"close"==l?(T(e),v.__WPA.trigger("startInviteTimeout",o),v.postMessage({act:i.SM_REFUSE,kfuin:o},"*")):l==f.btnTypes.qq?A.qq():l==f.btnTypes.phone?A.phone():l==f.btnTypes.im&&A.im(e,n)}):x("no im wpa")}},I=function(t,i,n){var a=t.contentWindow,o=t.contentDocument||a.document,r=i.kfuin,l=n.ctx,s=n.isB2C,c=n.type,p=n.receptionUin,d=n.key,f=n.seq;if(y[r]=!0,u&&!e.isLocal||e.isLocal){var g=o.getElementById("invite_close"),m=o.getElementById("btn1"),b=o.getElementById("btn2");"undefined"==b.getAttribute("data-event")&&(b.parentNode.removeChild(b),b=null),C(g,{kfuin:r,iframe:t,$close:g,$btn1:m,$btn2:b,isB2C:s,seq:f},l),C(m,h(i,{kfuin:r,iframe:t,$close:g,$btn1:m,$btn2:b,isB2C:s,seq:f,type:c,key:d,receptionUin:p}),l),C(b,h(i,{kfuin:r,iframe:t,$close:g,$btn1:m,$btn2:b,isB2C:s,seq:f,type:c,key:d,receptionUin:p}),l)}},P=function(t,e){var i=t.inviteTpl,n=t.inviteConf,a=n.kfuin,o=n.autoInvited||{},r=o.active,l=o.repeat||{},s=l.active||!1,p=l.finterval,d=Number(l.frequency),h=o.reception||{},f=(h.type,h.cuin,o.condition||{}),g=f.stayPeriod,m=f.deviceType;"undefined"==typeof v.__WPA[c][a]&&(v.__WPA[c][a]=d),r&&((3==m||u&&1==m||!u&&2==m)&&(0==g?S({inviteTpl:i,inviteConf:n},e):setTimeout(function(){S({inviteTpl:i,inviteConf:n},e)},1e3*g)),s&&v.__WPA.on("startInviteTimeout",function(t){return v.__WPA[c][t]<0?x("auto invite reached max times"):void(v.__WPA.KFUINS[t].setTimeoutInvite=setTimeout(function(){S({inviteTpl:i,inviteConf:n},e)},1e3*p))}))},S=exports.showInvitation=function(t,e){var i=t.inviteTpl,n=t.inviteConf,a=t.isB2C,o=t.seq,r=t.type,s=t.key,h=t.receptionUin,g=n.kfuin,m=l+g,y=i.css,E=f.getIframeStyle(i,n),k=E.style,T=E.width,A=E.height,C=n.btns||[];C.length;if(!v.__WPA.IM_CHAT_IFRAME_OPENING){if(w.getElementById(m))return x("invite iframe "+g+" already exists");v.__WPA[c][g]--;var P='<iframe scrolling="no" id="'+m+'" frameborder="0" width="'+T+'" height="'+A+'" allowtransparency="true" src="about:blank" style="{style}" ></iframe>';P=P.replace("{style}",k);var S;try{S=w.createElement(P)}catch(q){S=w.createElement("iframe"),S.width=T,S.height=A,S.id=m,S.style.cssText=k,S.setAttribute("scrolling","no"),S.setAttribute("frameborder",0),S.setAttribute("allowtransparency",!0),S.setAttribute("src","about:blank"),u||(S.width=T)}_.appendChild(S);var L=function(){var t=S.contentWindow,l=S.contentDocument||t.document;l.open(),l.write(["<!doctype html>",'<html xmlns="http://www.w3.org/1999/xhtml">',"<head>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',d.msie&&"about:blank"!==S.src?"<script>document.domain='"+document.domain+"';</script>":"","</head>","<body>",i.tpl,"</body>","</html>"].join("")),l.close();var c={name:"style",cssText:y,doc:l};p.commonAdd(c),I(S,n,{ctx:e,isB2C:a,seq:o,type:r,key:s,receptionUin:h})};b(S,L)}},q={type:"1",title:"客服在线，欢迎咨询",content:"您好，当前有客服在线，点击即可咨询",btns:[{type:"im",text:"网页咨询"}],theme:"1"};exports.init=function(t){var e=this,i=t.key,n=this.params.fkfuin,a=t,o=a.invitedStyle||q,r=f.getTpl(o);E[n]||(E[n]=!0,a.kfuin=n,v.__WPA[k][n]={tpl:r,conf:a,key:i},P({inviteTpl:r,inviteConf:a},e))},exports.getInviteConf=t,exports.tpl=f}),LBF.define("wpa.proto.socket",function(require,exports,module){var t,e=require("wpa.conf.config"),i=e.isMobile?1:0,n=(e.WPAS_BASED_ON_KFUIN,e.gWin),a=n.document,o=a.body,r=require("wpa.util.log"),l=e.SOCKET,s=l.ACTS,c=l.URL,p=l.SOCKET_IFRAME_ID,d=e.INVITE_IFRAME_ID_PREFIX,u=e.UNREAD_MSG_INFO,h=(e.WEB_IM.WPAS_IM_TYPE,require("wpa.invite.main")),f=require("wpa.util.domEvent"),g=require("wpa.im.init"),m=require("wpa.proto.UnreadMsgCircle"),b=require("wpa.util.onIframeLoaded"),x=["width:0","height:0","position:fixed","right:0","bottom:0"].join(";")+";",v=!1,w=[],_=a.referrer,y=n.location.href,E=a.title;n.__WPA[u]={};var k=function(e){f.addEvent(n,"message",function(o){var l=o.data||{},c=l.act,p=l.kfuin,f=l.data||{};if(c==s.SM_READY)T(e);else if(c==s.SM_UNREAD){var b=Number(f.number),x=f.offlineMsgKey,v=f.key,w=f.receptionUin;n.__WPA[u][p]={offlineMsgKey:x,key:v,receptionUin:w},m.showAllRedCircles(p,b)}else if(c==s.SM_MANUAL_INVITE){r("SM_MANUAL_INVITE");var _=f.type,y=f.seq,v=f.key,w=f.receptionUin;if(1==_)if(n.__WPA.GLOBAL_INVITE_TPL_AND_CONF[p]){var E=n.__WPA.GLOBAL_INVITE_TPL_AND_CONF[p],k=E.tpl,A=E.conf;if(a.getElementById(d+p))return r("invite panel already exists");g.isImIframeLoaded(p)?h.showInvitation({inviteTpl:k,inviteConf:A,isB2C:!0,seq:y,type:_,key:v,receptionUin:w},null):g.initIframe({kfuin:p})}else r("invite rule with kfuin "+p+" does not exist");else 2==_&&i&&n.__WPA.IM.openChatIframe({kfuin:p,seq:y,receptionUin:w,key:v,type:_,isDirectOpen:!0})}else if(c==s.SM_INVITE_CONF){r("SM_INVITE_CONF");var E=l.inviteRule;if(E.kfuin=p,r(E),"undefined"==typeof n.__WPA.GLOBAL_INVITE_TPL_AND_CONF[p]){if(!n.__WPA.WPAS_IM_TYPE[p])return r("[socket.js][on SM_INVITE_CONF]no im wpa with kfuin "+p);var C=n.__WPA.WPAS_IM_TYPE[p][0];C.Invite.init.call(C,E)}}else c==s.SM_REFUSE?t.postMessage({act:s.SM_REFUSE,kfuin:p},"*"):c==s.SMS_SM_FORCE_CONNECT&&t.postMessage({act:s.SMS_SM_FORCE_CONNECT},"*")})},T=function(e){for(var i=0,n=w.length;n>i;i++){var a=w.shift();t.postMessage(a,"*")}};exports.establishSocket=function(){var e=this,r=e.params,l=r.fkfuin,d=r.guid,u=p,h={kfuin:l,visitorId:d,isMobile:i,act:s.SM_INIT,referUrl:_,ldpUrl:y,ldpTitle:E};if(w.push(h),!t&&!v){v=!0;var f,g='<iframe scrolling="no" id="'+u+'" frameborder="0" width="0" height="0" allowtransparency="true" src="'+c+'" style="'+x+'"></iframe>';try{f=a.createElement(g)}catch(m){f=a.createElement("iframe"),f.width=0,f.height=0,f.id=u,f.style.cssText=x,f.setAttribute("scrolling","no"),f.setAttribute("frameborder",0),f.setAttribute("allowtransparency",!0),f.setAttribute("src",c)}o.appendChild(f),b(f,function(){var e=f.contentWindow;t=n.__WPA[p]=e,k(e)})}}}),LBF.define("wpa.proto.getGdtClickId",function(require,exports,module){var t=require("util.jsonp"),e=require("lang.extend"),i=require("wpa.conf.config"),n=i.gWin,a=require("wpa.proto.getCPType"),o="jsonp_cb_",r=0,l="//t.gdt.qq.com/conv/web/cookies/jsonp",s=o+r++,c=function(i){"undefined"==typeof n._gdtClickId&&t(l,{cb:s,callback:s},function(t){t&&0==t.ret?n._gdtReportData=e({client_id:54,click_id:t.click_id,visitorid:i.guid,kfuin:i.fkfuin,ldpg:n.location.href},a(i)):n._gdtReportData=0})};module.exports=exports=c}),LBF.define("wpa.proto.UnreadMsgCircle",function(require,exports,module){var t=require("lang.browser"),e=require("wpa.util.getOffset"),i=require("wpa.conf.config"),n=(i.isMobile,i.gWin),a=i.TYPES.IM,o=(i.WEB_IM.WPAS_IM_TYPE,require("wpa.util.Style"),require("wpa.util.log"),require("wpa.conf.wpaType")),r=require("wpa.util.domEvent"),l=require("lang.proxy"),s=require("wpa.util.onIframeLoaded"),c="qidian_wpa_unread_msg_circle",p=20,d=20,u="qidian_wpa_",h="absolute",f="qidian_wpa_id_unread_msg_circle_",g="__SHOWNING_RED_CIRCLE_WPAS",m=["* {margin:0;padding:0;}",'body {font-family:"PingFang SC", "Droid Sans Fallback";background:#ff4222;color:#fff;font-size:12px;text-align:center;height:20px;line-height:20px;}',"span {cursor: pointer;}"].join("");n[g]=n[g]?n[g]:{};var n=window,b=n.document,x=(b.body,function(t){return t>9?"9+":t}),v=function(t){return t==a};exports.showAllRedCircles=function(t,e){var i=n.__WPA.WPAS_IM_TYPE;if(i[t])for(var a=0,o=i[t].length;o>a;a++){var r=i[t][a];r.updateUnreadMsgCircle(e)}},exports.removeAllRedCircles=function(t){var e=n.__WPA.WPAS_IM_TYPE;if(e[t])for(var i=0,a=e[t].length;a>i;i++){var o=e[t][i];o.removeUnreadMsgCircle(t)}};var w=function(i,n){i=i||{};var a=i.id,g=i.kfuin,v=f+g,w="transition:all .7s;opacity:0;border-radius: 50%;z-index:2000000001;position:{position};",_=b.getElementById(u+a),y=e(_),E="undefined"!=typeof i.number?i.number:0,k=E,T=o[i.cate][i.type],A=_.style.cssText,C=-1!==A.indexOf("fixed")?!0:!1,I=C?T.fixedCircleOffset:T.circleOffset,P={},S=0,q=0,L=i.style||"";if(/\d+/.test(E)&&(k=x(E),_)){y.x=y.x+Number(_.clientWidth)-p/2,y.y=y.y-p/2;var N=I.x||{},O=I.y||{},B=N.key,M=N.value,W=O.key,F=O.value;if(C){h="fixed",w=w.replace("{position}",h);var R=A.match(/right[^;]*/),j=A.match(/bottom[^;]*/);P.right=R?Number(R[0].match(/\d+/)[0]):0,P.bottom=j?Number(j[0].match(/\d+/)[0]):0,S=P.right+M,q=P.bottom+F,L=L+L+w+B+":"+S+"px;"+W+":"+q+"px;"}else h="absolute",w=w.replace("{position}",h),S=y.x+M,q=y.y+F,L=L+w+"left:"+S+"px;top:"+q+"px;";var Q='<iframe scrolling="no" class="'+c+'" id="'+v+'" frameborder="0" width="'+p+'" height="'+d+'" allowtransparency="true" src="about:blank" style="{style}"></iframe>';Q=Q.replace("{style}",L);var z;try{z=b.createElement(Q)}catch(U){z=b.createElement("iframe"),z.width=p,z.height=d,z.id=v,z.style.cssText=L,z.setAttribute("scrolling","no"),z.setAttribute("frameborder",0),z.setAttribute("allowtransparency",!0),z.setAttribute("src","about:blank"),z.setAttribute("class",c)}if(_.parentNode.insertBefore(z,_),t.msie)try{z.contentWindow.document}catch(U){z.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close()})())"}var D=function(){var e=z.contentWindow,i=z.contentDocument||e.document;if(i.open(),i.write(["<!doctype html>",'<html xmlns="http://www.w3.org/1999/xhtml">',"<head>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',t.msie&&"about:blank"!==z.src?"<script>document.domain='"+document.domain+"';</script>":"","<style>"+m+"</style>","</head>","<body>",'<span id="number" data-number="'+E+'">'+k+"</span>","</body>","</html>"].join("")),i.close(),t.isIOS||t.isAndroid)try{i.body.addEventListener("touchmove",function(t){t.preventDefault()},!1)}catch(a){}var o=l(n.callIm,n);o&&r.addEvent(i.getElementsByTagName("body")[0],"click",o),setTimeout(function(){z.style.cssText=z.style.cssText+"opacity:1;"},1)};return s(z,D),z}};exports.getUnreadMsgCircle=function(t){var e=this;this.params.fkfuin;v(this.params.cate)&&(this.redCircle||(this.redCircle=w({id:this.params.id,cate:this.params.cate,type:this.params.type,kfuin:this.params.fkfuin,number:t},e)))},exports.removeUnreadMsgCircle=function(t){if(v(this.params.cate)){var e=this.redCircle;e&&(e.style.cssText+="opacity:0;",e.parentNode.removeChild(e),e=this.redCircle=null)}},exports.updateUnreadMsgCircle=function(t){var e=this,i=(this.params.fkfuin,this.redCircle);if(v(this.params.cate))if(i){var n=i.contentWindow,a=i.contentDocument||n.document,o=a.getElementById("number");o.innerHTML=x(t),o.setAttribute("data-number",t)}else this.redCircle=w({id:this.params.id,cate:this.params.cate,type:this.params.type,kfuin:this.params.fkfuin,number:t},e)}}),LBF.define("wpa.proto.addDa",function(require,exports,module){var t=require("util.localStorage"),e=require("util.Cookie"),i=require("wpa.util.log"),n=require("wpa.conf.config"),a=n.gWin,o="isDaAdded",r="isFetchingDa",l=11,s=[],c=document.head||document.getElementsByTagName("head")[0]||document.documentElement,p=c.getElementsByTagName("base")[0],d=function(t,e,i){var n=document.createElement("script");n.charset="utf-8",n.async=!0,n.src=t,n.id=e||"";var a=n;n.onreadystatechange=n.onload=function(){/loaded|complete|undefined/.test(n.readyState)&&"function"==typeof i&&(i(),n.onreadystatechange=n.onload=null)},p?c.insertBefore(n,p):c.appendChild(n),a=null},u="",h=!1,f=i,g=function(){try{var t=a,i="__qq_qidian_da",n=t[i]||"qidianDA";if(!n)return;var o=t[n],r=s.shift();if(!r)return;o("create",String(r),{cid:String(u),src:l,pgv_pvi:e.get("pgv_pvi")||""}),o("set","t1",new Date)}catch(c){f("[WPA][qidianDAReport]:error occured"),f(c)}},m=function(e){h||(u=t.getItem(n.tencentSig)||"",h=!0),s.push(e),a[r]?a[o]&&g():(a[r]=!0,d("//bqq.gtimg.com/da/i.js","_da",function(){a[o]=!0,g()}))};exports=module.exports=m}),LBF.define("wpa.protocol.chat",function(require,exports){var t,e,i,n=require("lang.browser"),a=(require("monitor.SpeedReport"),require("util.GUID"),require("util.domain")),o=(require("lang.extend"),require("util.jsonp")),r=require("wpa.util.onIframeLoaded"),l=require("lang.isFunction"),s=require("wpa.conf.config"),c=s.gWin,p=require("wpa.conf.chat"),d=require("globalSettings"),u=(require("wpa.protocol.kfuin"),require("wpa.util.getReportData"),require("util.serialize")),h=(d.protocol,p.CHAT_TYPE_AUTO,p.CHAT_TYPE_ANONYMOUS,p.CHAT_TYPE_QQ,p.PC_QQ_SCHEMA_CGI,p.LAUNCH_MOBILE_QQ),f=s.CGIS,g=0,m=1,b=s.ENV,x="抱歉，企业暂时无人接待",v=/\bQQ\/([\d\.]+)/,w=/\bIPadQQ\/([\d\.]+).*?\bQQ\/([\d\.]+)/,_=/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/,y=navigator.userAgent.toLowerCase(),E=document.getElementsByTagName("body")[0],k=(v.test(y)||w.test(y)||_.test(y),document);if(n.isMobile)if(y.indexOf("micromessenger")>-1){var T=/QQ\/(\d+\.\d+)\.\d/,A=/V1_AND_SQ_(\d+\.\d+)\.\d/,C=T.exec(y)||A.exec(y);(t=!!C)&&(QQVersion=C[1]),i=!0}else{var T=/QQ\/(\d+\.\d+)\.\d/,A=/V1_AND_SQ_(\d+\.\d+)\.\d/,C=T.exec(y)||A.exec(y);(t=!!C)&&(e=C[1])}else t=!1,i=!1;exports.PCChat=function(t,e){var i={kfuin:t.fkfuin,kfext:t.fkfext,visitorId:t.guid,fid:t.id,key:t.key,cate:t.cate,type:t.type,ftype:g,roleKey:t.roleKey,roleValue:t.roleValue,roleName:t.roleName,roleUin:t.roleUin,pid:t.pid,clickid:t.clickid,qid:t.qid,env:b,roleData:t.roleData},n=f.GET_SIGT[b];o(n,i,function(i){if(!i||0!==i.r||!i.data)return alert(i.data.message||x);var n=("/template/blue/wpa/launch-pc-qq.html?protocol="+i.data.sign,"");"development"==s.ENV?n="dev":"test"==s.ENV&&(n="oa");if(s.isSSL&&-1===c.navigator.userAgent.toLowerCase().indexOf("msie"))c.location.href=i.data.sign,setTimeout(function(){l(e)&&e(t)},1e3);else{var a=k.createElement("iframe");a.style.display="none",E.insertBefore(a,E.firstChild),a.src=i.data.sign;var o=function(){i.data.clkID};r(a,o)}})},exports.mobileChat=function(t,e){var i=(a.domain,t.fkfuin,t.fkfext,{kfuin:t.fkfuin,kfext:t.fkfext,visitorId:t.guid,fid:t.id,key:t.key,cate:t.cate,type:t.type,ftype:m,pid:t.pid,clickid:t.clickid,qid:t.qid,env:b,roleKey:t.roleKey,roleValue:t.roleValue,roleName:t.roleName,roleUin:t.roleUin,roleData:t.roleData}),n=f.GET_SIGT[b];t.isPub&&(n=f.GET_MP_SIGT[b]),o(n,i,function(t){if(!t||0!==t.r||!t.data)return alert(t.data.message||x);var e=t.data.sign,n=e;+new Date;setTimeout(function(){var t=u(i);c.location.href=h+"?"+t+"&protocol="+n},500)})},exports.anonyChat=function(t,e){var i=p.WPD_B_QQ_COM_WEBCHAT+"?nameAccount="+t.nameAccount,n=c.open(i,"_blank","height=516, width=598,toolbar=no,scrollbars=no,menubar=no,status=no,location=no");n.onload=function(){l(e)&&e(t)}},exports.linkChat=function(t,e){var i=p.LINK_CHAT+"?nameAccount="+t.nameAccount+"&id="+t.id,n=c.open(i,"_blank","height=516, width=598,toolbar=no,scrollbars=no,menubar=no,status=no,location=no");n.onload=function(){l(e)&&e(t)}}}),LBF.define("lang.Class",function(require,exports,module){function t(a){var o=i(arguments),r=function(){this.initialize.apply(this,arguments)},l=function(){};l.prototype=this.prototype;var s=new l;return s.constructor=r,s.superclass=this,o.unshift(s),n.apply(o,o),r.prototype=s,n(r,{inherit:t,include:e,extend:t,superclass:this}),r}function e(t){var e=i(arguments);return e.unshift(this),n.apply(this,e),this}var i=require("lang.toArray"),n=require("lang.extend");module.exports=t.call(Function,{initialize:function(){},mixin:e})}),LBF.define("lang.inArray",function(require,exports,module){module.exports=[].indexOf?function(t,e,i){return e?[].indexOf.call(e,t,i):-1}:function(t,e,i){if(e){var n=e.length;for(i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1}}),LBF.define("wpa.util.onIframeLoaded",function(){return function(t,e,i){if(i)if(/loaded|complete/.test(t.readyState))e();else if(t.attachEvent){var n=function(){t.detachEvent("onload",n),e()};t.attachEvent("onload",n)}else t.onload=function(){e(),t.onload=null};else if(/loaded|complete|undefined/.test(t.readyState))e();else if(t.attachEvent){var n=function(){t.detachEvent("onload",n),e()};t.attachEvent("onload",n)}else t.onload=function(){e(),t.onload=null}}}),LBF.define("wpa.util.tmplCompiler",function(require){var t=require("util.xssFilter"),e=(require("lang.inArray"),require("globalSettings")),i=(-1!==e.protocol.indexOf("https")?!0:!1,require("wpa.conf.defaultConst"),{1:"theme-1",2:"theme-2",3:"theme-3",4:"theme-4",5:"theme-5",6:"theme-6"});return{compile:function(e){var n=e.tpl,a=e.params,o=e.htmlRequired||[],r=a.theme,l={theme:i[r],btnText:t.htmlEncode(a.btnText),title:t.htmlEncode(a.title),signature:t.htmlEncode(a.signature),avatar:a.avatar,qrcode:a.qrcode||"",closable:a.closable||"closable",btnBgColor:a.btnBgColor.value};n=n.replace("{class}",a.className);for(var s=0,c=o.length;c>s;s++){var p=o[s],d=new RegExp("\\{"+p+"\\}","g");n=n.replace(d,l[p])}return n}}}),LBF.define("wpa.util.Style",function(require){var t=(require("wpa.conf.colors"),require("wpa.util.borderRadiusMixin"),require("lang.inArray"),require("wpa.util.urlBackground"),{ELL:["word-break: break-all;","word-wrap:break-word;","text-overflow: ellipsis;","white-space: nowrap;","overflow: hidden;"].join(""),WORD_BREAK:["word-break: break-all;","word-wrap:break-word;"].join(""),BOX_SHADOW:["box-shadow:0 1px 15px rgba(0, 0, 0, 0.15);"].join(""),RESET:"margin:0;padding:0;",TEXT_SIZE_ADJUST:["-webkit-text-size-adjust:none;","text-size-adjust:none;"].join(""),TEXT_FAMILY:['font-family:"PingFang SC", "Droid Sans Fallback", "microsoft yahei";'].join(""),DIB:["display: inline-block;","*zoom: 1;","*display: inline;"].join("")}),e=[t.TEXT_SIZE_ADJUST,t.TEXT_FAMILY,t.RESET].join("");return{load:function(t,e,i){i=i||{};var n=i.context||document,a=n.createElement("link");return a.name=t,a.type="text/css",a.setAttribute("rel","stylesheet"),a.setAttribute("href",e),function(){try{var t=n.getElementsByTagName("head")[0];t.insertBefore(a,t.firstChild)}catch(e){setTimeout(arguments.callee,1)}}(),a},add:function(i){var n=i.name,a=(i.self||{},i.dispType,i.cssText),o=(i.htmlRequired||{},i.borderRadius,i.doc),r=o||document,l=r.createElement("style");l.type="text/css",l.name=n;var s=r.getElementsByTagName("body")[0];return s.insertBefore(l,s.firstChild),a=a.replace(/\{ell\}/g,t.ELL).replace(/\{boxShadow\}/g,t.BOX_SHADOW).replace(/\{wordBreak\}/g,t.WORD_BREAK).replace(/\{dib\}/g,t.DIB).replace(/\{common\}/g,e),l.styleSheet?l.styleSheet.cssText=a:l.appendChild(r.createTextNode(a)),l},commonAdd:function(t){var e=t.name,i=(t.self||{},t.dispType,t.cssText),n=t.doc,a=n||document,o=a.createElement("style");o.type="text/css",o.name=e;var r=a.getElementsByTagName("body")[0];return r.insertBefore(o,r.firstChild),o.styleSheet?o.styleSheet.cssText=i:o.appendChild(a.createTextNode(i)),o}}}),LBF.define("wpa.conf.wpaType",function(require,exports,module){var t=require("wpa.conf.defaultConst"),e=(t.POSITION,{1:{1:{cate:1,type:1,scene:0,isPC:1,borderRadius:"2px",htmlRequired:["btnText","theme"],required:["btnText","theme","role"],role:["roleQQ"],theme:["#fff","#00f"]},2:{cate:1,type:2,scene:0,isPC:1,borderRadius:"2px",htmlRequired:["btnText","theme"],theme:["#fff","#00f"]},3:{cate:1,type:3,scene:1,isPC:1,borderRadius:"2px",htmlRequired:["title","signature","avatar"],theme:["#fff","#00f"]},4:{cate:1,type:4,isPC:1,floatStyle:{gap:{right:"10px"}},borderRadius:"2px",htmlRequired:["btnText","theme"]},5:{cate:1,type:5,isPC:1,floatStyle:{gap:{right:"10px"}},borderRadius:"2px",htmlRequired:["title","btnBgColor","avatar","btnText"]},6:{cate:1,type:6,isPC:1,floatStyle:{gap:{right:"10px",bottom:"20px"}},borderRadius:"2px",htmlRequired:["title","signature","btnBgColor","btnText","avatar"]},7:{cate:1,type:7,floatStyle:{gap:{right:"15px",bottom:"20px"}}},8:{cate:1,type:8,floatStyle:{gap:{right:"15px",bottom:"20px"}},htmlRequired:["btnText"]},9:{cate:1,type:9,htmlRequired:["closable","btnText","title","signature","theme","position","avatar"],tpl:3,tplOptions:{iconList:["icon-qq"],eventList:["callChat"],fixedBtnText:"在线咨询",hasBtnText:1,hasAvatar:1}},10:{cate:1,type:10,htmlRequired:["closable","btnText","title","signature","theme","position"],tpl:3,tplOptions:{iconList:["icon-qq"],eventList:["callChat"],fixedBtnText:"在线咨询",hasBtnText:1,hasAvatar:0}},11:{cate:1,type:11,htmlRequired:["closable","title","signature","theme","position"],tpl:3,tplOptions:{iconList:["icon-call","icon-qq"],eventList:["callPhone","callChat"],
hasBtnText:0,hasAvatar:0}},12:{cate:1,type:12,htmlRequired:["closable","title","signature","theme","position","avatar"],tpl:3,tplOptions:{iconList:["icon-call","icon-qq"],eventList:["callPhone","callChat"],hasBtnText:0,hasAvatar:1}},13:{cate:1,type:13,htmlRequired:["title","signature","avatar","btnText"],isInQQ:1,tpl:4,tplOptions:{iconList:["icon-qq"],eventList:["callChat"],fixedBtnText:"在线咨询",hasBtnText:1,hasAvatar:1}},14:{cate:1,type:14,htmlRequired:["title","signature","avatar"],isInQQ:1,tpl:4,tplOptions:{iconList:["icon-call","icon-qq"],eventList:["callPhone","callChat"],hasBtnText:0,hasAvatar:1}},15:{cate:1,type:15,htmlRequired:["title","signature","avatar","qrcode","theme"],isInQQ:1,iframeBorder:{width:"1px",color:"#ebebeb"}}},2:{1:{cate:2,type:1,scene:0,htmlRequired:[],floatStyle:{gap:{right:"15px",bottom:"20px"}},required:["role"],role:["roleTEL"]},2:{cate:2,type:2,floatStyle:{gap:{right:"15px",bottom:"20px"}},htmlRequired:["btnText"]},3:{cate:2,type:3,htmlRequired:["closable","title","signature","theme","btnText","avatar","position"],tpl:3,tplOptions:{iconList:["icon-call"],eventList:["callPhone"],fixedBtnText:"免费电话",hasBtnText:1,hasAvatar:1}},4:{cate:2,type:4,htmlRequired:["closable","title","signature","theme","btnText","position"],tpl:3,tplOptions:{iconList:["icon-call"],eventList:["callPhone"],fixedBtnText:"免费电话",hasBtnText:1,hasAvatar:0}},5:{cate:2,type:5,htmlRequired:["closable","title","signature","theme","position"],tpl:3,tplOptions:{iconList:["icon-call","icon-qq"],eventList:["callPhone","callChat"],hasBtnText:0,hasAvatar:0}},6:{cate:2,type:6,htmlRequired:["closable","title","signature","theme","avatar","position"],tpl:3,tplOptions:{iconList:["icon-call","icon-qq"],eventList:["callPhone","callChat"],hasBtnText:0,hasAvatar:1}},7:{cate:2,type:7,htmlRequired:["title","signature","avatar"],tpl:4,isInQQ:1,tplOptions:{iconList:["icon-call"],eventList:["callPhone"],fixedBtnText:"免费电话",hasBtnText:1,hasAvatar:1}},8:{cate:2,type:8,htmlRequired:["title","signature","avatar"],tpl:4,isInQQ:1,tplOptions:{iconList:["icon-call","icon-qq"],eventList:["callPhone","callChat"],hasBtnText:0,hasAvatar:1}}},3:{1:{cate:3,type:1,scene:0,isPC:1,htmlRequired:["title","signature","btnBgColor","btnText","avatar"],required:["title","signature","btnBgColor","btnText","avatar","role"],role:["rolePUB"],hasBoxShadow:1,btnBgColor:["#006600","#D58512","#0067ED"]},2:{cate:3,type:2,htmlRequired:["btnText","title","signature","btnBgColor","theme","closable","avatar","position"],tpl:6,tplOptions:{eventList:["callAddFan"],fixedBtnText:"关注",btnWithoutIconAdd:!0,hasAvatar:1}},3:{cate:3,type:3,htmlRequired:["btnText","title","signature","btnBgColor","theme","closable","position"],tpl:6,tplOptions:{eventList:["callAddFan"],fixedBtnText:"关注",btnWithoutIconAdd:!0,hasAvatar:0}}},4:{1:{cate:4,type:1,scene:0,isPC:1,htmlRequired:["title","signature","btnBgColor","btnText","avatar"],required:["title","signature","btnBgColor","btnText","avatar"],hasBoxShadow:1,btnBgColor:["#006600","#D58512","#0067ED"]},2:{cate:4,type:2,htmlRequired:["btnText","title","signature","btnBgColor","theme","closable","position"],tpl:6,tplOptions:{eventList:["callAddGroup"],fixedBtnText:"群组",hasAvatar:0}},3:{cate:4,type:3,htmlRequired:["btnText","title","signature","btnBgColor","theme","closable","position","avatar"],tpl:6,tplOptions:{eventList:["callAddGroup"],fixedBtnText:"群组",hasAvatar:1}},4:{cate:4,type:4,htmlRequired:["title","signature","avatar"],isInQQ:1,tpl:5,tplOptions:{eventList:["callAddGroup"],fixedBtnText:"群组",hasAvatar:1}}},5:{1:{cate:5,type:1,scene:0,isPC:1,hasBoxShadow:1,htmlRequired:["title","signature","btnBgColor","btnText","avatar"],required:["title","signature","btnBgColor","btnText","avatar","role"],role:["roleKFEXT"],btnBgColor:["#006600","#D58512","#0067ED"]},2:{cate:5,type:2,htmlRequired:["btnText","title","signature","btnBgColor","theme","closable","position"],tpl:6,tplOptions:{eventList:["callAddPal"],fixedBtnText:"好友",hasAvatar:0}},3:{cate:5,type:3,htmlRequired:["btnText","title","signature","btnBgColor","theme","closable","position","avatar"],tpl:6,tplOptions:{eventList:["callAddPal"],fixedBtnText:"好友",hasAvatar:1}},4:{cate:5,type:4,htmlRequired:["title","signature","avatar"],isInQQ:1,tpl:5,tplOptions:{eventList:["callAddPal"],fixedBtnText:"好友",hasAvatar:1}}},7:{1:{cate:7,type:1,htmlRequired:["theme"],floatStyle:{gap:{right:"15px",bottom:"20px"}},fixedCircleOffset:{x:{key:"right",value:-5},y:{key:"bottom",value:30}}},2:{cate:7,type:2,floatStyle:{gap:{right:"15px",bottom:"20px"}},fixedCircleOffset:{x:{key:"right",value:-5},y:{key:"bottom",value:26}},htmlRequired:["btnText","theme"]},3:{cate:7,type:3,htmlRequired:["closable","btnText","title","signature","theme","position","avatar"],tpl:3,tplOptions:{iconList:["icon-im"],eventList:["callIm"],hasBtnText:1,hasAvatar:1},circleOffset:{x:{key:"right",value:-27},y:{key:"bottom",value:15}},fixedCircleOffset:{x:{key:"right",value:17},y:{key:"bottom",value:40}}},4:{cate:7,type:4,htmlRequired:["closable","btnText","title","signature","theme","position"],tpl:3,tplOptions:{iconList:["icon-im"],eventList:["callIm"],hasBtnText:1,hasAvatar:0},circleOffset:{x:{key:"right",value:-27},y:{key:"bottom",value:15}},fixedCircleOffset:{x:{key:"right",value:17},y:{key:"bottom",value:40}}},5:{cate:7,type:5,htmlRequired:["closable","title","signature","theme","position","avatar"],tpl:3,tplOptions:{iconList:["icon-call","icon-im"],eventList:["callPhone","callIm"],hasBtnText:0,hasAvatar:1},circleOffset:{x:{key:"right",value:-80},y:{key:"bottom",value:22}},fixedCircleOffset:{x:{key:"right",value:71},y:{key:"bottom",value:32}}},6:{cate:7,type:6,htmlRequired:["closable","title","signature","theme","position"],tpl:3,tplOptions:{iconList:["icon-call","icon-im"],eventList:["callPhone","callIm"],hasBtnText:0,hasAvatar:0},circleOffset:{x:{key:"right",value:-80},y:{key:"bottom",value:22}},fixedCircleOffset:{x:{key:"right",value:71},y:{key:"bottom",value:32}}},7:{cate:7,type:7,htmlRequired:["title","signature","avatar","btnText"],isInQQ:1,tpl:4,tplOptions:{iconList:["icon-im"],eventList:["callIm"],hasBtnText:1,hasAvatar:1},circleOffset:{x:{key:"right",value:-15},y:{key:"bottom",value:15}},fixedCircleOffset:{x:{key:"right",value:5},y:{key:"bottom",value:46}}},8:{cate:7,type:8,htmlRequired:["title","signature","avatar"],isInQQ:1,tpl:4,tplOptions:{iconList:["icon-call","icon-im"],eventList:["callPhone","callIm"],hasBtnText:0,hasAvatar:1},circleOffset:{x:{key:"right",value:-72},y:{key:"bottom",value:22}},fixedCircleOffset:{x:{key:"right",value:62},y:{key:"bottom",value:40}}},9:{cate:7,type:9,htmlRequired:["title","signature","avatar","qrcode","theme"],isInQQ:1,iframeBorder:{width:"1px",color:"#ebebeb"}},12:{cate:7,type:10,isPC:1,floatStyle:{gap:{left:"10px",bottom:"10px"}},htmlRequired:["signature","avatar","theme"]},13:{cate:7,type:13,isPC:1,floatStyle:{gap:{right:"10px"}},borderRadius:"4px",htmlRequired:["avatar","signature","theme"]},14:{cate:7,type:14,isPC:1,floatStyle:{gap:{right:"0"}},htmlRequired:["theme"]}}});module.exports=e}),LBF.define("wpa.util.insertIframe",function(require,exports,module){var t=require("lang.browser"),e=function(e){var i=document.getElementsByTagName("script"),n=i[i.length-1],a=e.ele,o=e.lastScript?e.lastScript:n,r=e.container;if(!r)return void o.parentNode.insertBefore(a,o);if("string"==typeof r){var l=document.getElementById(r);if(!l)throw new Error("无法找到container，该container id对应元素不存在或者不在DOM中");var s="BackCompat"===document.compatMode;return void(t.msie&&parseInt(t.version,10)<7||s?document.body.appendChild(a):l.appendChild(a))}if("undefined"!=typeof r.nodeType)return void r.appendChild(a);throw new Error("无效的container，请检查container参数，以及container id对应的元素是否合法")};module.exports=e}),LBF.define("wpa.conf.floatCss",function(require,exports){var t=(require("lang.browser"),require("wpa.conf.defaultConst")),e=t.POSITION,i=(require("wpa.util.offset"),1),n="z-index: 2000000000;";exports.getFloatStyle=function(t){var a=t.position,o=t.defaultPosition,r="number"==typeof t.width?!0:!1,l=(r?t.width:0,"number"==typeof t.height?t.height:0),s="position:fixed;",c="0px",p=t.floatStyle||{},d=p.gap||{},u=(d.top||c,d.bottom||c),h=d.right||c,f=d.left||c,g=l/2,m="";if(o){switch(o){case e[6]:m=s+"right:"+h+";top:50%;margin-top:-"+g+"px;";break;case e[9]:m=s+"right:"+h+";bottom:"+u;break;case e[8]:m=s+"bottom:"+c+";left:0;";break;case e[7]:m=s+"bottom:"+u+";left:"+f+";"}m+=";"+n}else"undefined"!=typeof a&&(a==i&&(m=s+"bottom:"+c,!r&"100%"==t.width&&(m+=";left: 0")),m+=";"+n);return m}}),LBF.define("wpa.conf.Events",function(require,exports,module){var t={defaultEventType:"click"};return t}),LBF.define("lang.proxy",function(require,exports,module){module.exports=function(t,e){return function(){return t.apply(e,arguments)}}}),LBF.define("wpa.conf.wpaTmpl",function(require,exports,module){var t,e,i=require("wpa.conf.config"),n=i.imageBaseUrl,a=i.TYPES,o=require("lang.extend"),r=require("lang.browser"),l=require("wpa.conf.defaultConst"),s=l.defaultEventTagName,c=require("wpa.conf.wpaType"),p=require("wpa.util.replaceImg3X"),d=require("wpa.conf.tpl"),u=r.isAndroid,h=(r.isIOS,{2:"#12b7f5",3:"#0067ed",4:"#ff9232",5:"#ee685d",6:"#25cd98"}),f=l.POSITION,g=require("wpa.util.getSize");module.exports=exports={init:function(i){i=i||{};var r=i.ratio||1,l={ratio:r},m=g(i.ratio);t={1:d(1,o({hasAvatar:1},l)),2:d(2,l),3:d(1,l),"1_9":d(c[a.QQ][9].tpl,o(c[a.QQ][9].tplOptions,l)),"1_10":d(c[a.QQ][10].tpl,o(c[a.QQ][10].tplOptions,l)),"1_11":d(c[a.QQ][11].tpl,o(c[a.QQ][11].tplOptions,l)),"1_12":d(c[a.QQ][12].tpl,o(c[a.QQ][12].tplOptions,l)),"1_13":d(c[a.QQ][13].tpl,o(c[a.QQ][13].tplOptions,l)),"1_14":d(c[a.QQ][14].tpl,o(c[a.QQ][14].tplOptions,l)),"2_3":d(c[a.PHONE][3].tpl,o(c[a.PHONE][3].tplOptions,l)),"2_4":d(c[a.PHONE][4].tpl,o(c[a.PHONE][4].tplOptions,l)),"2_5":d(c[a.PHONE][5].tpl,o(c[a.PHONE][5].tplOptions,l)),"2_6":d(c[a.PHONE][6].tpl,o(c[a.PHONE][6].tplOptions,l)),"2_7":d(c[a.PHONE][7].tpl,o(c[a.PHONE][7].tplOptions,l)),"2_8":d(c[a.PHONE][8].tpl,o(c[a.PHONE][8].tplOptions,l)),"3_2":d(c[a.PUB][2].tpl,o(c[a.PUB][2].tplOptions,l)),"3_3":d(c[a.PUB][3].tpl,o(c[a.PUB][3].tplOptions,l)),"4_2":d(c[a.GROUP][2].tpl,o(c[a.GROUP][2].tplOptions,l)),"4_3":d(c[a.GROUP][3].tpl,o(c[a.GROUP][3].tplOptions,l)),"4_4":d(c[a.GROUP][4].tpl,o(c[a.GROUP][4].tplOptions,l)),"5_2":d(c[a.KFEXT][2].tpl,o(c[a.KFEXT][2].tplOptions,l)),"5_3":d(c[a.KFEXT][3].tpl,o(c[a.KFEXT][3].tplOptions,l)),"5_4":d(c[a.KFEXT][4].tpl,o(c[a.KFEXT][4].tplOptions,l)),"7_3":d(c[a.IM][3].tpl,o(c[a.IM][3].tplOptions,l)),"7_4":d(c[a.IM][4].tpl,o(c[a.IM][4].tplOptions,l)),"7_5":d(c[a.IM][5].tpl,o(c[a.IM][5].tplOptions,l)),"7_6":d(c[a.IM][6].tpl,o(c[a.IM][6].tplOptions,l)),"7_7":d(c[a.IM][7].tpl,o(c[a.IM][7].tplOptions,l)),"7_8":d(c[a.IM][8].tpl,o(c[a.IM][8].tplOptions,l))},e={defaultEventTagName:s,1:{1:{width:96,height:30,accurateSize:1,tpl:['<a href="javascript:void(0);" name="'+s+'" class="wpa-container {theme}" data-event="callChat">','<span class="icon-qq"></span>','<span class="btn-text">{btnText}</span>',"</a>"].join(""),cssText:["* {{common}}",'.wpa-container {text-align: center;{dib}width: 94px;height: 28px;line-height:28px;text-decoration: none;border:1px solid #dadee7;border-radius: 2px; font-size: 14px;font-family:"microsoft yahei";}',".icon-qq {{dib}vertical-align: middle;width: 18px;height: 18px;margin-right: 3px;margin-top:-3px;}",".theme-1 {background: #fff;color: #1e2330;}",'.theme-1 .icon-qq {background: url("'+n+'/1_1_1.png") no-repeat;}',".theme-2 {background: #12b7f5;color: #fff;border-color: #12b7f5;}",'.icon-qq {background: url("'+n+'/1_1_2.png") no-repeat;}',".theme-3 {background: #0067ed;color: #fff;border-color: #0067ed;}",".theme-4 {background: #ff9232;color: #fff;border-color: #ff9232;}",".theme-5 {background: #ee685d;color: #fff;border-color: #ee685d;}",".theme-6 {background: #33cc99;color: #fff;border-color: #33cc99;}",".btn-text {{dib}vertical-align: middle;font-size: 14px;height: 28px;line-height: 28px;margin-top:-3px;{ell}}"].join("")},2:{width:150,height:45,accurateSize:1,tpl:['<a href="javascript:void(0);" name="'+s+'" class="wpa-container {theme}" data-event="callChat">','<span class="icon-qq"></span>','<span class="btn-text">{btnText}</span>',"</a>"].join(""),cssText:["* {{common}}",'.wpa-container {text-align: center;{dib}width: 148px;height: 43px;line-height:42px;text-decoration: none;border-radius: 2px; border:1px solid #dadee7;font-size: 14px;font-family:"microsoft yahei";}',".icon-qq {{dib}vertical-align: middle;width: 26px;height: 26px;margin-right: 10px;}",".theme-1 {background: #fff;color: #1e2330;}",'.theme-1 .icon-qq {background: url("'+n+'/1_2_1.png") no-repeat;}',".theme-2 {background: #12b7f5;color: #fff;border-color: #12b7f5;}",'.icon-qq {background: url("'+n+'/1_2_2.png") no-repeat;}',".theme-3 {background: #0067ed;color: #fff;border-color: #0067ed;}",".theme-4 {background: #ff9232;color: #fff;border-color: #ff9232;}",".theme-5 {background: #ee685d;color: #fff;border-color: #ee685d;}",".theme-6 {background: #33cc99;color: #fff;border-color: #33cc99;}",".btn-text {{dib}vertical-align: middle;font-size: 16px;height: 45px;line-height: 45px;position:relative;top:-2px;{ell}}"].join("")},3:{width:255,height:85,accurateSize:1,defaultPosition:f[6],tpl:['<a class="wpa-container" data-event="callChat" name="e">','<img class="avatar" src="{avatar}" />','<span class="icon-qq"></span>','<span class="title">{title}</span>','<span class="signature">{signature}</span>',"</a>"].join(""),cssText:["* {{common}}",'.wpa-container {{dib}width: 253px;height: 83px;border-radius: 2px;position: relative;font-family:"microsoft yahei";font-size: 14px;background: #fff;border: 1px solid #dadee7;box-shadow:0 1px 3px rgba(30, 36, 49, 0.15);cursor: pointer;}',".avatar {width: 85px;height: 83px;position: absolute;left:0;top: 0;}",'.icon-qq {{dib}width: 22px;height: 22px;background: url("'+n+'/1_4.png") no-repeat;position: absolute;left: 97px;top: 18px;}',".title {{dib}{ell}max-width: 125px;font-size: 20px;position: absolute;left: 126px;top: 16px;color:#1e2330;}",".signature {{dib}{ell}max-width: 150px;position: absolute;left: 97px;top: 50px;text-align: left;}"].join("")},4:{width:70,height:70,accurateSize:1,defaultPosition:f[6],tpl:['<a class="wpa-container {theme}" data-event="callChat" name="'+s+'">','<span class="icon-qq"></span>','<span class="btn-text">{btnText}</span>',"</a>"].join(""),cssText:["* {{common}}",'.wpa-container {cursor:pointer;{dib}width: 68px;height: 68px;border-radius: 2px;border:1px solid #dadee7;position: relative;font-family:"microsoft yahei";font-size: 12px;text-align: center;top:0;}',".theme-1 {background: #fff;}",".theme-1 .btn-text {color:#1e2330;}",".theme-2 {background: #12b7f5;color:#fff;border-color: #12b7f5;}",".icon-qq {{dib}width: 26px;height: 26px;position: absolute;top: 13px;left: 22px;}",'.theme-1 .icon-qq {background: url("'+n+'/1_2_1.png") no-repeat;}','.icon-qq {background: url("'+n+'/1_2_2.png") no-repeat;}',".theme-3 {background: #0067ed;color: #fff;border-color: #0067ed;}",".theme-4 {background: #ff9232;color: #fff;border-color: #ff9232;}",".theme-5 {background: #ee685d;color: #fff;border-color: #ee685d;}",".theme-6 {background: #33cc99;color: #fff;border-color: #33cc99;}",".btn-text {{ell}max-width: 70px;color:#fff;display: block;position: relative;top: 43px;}"].join("")},5:{width:106,height:165,accurateSize:1,defaultPosition:f[6],tpl:['<a class="wpa-container" data-event="callChat" name="e">','<span class="title">{title}</span>','<img class="avatar" src="{avatar}" />','<span class="btn-area" style="background: {btnBgColor}">','<span class="icon-qq"></span>','<span class="btn-text">{btnText}</span>',"</span>","</a>"].join(""),cssText:["* {{common}}",'.wpa-container {{dib}{boxShadow}width: 104px;height: 165px;border-radius: 2px;position: relative;font-family:"microsoft yahei";font-size: 14px;background: #fff;border: 1px solid #dadee7;{boxShadow}cursor: pointer;text-align: center;}',".title {{dib}color: #000;margin-top: 9px;color:#1e2330;}",".avatar {width: 80px;height: 80px;border-radius: 50%;margin-top: 9px;}",".btn-area {{dib}width: 106px;height: 35px;line-height: 35px;position: absolute;bottom: -1px;left: -1px;text-align: center;margin-right: 6px;border-bottom-left-radius: 2px;border-bottom-right-radius: 2px;}",'.icon-qq {{dib}width: 22px;height: 22px;vertical-align: middle;background: url("'+n+'/1_1_2.png") no-repeat;margin-top:1px;}',".btn-text {{ell}color: #fff;max-width: 100px;}"].join("")},6:{width:404,height:200,accurateSize:1,defaultPosition:f[9],tpl:['<div class="wpa-container">','<a class="close" data-event="callClose" name="'+s+'" href="javascript:void(0);"></a>','<img class="avatar" src="{avatar}" />','<div class="content">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<a class="btn-area" data-event="callChat" name="e" style="background: {btnBgColor}">','<span class="icon-qq"></span>','<span class="btn-text">{btnText}</span>',"</a>","</div>"].join(""),cssText:["* {{common}}",'.wpa-container {{dib}width: 402px;height: 198px;border-radius: 2px;position: relative;border:1px solid #dadee7;background: #fff;/*border: 1px solid #ebedf2;*/font-family:"microsoft yahei";font-size: 14px;{boxShadow}}',".close {position: absolute;top: 15px;right: 15px;{dib}width: 14px;height: 14px;background: url("+n+"/icon-close.png) no-repeat;}",".avatar {position: absolute;top: 0;left: 0;width: 150px;height: 198px;}",".content {position: absolute;top: 30px;left: 170px;}",".title {{ell}font-size: 22px;color:#1e2330;}",'.icon-qq {{dib}width: 22px;height: 22px;margin-left: 1px;margin-top:1px;vertical-align: middle;background: url("'+n+'/1_1_2.png") no-repeat;}',".signature {color: #777;line-height: 24px;margin-top: 10px;width: 215px;}",".btn-area {{ell}text-decoration: none;color: #fff;position: absolute;right: 15px;bottom: 15px;width: 100px;border-radius: 2px;text-align: center;height: 35px;line-height: 35px;cursor:pointer;}"].join("")},7:{width:88,height:90,accurateSize:1,defaultPosition:f[9],tpl:['<a class="wpa-container" data-event="callChat" name="e">','<span class="icon-qq"></span>',"</a>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}line-height:1;width: "+m(84)+"px;height: "+m(84)+"px;border-radius: 50%;background: #fff;border: 1px solid #dadee7;cursor: pointer;text-align: center;}",".icon-qq {{dib}position:relative;top:"+m(20)+"px;width: "+m(37)+"px;height: "+m(44)+"px;vertical-align: middle;background: url("+n+p("/icon-qq-44-2x.png",r)+") no-repeat;background-size: "+m(37)+"px "+m(44)+"px;}"].join("")},8:{width:250,height:78,accurateSize:1,defaultPosition:f[9],tpl:['<a class="wpa-container" data-event="callChat" name="e">','<span class="v"></span>','<span class="icon-qq"></span>','<span class="btnText">在线咨询</span>',"</a>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}font-size:0;-webkit-text-size-adjust:none;width: "+m(246)+"px;height: "+m(74)+"px;border-radius: "+m(100)+"px;background: #fff;border: 1px solid #dadee7;cursor: pointer;text-align: center;position:relative;}",".v {{dib}vertical-align:middle;line-height:"+m(74)+"px;width:1px;height:"+m(74)+"px;}",".icon-qq {{dib}vertical-align:middle;width: "+m(37)+"px;height: "+m(44)+"px;background: url("+n+p("/icon-qq-44-2x.png",r)+") no-repeat;background-size: "+m(37)+"px "+m(44)+"px;margin-right:8px;}",".btnText {{dib}{ell}vertical-align:middle;font-size: "+m(34)+"px;max-width: "+m(140)+"px;color: #1e2330;line-height:1;}"].join("")},9:{width:"100%",height:130,accurateSize:0,tpl:t["1_9"]().tpl,cssText:t["1_9"]().cssText},10:{width:"100%",height:130,accurateSize:0,tpl:t["1_10"]().tpl,cssText:t["1_10"]().cssText},11:{width:"100%",height:130,accurateSize:0,tpl:t["1_11"]().tpl,cssText:t["1_11"]().cssText},12:{width:"100%",height:130,accurateSize:0,tpl:t["1_12"]().tpl,cssText:t["1_12"]().cssText},13:{width:"100%",height:140,accurateSize:0,tpl:t["1_13"]().tpl,cssText:t["1_13"]().cssText},14:{width:"100%",height:140,accurateSize:0,tpl:t["1_14"]().tpl,cssText:t["1_14"]().cssText},15:{width:"100%",height:270,accurateSize:0,tpl:['<div class="wpa-container {theme}">','<div class="qr-code">','<img src="{qrcode}" class="qr-code-img"/>','<img src="{avatar}" class="avatar-in-qr-code" />',"</div>",'<div class="info">','<div class="avatar">','<span class="title">{title}</span>',"</div>",'<div class="signature">',"{signature}","</div>","</div>","</div>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}position: relative;width: 100%;height: "+m(230)+"px;padding: "+m(20)+"px;}",".theme-1 {background: #fff;box-shadow: 0 0 0 1px #bbb;}",".theme-2 {background: #19212e;}",".theme-3 {background: #00a5e0;}",".theme-4 {background: #ff9232;}",".theme-5 {background: #ee685d;}",".theme-6 {background: #33cc99;}",".qr-code, .info, .title {{dib}}",".img-avatar {display: none;}",".qr-code {padding: "+m(15)+"px; background: #fff; position:relative; width: "+m(200)+"px; height: "+m(200)+"px;}",".qr-code-img {width: "+m(200)+"px;height: "+m(200)+"px;}",".theme-1 .qr-code {padding: 0; width: "+m(230)+"px; height: "+m(230)+"px;}",".theme-1 .qr-code-img {width: "+m(230)+"px;height: "+m(230)+"px;}",".avatar-in-qr-code {width: "+m(50)+"px; height: "+m(50)+"px; position:absolute;top: "+m(90)+"px;left: "+m(90)+"px;display:none;}",".info {position: absolute;left: "+m(270)+"px;top: "+m(63)+"px;}",".avatar img {border-radius: 50%;width: "+m(80)+"px;height: "+m(80)+"px;vertical-align: middle;}",".title {font-size: "+m(36)+"px;vertical-align: middle;margin-left: "+m(0)+"px;color: #fff;{ell}}",".signature {line-height: 1.6em;font-size: "+m(26)+"px;max-width: 85%;margin-top: "+m(16)+"px;color: #fff;{wordBreak}}",".theme-1 .signature {color: #999;}",".theme-1 .title {color: #000;}"].join("")}},2:{1:{width:88,height:88,accurateSize:1,defaultPosition:f[9],tpl:['<a href="javascript:void(0);" class="wpa-container" name="'+s+'" data-event="callPhone">','<img class="icon-call" src="'+n+'/icon-call-44-2x.png" srcset="'+n+"/icon-call-44-2x.png 1x, "+n+'/icon-call-44-3x.png 2x" />',"</a>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}width: "+m(84)+"px;height: "+m(84)+"px;text-decoration: none;text-align: center;border-radius: 100%;border: 1px solid #dadee7;background:#fff;line-height: "+m(78)+"px;}",".wpa-container img {vertical-align: middle; width: "+m(42)+"px; height: "+m(42)+"px;}"].join("")},2:{width:250,height:78,accurateSize:1,defaultPosition:f[9],tpl:['<a class="wpa-container" data-event="callPhone" name="e">','<span class="v"></span>','<span class="icon-call"></span>','<span class="btnText">免费电话</span>',"</a>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}font-size:0;-webkit-text-size-adjust:none;width: "+m(246)+"px;height: "+m(74)+"px;border-radius: "+m(100)+"px;background: #fff;border: 1px solid #dadee7;cursor: pointer;text-align: center;position:relative;}",".v {{dib}vertical-align:middle;line-height:"+m(74)+"px;width:1px;height:"+m(74)+"px;}",".icon-call {{dib}vertical-align:middle;width: "+m(37)+"px;height: "+m(44)+"px;background: url("+n+p("/icon-call-30-2x.png",r)+") no-repeat;background-size: "+m(37)+"px "+m(44)+"px;margin-right:8px;}",".btnText {{dib}{ell}vertical-align:middle;font-size: "+m(34)+"px;max-width: "+m(140)+"px;color: #1e2330;line-height:"+(u?"41px":"1")+";}"].join("")},3:{width:"100%",height:130,accurateSize:0,tpl:t["2_3"]().tpl,cssText:t["2_3"]().cssText},4:{width:"100%",height:130,accurateSize:0,tpl:t["2_4"]().tpl,cssText:t["2_4"]().cssText},5:{width:"100%",height:130,accurateSize:0,tpl:t["2_5"]().tpl,cssText:t["2_5"]().cssText},6:{width:"100%",height:130,accurateSize:0,tpl:t["2_6"]().tpl,cssText:t["2_6"]().cssText},7:{width:"100%",height:140,accurateSize:0,tpl:t["2_7"]().tpl,cssText:t["2_7"]().cssText},8:{width:"100%",height:140,accurateSize:0,tpl:t["2_8"]().tpl,cssText:t["2_8"]().cssText}},3:{1:{width:404,height:200,accurateSize:1,defaultPosition:f[9],tpl:t[2]({event:5}).tpl,cssText:t[2]({event:5}).cssText},2:{width:"100%",height:140,accurateSize:0,tpl:t["3_2"]().tpl,cssText:t["3_2"]().cssText},3:{width:"100%",height:140,accurateSize:0,tpl:t["3_3"]().tpl,cssText:t["3_3"]().cssText}},4:{1:{width:404,height:200,accurateSize:1,defaultPosition:f[9],tpl:t[2]({event:4}).tpl,cssText:t[2]({event:4}).cssText},2:{width:"100%",height:140,accurateSize:0,tpl:t["4_2"]().tpl,cssText:t["4_2"]().cssText},3:{width:"100%",height:140,accurateSize:0,tpl:t["4_3"]().tpl,cssText:t["4_3"]().cssText},4:{width:"100%",height:140,accurateSize:0,tpl:t["4_4"]().tpl,cssText:t["4_4"]().cssText}},5:{1:{width:404,height:200,accurateSize:1,defaultPosition:f[9],tpl:['<div class="wpa-container">','<a class="close" data-event="callClose" name="e" href="javascript:void(0);"></a>','<img class="avatar" src="{avatar}" />','<div class="content">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<a class="btn" style="background:{btnBgColor};" href="javascript:void(0);" name="e" data-event="callAddPal">{btnText}</a>',"</div>"].join(""),cssText:["* {{common}}",'.wpa-container {{dib}width: 404px;height: 200px;border-radius: 2px;position: relative;background: #fff;/*border: 1px solid #ebedf2;*/font-family:"microsoft yahei";font-size: 14px;{boxShadow}}',".close {position: absolute;top: 15px;right: 15px;{dib}width: 14px;height: 14px;background: url("+n+"/icon-close.png) no-repeat;}",".avatar {position: absolute;top: 0;left: 0;width: 150px;height: 200px;}",".content {position: absolute;top: 30px;left: 170px;}",".title {{ell}font-size: 18px;}",".signature {color: #777;line-height: 24px;margin-top: 10px;width: 215px;}",".btn {{ell}text-decoration: none;color: #fff;position: absolute;right: 15px;bottom: 15px;width: 100px;border-radius: 2px;text-align: center;height: 35px;line-height: 35px;}"].join("")},2:{width:"100%",height:140,accurateSize:0,tpl:t["5_2"]().tpl,cssText:t["5_2"]().cssText},3:{width:"100%",height:140,accurateSize:0,tpl:t["5_3"]().tpl,cssText:t["5_3"]().cssText},4:{width:"100%",height:140,accurateSize:0,tpl:t["5_4"]().tpl,cssText:t["5_4"]().cssText}},7:{1:{width:88,height:90,accurateSize:1,defaultPosition:f[9],tpl:['<a class="wpa-container {theme}" data-event="callIm" name="e">','<span class="icon-im"></span>',"</a>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}line-height:1;width: "+m(84)+"px;height: "+m(84)+"px;border-radius: 50%;border: 1px solid #dadee7;cursor: pointer;text-align: center;}",".icon-im {{dib}position:relative;top:"+m(20)+"px;width: "+m(44)+"px;height: "+m(44)+"px;vertical-align: middle;background: url("+n+p("/icon-im-44-white-2x.png",r)+") no-repeat;background-size: "+m(44)+"px "+m(44)+"px;}",".theme-1 {background: #fff;}",".theme-1 .icon-im {background: url("+n+p("/icon-im-44-blue-2x.png",r)+") no-repeat;background-size: "+m(44)+"px "+m(44)+"px;}",".theme-2 {background: #12b7f5;border-color: #12b7f5;}",".theme-3 {background: #0067ed;border-color: #0067ed;}",".theme-4 {background: #ff9232;border-color: #ff9232;}",".theme-5 {background: #ee685d;border-color: #ee685d;}",".theme-6 {background: #25cd98;border-color: #25cd98;}"].join("")},2:{width:250,height:78,accurateSize:1,defaultPosition:f[9],tpl:['<a class="wpa-container {theme}" data-event="callIm" name="e">','<span class="v"></span>','<span class="icon-im"></span>','<span class="btnText">{btnText}</span>',"</a>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}font-size:0;-webkit-text-size-adjust:none;width: "+m(246)+"px;height: "+m(74)+"px;border-radius: "+m(100)+"px;background: #fff;border: 1px solid #dadee7;cursor: pointer;text-align: center;position:relative;}",".v {{dib}vertical-align:middle;line-height:"+m(74)+"px;width:1px;height:"+m(74)+"px;}",".icon-im {{dib}vertical-align:middle;width: "+m(44)+"px;height: "+m(44)+"px;background: url("+n+p("/icon-im-44-white-2x.png",r)+") no-repeat;background-size: "+m(44)+"px "+m(44)+"px;margin-right:8px;}",".btnText {{dib}{ell}vertical-align:middle;font-size: "+m(34)+"px;max-width: "+m(140)+"px;color: #fff;line-height:1;}",".theme-1 {background:#fff;}",".theme-1 .icon-im {background: url("+n+p("/icon-im-44-blue-2x.png",r)+") no-repeat;background-size: "+m(44)+"px "+m(44)+"px;}",".theme-1 .btnText {color: #1e2330;}",".theme-2 {background: #12b7f5;border-color: #12b7f5;}",".theme-3 {background: #0067ed;border-color: #0067ed;}",".theme-4 {background: #ff9232;border-color: #ff9232;}",".theme-5 {background: #ee685d;border-color: #ee685d;}",".theme-6 {background: #25cd98;border-color: #25cd98;}"].join("")},3:{width:"100%",height:130,accurateSize:0,tpl:t["7_3"]().tpl,cssText:t["7_3"]().cssText},4:{width:"100%",height:130,accurateSize:0,tpl:t["7_4"]().tpl,cssText:t["7_4"]().cssText},5:{width:"100%",height:130,accurateSize:0,tpl:t["7_5"]().tpl,cssText:t["7_5"]().cssText},6:{width:"100%",height:130,accurateSize:0,tpl:t["7_6"]().tpl,cssText:t["7_6"]().cssText},7:{width:"100%",height:140,accurateSize:0,tpl:t["7_7"]().tpl,cssText:t["7_7"]().cssText},8:{width:"100%",height:140,accurateSize:0,tpl:t["7_8"]().tpl,cssText:t["7_8"]().cssText},9:{width:"100%",height:270,accurateSize:0,tpl:['<div class="wpa-container {theme}">','<div class="qr-code">','<img src="{qrcode}" class="qr-code-img"/>','<img src="{avatar}" class="avatar-in-qr-code" />',"</div>",'<div class="info">','<div class="avatar">','<span class="title">{title}</span>',"</div>",'<div class="signature">',"{signature}","</div>","</div>","</div>"].join(""),cssText:["* {{common}}",".wpa-container {{dib}position: relative;width: 100%;height: "+m(230)+"px;padding: "+m(20)+"px;}",".theme-1 {background: #fff;box-shadow: 0 0 0 1px #bbb;}",".theme-2 {background: #19212e;}",".theme-3 {background: #00a5e0;}",".theme-4 {background: #ff9232;}",".theme-5 {background: #ee685d;}",".theme-6 {background: #33cc99;}",".qr-code, .info, .title {{dib}}",".img-avatar {display: none;}",".qr-code {padding: "+m(15)+"px; background: #fff; position:relative; width: "+m(200)+"px; height: "+m(200)+"px;}",".qr-code-img {width: "+m(200)+"px;height: "+m(200)+"px;}",".theme-1 .qr-code {padding: 0; width: "+m(230)+"px; height: "+m(230)+"px;}",".theme-1 .qr-code-img {width: "+m(230)+"px;height: "+m(230)+"px;}",".avatar-in-qr-code {width: "+m(50)+"px; height: "+m(50)+"px; position:absolute;top: "+m(90)+"px;left: "+m(90)+"px;display:none;}",".info {position: absolute;left: "+m(270)+"px;top: "+m(63)+"px;}",".avatar img {border-radius: 50%;width: "+m(80)+"px;height: "+m(80)+"px;vertical-align: middle;}",".title {font-size: "+m(36)+"px;vertical-align: middle;margin-left: "+m(0)+"px;color: #fff;{ell}}",".signature {line-height: 1.6em;font-size: "+m(26)+"px;max-width: 85%;margin-top: "+m(16)+"px;color: #fff;{wordBreak}}",".theme-1 .signature {color: #999;}",".theme-1 .title {color: #000;}"].join("")},12:{width:350,height:70,accurateSize:1,defaultPosition:f[7],tpl:['<div class="wpa-container {theme}" data-event="callIm" name="e">','<img class="avatar" src="{avatar}" />','<span class="icon-im" ></span>','<div class="chat-bubble">','<span class="triangle-back"></span>','<span class="triangle-front"></span>','<p class="content">{signature}</p>',"</div>","</div>"].join(""),cssText:["* {{common}background: transparent;}",".wpa-container {cursor:pointer;width: 350px;height: 70px;position: relative;line-height: 70px;}",".avatar {width: 60px;height: 60px;border-radius: 50%;position: absolute;top: 5px;left: 0;}",".icon-im {display: inline-block;width: 25px;height: 25px;position: absolute;left: 46px;top: 0;background-repeat:no-repeat;z-index:10;}",".chat-bubble {border-radius: 6px;border: 1px solid #dadee7;width: 270px;height: 63px;position: absolute;left:75px;top: 3px;font-size: 14px;color: #fff;}",".content {padding-left: 15px; padding-right: 12px;line-height: 20px;display: inline-block;vertical-align: middle;position: relative;top: -3px;}",".theme-1 .chat-bubble {background: #fff;color: #1e2330;}",".theme-2 .chat-bubble {background: "+h[2]+";border-color: "+h[2]+";}",".theme-3 .chat-bubble {background: "+h[3]+";border-color: "+h[3]+";}",".theme-4 .chat-bubble {background: "+h[4]+";border-color: "+h[4]+";}",".theme-5 .chat-bubble {background: "+h[5]+";border-color: "+h[5]+";}",".theme-6 .chat-bubble {background: "+h[6]+";border-color: "+h[6]+";}",".triangle-back {display: inline-block;width: 0;height: 0;border: 8px solid transparent;position: absolute;left: -16px;top: 24px;z-index: 10;}",".triangle-front {display: none;width: 0;height: 0;border: 8px solid transparent;position: absolute;left: -14px;top: 24px;z-index: 11;}",".theme-1 .triangle-back {border-right-color: #dadee7;}",".theme-1 .triangle-front {border-right-color: #fff;display: inline-block;}",".theme-2 .triangle-back {border-right-color: "+h[2]+";}",".theme-3 .triangle-back {border-right-color: "+h[3]+";}",".theme-4 .triangle-back {border-right-color: "+h[4]+";}",".theme-5 .triangle-back {border-right-color: "+h[5]+";}",".theme-6 .triangle-back {border-right-color: "+h[6]+";}",".theme-1 .icon-im {background-image:url("+n+"/im-bubble-pc-theme2.png);}",".theme-2 .icon-im {background-image:url("+n+"/im-bubble-pc-theme2.png);}",".theme-3 .icon-im {background-image:url("+n+"/im-bubble-pc-theme3.png);}",".theme-4 .icon-im {background-image:url("+n+"/im-bubble-pc-theme4.png);}",".theme-5 .icon-im {background-image:url("+n+"/im-bubble-pc-theme5.png);}",".theme-6 .icon-im {background-image:url("+n+"/im-bubble-pc-theme6.png);}"].join("")
},13:{width:106,height:140,accurateSize:1,defaultPosition:f[6],tpl:['<div class="wpa-container {theme}" data-event="callIm" name="e">','<img src="{avatar}" class="avatar" />','<span class="icon-im"></span>','<p class="signature">{signature}</p>',"</div>"].join(""),cssText:["* {{common}}",".wpa-container {cursor:pointer;width: 104px;height: 138px;position: relative;text-align: center;font-size: 14px;color: #1e2330;border: 1px solid #dadee7;border-radius: 4px;background: #fff;}",".avatar {width: 80px;height: 80px;border-radius: 50%;display: inline-block;position: relative;top: 16px;}",".signature {position: relative;bottom: -25px;}",".icon-im {display: inline-block;width: 25px;height: 25px;background-repeat: no-repeat;position: absolute;top: 14px;right: 4px;z-index: 10;}",".theme-2 .icon-im {background-image:url("+n+"/im-bubble-pc-theme2.png);}",".theme-3 .icon-im {background-image:url("+n+"/im-bubble-pc-theme3.png);}",".theme-4 .icon-im {background-image:url("+n+"/im-bubble-pc-theme4.png);}",".theme-5 .icon-im {background-image:url("+n+"/im-bubble-pc-theme5.png);}",".theme-6 .icon-im {background-image:url("+n+"/im-bubble-pc-theme6.png);}"].join("")},14:{width:80,height:160,accurateSize:1,defaultPosition:f[6],tpl:['<div class="wpa-container {theme}">','<div class="btn-qq btn" data-event="callChat" name="e">','<span class="icon-qq btn-icon"></span><br/>','<span class="btn-text">QQ</span>',"</div>",'<span class="spliter"></span>','<div class="btn-im btn" data-event="callIm" name="e">','<span class="icon-im btn-icon"></span><br/>','<span class="btn-text">咨询</span>',"</div>","</div>"].join(""),cssText:["* {{common}}",".wpa-container {width: 80px;height: 160px;position: relative;text-align: center;font-size: 16px;color: #fff;border-top-left-radius: 4px;border-bottom-left-radius: 4px;}",".theme-2 {background: "+h[2]+";}",".theme-3 {background: "+h[3]+";}",".theme-4 {background: "+h[4]+";}",".theme-5 {background: "+h[5]+";}",".theme-6 {background: "+h[6]+";}",".btn {text-align: center;position: relative;width: 100%;height: 80px;top: 17px;cursor: pointer;}",".spliter {display: inline-block;width: 100%;height: 1px;background: #000;opacity: .1;position: absolute;top: 50%;left: 0;}",".icon-qq {display: inline-block;width: 22px;height: 26px;background: url("+n+"/icon-qq-white-small.png) no-repeat;}",".icon-im {display: inline-block;width: 25px;height: 25px;background: url("+n+"/im-bubble-pc-white.png) no-repeat;}"].join("")}}}},get:function(t,i){return e[t][i]},defaultEventTagName:s}}),LBF.define("wpa.util.domEvent",function(require,exports){exports.addEvent=window.addEventListener?function(t,e,i){return t.addEventListener(e,i),t}:function(t,e,i){return t.attachEvent("on"+e,i),t},exports.removeEvent=window.removeEventListener?function(t,e,i){return t.removeEventListener(e,i),t}:function(t,e,i){return t.detachEvent("on"+e,i),t}}),LBF.define("wpa.conf.defaultConst",function(require,exports,module){require("wpa.conf.config");module.exports={THEME:1,TITLE:["","在线咨询","免费电话","关注","加群","好友","","网页咨询"],SIGNATURE:["","在线咨询","免费电话","关注","加群","好友","","网页咨询"],BTN_TEXT:["","在线咨询","免费电话","关注","群组","好友","","网页咨询"],BTN_COLOR:"#12b7f5",POSITION:{1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},defaultEventTagName:"e"}}),LBF.define("wpa.util.getSize",function(require,exports,module){module.exports=exports=function(t){return function(t){if("number"!=typeof t)return t;var e=Math.ceil(t/2);return e}}}),LBF.define("lang.trim",function(require,exports,module){var t=/(^[\s\xA0]+)|([\s\xA0]+$)/g;module.exports=String.prototype.trim?function(t){return String.prototype.trim.call(t||"")}:function(e){return(e||"").toString().replace(t,"")}}),LBF.define("util.jsonp",function(require,exports,module){function t(){}var e=require("util.request"),i=require("util.serialize"),n=0;module.exports=function(a,o,r,l){var s,c=o.cb=o.cb||"JSONP_CB_"+ ++n;return a+=-1===a.indexOf("?")?"?":"&",a+=i(o),window[c]=function(t){r(t),setTimeout(function(){window[c]=null,s.parentNode&&s.parentNode.removeChild(s)},1)},s=e(a,t,l)}}),LBF.define("wpa.conf.chat",function(require,exports,module){var t=require("globalSettings"),e=t.apiBase,i="";-1!==e.indexOf("dev")?i="dev":-1!==e.indexOf("oa")&&(i="oa");var n="https://{env}admin.qidian.qq.com".replace("{env}",i);return{CHAT_TYPE_AUTO:1,CHAT_TYPE_ANONYMOUS:2,CHAT_TYPE_QQ:3,PC_QQ_SCHEMA_CGI:e+"/wpaInfo/TS",WPL_B_QQ_COM_CONV:e+"/wpaInfo/numberInfo",MQQWPA:"mqqwpa://im/chat",WPD_B_QQ_COM_INFO:"http://wpd.b.qq.com/page/info.php",WPD_B_QQ_COM_WEBCHAT:"http://wpd.b.qq.com/page/webchat.html",LINK_CHAT:e.replace("https:","http:")+"/wpaCall/sslCall",LAUNCH_MOBILE_QQ:n+"/template/blue/wpa/launch-mobile-qq.html"}}),LBF.define("wpa.conf.report",function(require,exports,module){var t=require("globalSettings").apiBase+"/wpaReport";module.exports={render:t+"/track",click:t+"/click"}}),LBF.define("lang.JSON",function(){return"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,a,o,r,l=gap,s=e[t];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(t)),"function"==typeof rep&&(s=rep.call(e,t,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(s)){for(o=s.length,i=0;o>i;i+=1)r[i]=str(i,s)||"null";return a=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+l+"]":"["+r.join(",")+"]",gap=l,a}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],a=str(n,s),a&&r.push(quote(n)+(gap?": ":":")+a));else for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(a=str(n,s),a&&r.push(quote(n)+(gap?": ":":")+a));return a=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+l+"}":"{"+r.join(",")+"}",gap=l,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,a=t[e];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n=walk(a,i),void 0!==n?a[i]=n:delete a[i]);return reviver.call(t,e,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),LBF.define("wpa.util.formReport",function(require,exports,module){var t,e,i,n,a,o="__post_form",r="__post_iframe",l=(!(!window.ActiveXObject&&!window.msIsStaticHTML),1),s=window._formList=[],c=window._iframeList=[],p=function(){setTimeout(function(){var t=s.shift(),e=c.shift();try{t&&document.body.removeChild(t),e&&document.body.removeChild(e)}catch(i){}},1e3)},d=function(e,i){var n,a=document.createDocumentFragment();try{for(var o in t)n=document.createElement('<input name="'+o+'"/>'),n.value=t[o],n.type="hidden",a.appendChild(n)}catch(r){for(var o in t)n=document.createElement("input"),n.type="hidden",n.name=o,n.value=t[o],a.appendChild(n)}e.appendChild(a),e.submit(),p()};module.exports=exports=function(p){if(p.action){i=o+l,n=r+l;var u=(document.getElementById(i),document.getElementById(n),p.action);t=p.data||{};try{e=document.createElement('<form id="'+i+'" method="post" action="'+u+'" target="'+n+'"></form>'),a=document.createElement('<iframe name="'+n+'" id="'+n+'" src="javascript:false;"></iframe>')}catch(h){e=document.createElement("form"),e.id=i,e.method="post",e.action=u,e.target=n,a=document.createElement("iframe"),a.name=n,a.id=n}a.style.cssText="width:1px;height:0;display:none;",document.body.appendChild(a),document.body.appendChild(e),s.push(e),c.push(a),l++,setTimeout(function(){d(e,a)},10)}}}),LBF.define("wpa.proto.getCPType",function(require,exports,module){var t=0,e=1,i=2,n=3,a=4,o=5,r=8;module.exports=exports=function(l){var s,c=t;return"undefined"!=typeof l._tptype?{tptype:l._tptype}:((s=l.roleQQ)?c=s.value?e:i:l.roleTEL?c=n:l.roleKFEXT?c=o:l.roleGROUP?c=a:l.rolePUB&&(c=r),{tptype:c})}}),LBF.define("wpa.protocol.getQQVersion","globalSettings,lang.browser,util.events",function(require){var t,e=require("globalSettings"),i=require("lang.browser"),n=require("wpa.util.domEvent");return function(a){if("undefined"!=typeof t)return void a(t);if(i.msie){try{var o=new ActiveXObject("TimwpDll.TimwpCheck");t=o.GetHummerQQVersion()}catch(r){t=null}return void a(t)}if(i.mozilla||i.webkit){var l=document.getElementsByTagName("body")[0],s=document.createElement("iframe"),c=e.base+"/protocol/getQQVersion.html";return s.style.display="none",n.addEvent(window,"message",function(e){/https?:\/\/combo\.b\.qq\.com/.test(e.origin)||(t=e.data,a(t),n.removeEvent(window,"message",arguments.callee),s.parentNode.removeChild(s))}),s.src=c,void l.insertBefore(s,l.firstChild)}t=null,a(t)}}),LBF.define("wpa.proto.chatSelect",function(require,exports,module){var t=require("wpa.util.Style"),e=require("wpa.util.domEvent"),i=require("wpa.util.offset"),n=require("lang.browser"),a=require("wpa.util.css"),o=require("lang.proxy"),r=require("lang.extend"),l=document,s="BackCompat"===l.compatMode;noPosFix=n.msie&&n.majorVersion<7||s;var c={container:l.getElementsByTagName("body")[0],template:['<div class="WPA3-SELECT-PANEL">','<div class="WPA3-SELECT-PANEL-TOP">','<a id="WPA3-SELECT-PANEL-CLOSE" href="javascript:;" class="WPA3-SELECT-PANEL-CLOSE"></a>',"</div>",'<div class="WPA3-SELECT-PANEL-MAIN">','<p class="WPA3-SELECT-PANEL-GUIDE">请选择发起聊天的方式：</p>','<div class="WPA3-SELECT-PANEL-SELECTS">','<a id="WPA3-SELECT-PANEL-AIO-CHAT" href="javascript:;" class="WPA3-SELECT-PANEL-CHAT WPA3-SELECT-PANEL-AIO-CHAT">','<span class="WPA3-SELECT-PANEL-QQ WPA3-SELECT-PANEL-QQ-AIO"></span>','<span class="WPA3-SELECT-PANEL-LABEL">QQ帐号聊天</span>',"</a>","</div>","</div>",'<div class="WPA3-SELECT-PANEL-BOTTOM">','<a target="_blank" href="http://im.qq.com" class="WPA3-SELECT-PANEL-INSTALL">安装QQ</a>',"</div>","</div>"].join(""),cssText:[".WPA3-SELECT-PANEL { z-index:2147483647; width:463px; height:292px; margin:0; padding:0; border:1px solid #d4d4d4; background-color:#fff; border-radius:5px; box-shadow:0 0 15px #d4d4d4;}",'.WPA3-SELECT-PANEL * { position:static; z-index:auto; top:auto; left:auto; right:auto; bottom:auto; width:auto; height:auto; max-height:auto; max-width:auto; min-height:0; min-width:0; margin:0; padding:0; border:0; clear:none; clip:auto; background:transparent; color:#333; cursor:auto; direction:ltr; filter:; float:none; font:normal normal normal 12px "Helvetica Neue", Arial, sans-serif; line-height:16px; letter-spacing:normal; list-style:none; marks:none; overflow:visible; page:auto; quotes:none; -o-set-link-source:none; size:auto; text-align:left; text-decoration:none; text-indent:0; text-overflow:clip; text-shadow:none; text-transform:none; vertical-align:baseline; visibility:visible; white-space:normal; word-spacing:normal; word-wrap:normal; -webkit-box-shadow:none; -moz-box-shadow:none; -ms-box-shadow:none; -o-box-shadow:none; box-shadow:none; -webkit-border-radius:0; -moz-border-radius:0; -ms-border-radius:0; -o-border-radius:0; border-radius:0; -webkit-opacity:1; -moz-opacity:1; -ms-opacity:1; -o-opacity:1; opacity:1; -webkit-outline:0; -moz-outline:0; -ms-outline:0; -o-outline:0; outline:0; -webkit-text-size-adjust:none; font-family:Microsoft YaHei,Simsun;}',".WPA3-SELECT-PANEL a { cursor:auto;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-TOP { height:25px;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-CLOSE { float:right; display:block; width:47px; height:25px; background:url(http://combo.b.qq.com/crm/wpa/release/3.3/wpa/views/SelectPanel-sprites.png) no-repeat;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-CLOSE:hover { background-position:0 -25px;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-MAIN { padding:23px 20px 45px;}",'.WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-GUIDE { margin-bottom:42px; font-family:"Microsoft Yahei"; font-size:16px;}',".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-SELECTS { width:246px; height:111px; margin:0 auto;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-CHAT { float:right; display:block; width:88px; height:111px; background:url(http://combo.b.qq.com/crm/wpa/release/3.3/wpa/views/SelectPanel-sprites.png) no-repeat 0 -80px;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-CHAT:hover { background-position:-88px -80px;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-AIO-CHAT { float:left;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-QQ { display:block; width:76px; height:76px; margin:6px; background:url(http://combo.b.qq.com/crm/wpa/release/3.3/wpa/views/SelectPanel-sprites.png) no-repeat -50px 0;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-QQ-ANONY { background-position:-130px 0;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-LABEL { display:block; padding-top:10px; color:#00a2e6; text-align:center;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-BOTTOM { padding:0 20px; text-align:right;}",".WPA3-SELECT-PANEL .WPA3-SELECT-PANEL-INSTALL { color:#8e8e8e;}"].join(""),modal:!0};t.add({name:"_WPA_SELECT_PANEL_STYLE",cssText:c.cssText});var p=function(t){this.opts=r({},c,t),this.render()};p.prototype={render:function(){var t,i=this,n=this.opts,a=this.container=n.container,o=l.createElement("div");o.innerHTML=n.template,this.el=t=o.firstChild,function(){try{a.appendChild(t)}catch(o){return void setTimeout(arguments.callee,1)}e.addEvent(l.getElementById("WPA3-SELECT-PANEL-CLOSE"),"click",function(){i.remove(),n.onClose&&n.onClose()}),e.addEvent(l.getElementById("WPA3-SELECT-PANEL-AIO-CHAT"),"click",function(){i.remove(),n.onAIOChat&&n.onAIOChat()}),i.renderModal(),i.setCenter()}()},show:function(){a(this.el,"display","block"),a(this.modal,"display","block")},remove:function(){this.el.parentNode.removeChild(this.el),this.modal.parentNode.removeChild(this.modal)},setCenter:function(){a(this.el,{position:"absolute",top:"50%",left:"50%"});var t={position:"fixed",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"};if(noPosFix){t.position="absolute",t.marginTop=0;var e=t.top=(i.getClientHeight()-this.outerHeight())/2;setInterval(o(this.el,function(){this.style.top=i.getScrollTop()+e+"px"}),128)}a(this.el,t)},renderModal:function(){var t=this.container,n=(a(t,"width"),a(t,"height"),a(t,"overflow"),l.createElement("div")),r={position:"fixed",top:0,left:0,zIndex:2147483647,width:i.getClientWidth()+"px",height:i.getClientHeight()+"px",backgroundColor:"white",opacity:.1,filter:"alpha(opacity=10)"};noPosFix&&(r.position="absolute",setInterval(o(n,function(){this.style.top=i.getScrollTop()+"px"}),128)),a(n,r),t.insertBefore(n,this.el),this.modal=n,e.addEvent(window,"resize",o(n,function(){a(this.el,{width:i.getClientWidth()+"px",height:i.getClientHeight()+"px"})}))},outerWidth:function(){return this.el.offsetWidth},outerHeight:function(){return this.el.offsetHeight}},module.exports=p}),LBF.define("wpa.util.openMqqPage",function(require,exports,module){function t(t,e){new RegExp("(^|&|\\?|#)"+t+"=([^&]*?)(&|#|$)");return e=e||location.href}function e(t,e){var i=function(t){var e=/^http(s)?:\/\/([\w\-]+[\.])+qq\.com($|\/)/;return e.test(t)};t=i(t)?t:"";var n={env:e&&e.env||"unknown"},a=document.createElement("iframe");a.style.cssText="display:none; width:0px; height:0px;","android"==n.env?t="mqqapi://forward/url?plg_auth=1&url_prefix="+btoa(t):"ios"==n.env&&(t="mqqapi://forward/url?version=1&src_type=web&url_prefix="+btoa(t)),setTimeout(function(){a.src=t,document.body.appendChild(a)},500)}var i=require("lang.browser"),n=require("wpa.conf.config"),a=(n.CGIS,i.isMobile,n.ENV,function(){var t=navigator.userAgent.toLowerCase(),e=navigator.userAgent,i=function(e){var i=(""+(new RegExp(e+"(\\d+((\\.|_)\\d+)*)").exec(t)||[,0])[1]).replace(/_/g,".");return!!parseFloat(i)};return{is_mqq:/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(e)||/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/.test(e),is_ios:i("os "),is_android:i("android[/ ]"),is_pc:!i("os ")&&!i("android[/ ]")}}());exports=module.exports=function(n){return i.isMobile?void(a.is_ios?e(t("url",n),{env:"ios"}):a.is_android&&e(t("url",n),{env:"android"})):alert("仅限移动端呼起")}}),LBF.define("util.serialize",function(require,exports,module){module.exports=function(t,e,i){var n=[];e=e||"=",i=i||"&";for(var a in t)t.hasOwnProperty&&n.push(a+e+(t[a]||""));return n.join(i)}}),LBF.define("wpa.util.launch",function(require,exports,module){var t=require("lang.browser"),e=require("wpa.conf.config"),i=e.isMobile,n=(e.isSSL,t.isIOS),a=(t.isAndroid,i?500:0),o=e.gWin,r=o.document,l=r.body,s=0,c=function(t){var e=r.createElement("div");e.style.visibility="hidden",e.style.width=0,e.style.height=0,e.innerHTML='<iframe id="_qd_schema_"'+s+' src="'+t+'" scrolling="no" width="0" height="0"></iframe>',s++,setTimeout(function(){l.appendChild(e)},a)};module.exports=exports=function(t){i&&n?setTimeout(function(){o.location.href=t},a):c(t)}}),LBF.define("wpa.util.offset",function(require,exports){var t=require("wpa.conf.config"),e=t.gWin,i=e.document,n="CSS1Compat"===i.compatMode,a=i.documentElement,o=i.body;exports.getScrollTop=function(){return Math.max(a.scrollTop,o.scrollTop)},exports.getClientWidth=n?function(){return a.clientWidth}:function(){return o.clientWidth},exports.getClientHeight=n?function(){return a.clientHeight}:function(){return o.clientHeight},exports.getNewScrollTop=function(){var t=i.documentElement.scrollTop||e.pageYOffset||i.body.scrollTop;return t}}),LBF.define("wpa.invite.getInviteConf",function(require,exports,module){var t=(require("util.jsonp"),require("wpa.conf.config"));t.host;module.exports=exports=function(t,e){var i={kfuin:2852199e3,key:"fafeaewf123",autoInvited:{active:1,reception:{type:1,cuin:1232132},repeat:{active:!0,finterval:2,frequency:1},condition:{stayPeriod:2,deviceType:1}},invitedStyle:{type:"1",title:"客服在线，欢迎咨询",content:"您好，当前有客服在线，点击即可咨询",btns:[{type:"im",text:"网页咨询"}],theme:"1",avatar:"https://oa.gtimg.com/qidian/src/sites/srv/wpa/conf/wpa/avatar/1-1.png",xc:"http://www.shiseido.co.jp/cms/products/sg/ei/img/BRND_WD_BNR_4W.jpg"}};e(i)}}),LBF.define("wpa.invite.tpl",function(require,exports,module){var t=require("wpa.conf.config"),e=t.imageBaseUrl,i=(require("wpa.util.log"),require("lang.browser")),n=i.isAndroid||i.isIOS,a=require("util.xssFilter"),o=(require("wpa.util.replaceImg3X"),{1:"#0067ed",2:"#12b7f5",3:"#ff9232",4:"#ee685d",5:"#25cd98"}),r={mobile:{iframe:["position:fixed","z-index: 2000001000","top: 0","left: 0"].join(";")+";",innerBody:['* {margin: 0;padding: 0;font-family: "PingFang SC", "Droid Sans Fallback", "microsoft yahei";background: transparent;}'].join(""),shadow:["box-shadow: 0 0 15px 1px rgba(0,0,0,.15);"].join(""),holder1:[".wpa-invite-holder {position: relative;height: 155px;width: 100%;}"].join(""),holder2:[".wpa-invite-holder {position: relative;height: 180px;width: 100%;}"].join("")},pc:{iframe:["position:fixed","z-index: 2000001000","top: 260px","left: 0"].join(";")+";",innerBody:['* {margin: 0;padding: 0;font-family: "microsoft yahei";}'].join("")}};r=n?r.mobile:r.pc,r.themeColors=o;var l=exports.btnTypes={qq:"qq",phone:"phone",im:"im"},s={qq:"icon-qq",phone:"icon-phone",im:"icon-im"},c={title:"客服在线，欢迎咨询",content:"您好，当前有客服在线，点击即可咨询",theme:1,btns:{qq:{type:l.qq,text:"QQ交谈"},phone:{type:l.phone,text:"免费电话"},im:{type:l.im,text:"立即咨询"}}},p={mobile:{tpl:['<a href="javascript:void(0);" id="invite_close" data-event="close" class="icon-close">','<img src="'+e+'/invite/icon-close-2x.png" />',"</a>"].join(""),css:[".icon-close {position: fixed;top: 6px;right: 6px;}",".icon-close img {width: 27px;height: 27px;}"].join("")},pc:{tpl:['<a href="javascript:void(0);" id="invite_close" class="icon-close">','<img src="'+e+'/invite/icon-close-2x.png" />',"</a>"].join(""),css:[".icon-close {position: absolute;right: -2px;top: -2px;z-index: 10;}"].join("")}};p=n?p.mobile:p.pc;var d=e+"/default-avatar.png";__WPA.replaceErrAvatar=function(t){t.src=d,t.onerror=null};var u={mobile:{1:{required:["title","content","btn1","btn2","theme"],width:"100%",height:155,tpl:['<div class="wpa-invite-holder">','<div class="wpa-invite {theme}">','<div class="main">','<p class="title">{title}</p>','<p class="content">{content}</p>',"</div>",'<div class="btns {is-multi-btn}">','<div class="btn" id="btn1" data-event="{btn1Event}">','<span class="btn-icon {btn1Icon}"></span>','<span class="btn-text">{btn1Text}</span>',"</div>",'<div class="btn" id="btn2" data-event="{btn2Event}">','<span class="btn-icon {btn2Icon}"></span>','<span class="btn-text">{btn2Text}</span>',"</div>","</div>","</div>",p.tpl,"</div>"].join(""),css:[r.innerBody,r.holder1,".wpa-invite {background:#fff;height: 123px;border: 1px solid #dadee7;border-radius: 3px;position:absolute;bottom:15px;left:15px;right:15px;"+r.shadow+"}",'.main {background: #fff url("'+e+'/invite/icon-bg-bubble.png") no-repeat;background-size: 62px 53px;height: 85px;width: 100%;text-align: center;position: relative;border-top-left-radius:3px;}',".title {font-size: 18px;color: #1e2300;position: relative;top: 20px;}",".content {font-size: 12px;color: #777;position: relative;top: 23px;}",".btns {height: 40px;line-height: 40px;border-bottom-left-radius: 3px;border-bottom-right-radius: 3px;text-align: center;}",".theme-1 .btns {background: "+r.themeColors[1]+";}",".theme-2 .btns {background: "+r.themeColors[2]+";}",".theme-3 .btns {background: "+r.themeColors[3]+";}",".theme-4 .btns {background: "+r.themeColors[4]+";}",".theme-5 .btns {background: "+r.themeColors[5]+";}",".btn {cursor: pointer;color: #fff;font-size: 15px;display: inline-block;}",".btn span {position:relative;top:-1px;}",".btn .btn-icon {top:-2px;}",".btn:last-child {display:none;}",".btn-text {display:inline-block;padding-left:3px;}",".multi-btn {display: flex;}",".multi-btn .btn {flex: 1;}",".multi-btn .btn:last-child {display:inline-block;border-left: 1px solid #fff;}",".btn:first-child {display:inline-block!important;}",".btn-icon {display: inline-block;width: 24px;height: 24px;vertical-align: middle;}",'.icon-qq {background: url("'+e+'/invite/icon-qq-white.png") no-repeat;background-size: 24px 24px;}','.icon-phone {background: url("'+e+'/invite/icon-phone-white.png") no-repeat;background-size: 24px 24px;}','.icon-im {background: url("'+e+'/invite/icon-im-white.png") no-repeat;background-size: 24px 24px;}',p.css].join("")},2:{required:["content","btn1","btn2","theme","avatar"],width:"100%",height:155,tpl:['<div class="wpa-invite-holder">','<div class="wpa-invite {theme}">','<div class="avatar">','<img src="{avatar}" onerror="javascript:parent.__WPA.replaceErrAvatar(this);"/>',"</div>",'<div class="content">{content}</div>','<div class="btns  {is-multi-btn}">','<div class="btn" id="btn1" data-event="{btn1Event}">','<span class="btn-icon {btn1Icon}"></span>','<span class="btn-text">{btn1Text}</span>',"</div>",'<div class="btn" id="btn2" data-event="{btn2Event}">','<span class="btn-icon {btn2Icon}"></span>','<span class="btn-text">{btn2Text}</span>',"</div>","</div>","</div>",p.tpl,"</div>"].join(""),css:[r.innerBody,r.holder1,".wpa-invite {background:#fff;position: absolute;left: 15px;right: 15px;bottom: 15px;height: 123px;border: 1px solid #dadee7;border-radius: 3px;box-shadow: 0 0 15px 1px rgba(0,0,0,.15);}",".avatar {position: absolute;top: 20px;left: 15px;}",".avatar img {width: 50px;height: 50px;border-radius: 50%;}",".content {font-size: 16px;color: #1e2330;position: absolute;top: 20px;left: 80px;width: 210px;line-height: 24px;}",".btn {display: inline-block;margin-left: 20px;vertical-align: middle;}",".btn-icon {display: inline-block;width: 24px;height: 24px;vertical-align: middle;background-size: 24px 24px!important;position:relative;top:-1px;}",".btn-text {font-size: 15px;}",".btn:last-child {display:none;}",".btn:first-child {display:inline-block!important;}",".btns {position: absolute;bottom: 12px;right: 15px;}",".multi-btn .btn:last-child {display:inline-block;}",".btn-text {display:inline-block;padding-left:3px;}",".theme-1 .btn {color: "+r.themeColors[1]+";}",".theme-2 .btn {color: "+r.themeColors[2]+";}",".theme-3 .btn {color: "+r.themeColors[3]+";}",".theme-4 .btn {color: "+r.themeColors[4]+";}",".theme-5 .btn {color: "+r.themeColors[5]+";}",'.theme-1 .icon-qq {background: url("'+e+'/invite/icon-qq-theme1-2x.png") no-repeat;}','.theme-2 .icon-qq {background: url("'+e+'/invite/icon-qq-theme2-2x.png") no-repeat;}','.theme-3 .icon-qq {background: url("'+e+'/invite/icon-qq-theme3-2x.png") no-repeat;}','.theme-4 .icon-qq {background: url("'+e+'/invite/icon-qq-theme4-2x.png") no-repeat;}','.theme-5 .icon-qq {background: url("'+e+'/invite/icon-qq-theme5-2x.png") no-repeat;}','.theme-1 .icon-phone {background: url("'+e+'/invite/icon-phone-theme1-2x.png") no-repeat;}','.theme-2 .icon-phone {background: url("'+e+'/invite/icon-phone-theme2-2x.png") no-repeat;}','.theme-3 .icon-phone {background: url("'+e+'/invite/icon-phone-theme3-2x.png") no-repeat;}','.theme-4 .icon-phone {background: url("'+e+'/invite/icon-phone-theme4-2x.png") no-repeat;}','.theme-5 .icon-phone {background: url("'+e+'/invite/icon-phone-theme5-2x.png") no-repeat;}','.theme-1 .icon-im {background: url("'+e+'/invite/icon-im-theme1-2x.png") no-repeat;}','.theme-2 .icon-im {background: url("'+e+'/invite/icon-im-theme2-2x.png") no-repeat;}','.theme-3 .icon-im {background: url("'+e+'/invite/icon-im-theme3-2x.png") no-repeat;}','.theme-4 .icon-im {background: url("'+e+'/invite/icon-im-theme4-2x.png") no-repeat;}','.theme-5 .icon-im {background: url("'+e+'/invite/icon-im-theme5-2x.png") no-repeat;}',p.css].join("")},3:{required:["xc","btn1","btn2","theme"],width:"100%",height:180,tpl:['<div class="wpa-invite-holder">','<div class="wpa-invite {theme}">','<div class="xc">','<img src="{xc}" />',"</div>",'<div class="btns {is-multi-btn}">','<div class="btn" id="btn1" data-event="{btn1Event}">','<span class="btn-icon {btn1Icon}"></span>','<span class="btn-text">{btn1Text}</span>',"</div>",'<div class="btn" id="btn2" data-event="{btn2Event}">','<span class="btn-icon {btn2Icon}"></span>','<span class="btn-text">{btn2Text}</span>',"</div>","</div>","</div>",p.tpl,"</div>"].join(""),css:[r.innerBody,r.holder2,".wpa-invite {background:#fff;position: absolute;left: 15px;right: 15px;bottom: 15px;height: 148px;border: 1px solid #dadee7;border-radius: 3px;"+r.shadow+"}",".xc img {width: 100%;height: 95px;}",".btns {text-align: center;position: relative;top: 5px;}",".btn {display: inline-block;width: 170px;height: 35px;line-height: 35px;border-radius: 3px;color: #fff;font-size: 15px;text-align: center;}",".btn:last-child {display:none;}",".multi-btn .btn {width: 140px;}",".multi-btn .btn:last-child {display:inline-block;margin-left: 15px;}",".btn:first-child {display:inline-block!important;}",".theme-1 .btn {background: "+r.themeColors[1]+";}",".theme-2 .btn {background: "+r.themeColors[2]+";}",".theme-3 .btn {background: "+r.themeColors[3]+";}",".theme-4 .btn {background: "+r.themeColors[4]+";}",".theme-5 .btn {background: "+r.themeColors[5]+";}",".btn-text {display:inline-block;padding-left:3px;}",".btn-icon {display: inline-block;width: 24px;height: 24px;vertical-align: middle;}",'.icon-qq {background: url("'+e+'/invite/icon-qq-white.png") no-repeat;background-size: 24px 24px;}','.icon-phone {background: url("'+e+'/invite/icon-phone-white.png") no-repeat;background-size: 24px 24px;}','.icon-im {background: url("'+e+'/invite/icon-im-white.png") no-repeat;background-size: 24px 24px;}',p.css].join("")}},pc:{1:{required:["title","content","btn1","btn2","theme"],width:450,height:260,tpl:['<div class="wpa-invite {theme}">','<a href="javascript:void(0);" id="invite_close" data-event="close" class="icon-close">','<img src="'+e+'/invite/close_white.png" />',"</a>",'<div class="main">','<div class="title">{title}</div>','<div class="content">{content}</div>',"</div>",'<div class="btns {is-multi-btn}">','<div class="btn" id="btn1" data-event="{btn1Event}">','<span class="btn-icon {btn1Icon}"></span>','<span class="btn-text">{btn1Text}</span>',"</div>",'<span class="spliter"></span>','<div class="btn" id="btn2" data-event="{btn2Event}">','<span class="btn-icon {btn2Icon}"></span>','<span class="btn-text">{btn2Text}</span>',"</div>","</div>","</div>"].join(""),css:[r.innerBody,'.wpa-invite {width: 448px;height: 258px;background:#fff;border-radius: 4px;border: 1px solid #dadee7;font-family: "microsoft yahei";position: relative;}',p.css,'.main {width: 450px;height: 180px;text-align: center;color: #fff;position: absolute;top: -1px;left: -1px;border-top-left-radius: 4px;border-top-right-radius: 4px;position: relative;overflow: hidden;background: url("'+e+'/invite/bubble.png") no-repeat;background-position: right center;}',".theme-1 .main {background-color: #0067ed;}",".theme-2 .main {background-color: #12b7f5;}",".theme-3 .main {background-color: #ff9232;}",".theme-4 .main {background-color: #ee685d;}",".theme-5 .main {background-color: #25cd98;}",".title {font-size: 30px;margin-top: 50px;}",".content {font-size: 18px;margin-top: 10px;}",".btn-icon {margin-right:7px;vertical-align: middle;display: inline-block;width: 30px;height: 30px;}",'.theme-1 .icon-qq {background: url("'+e+'/invite/icon-qq-pc1.png") no-repeat;}','.theme-2 .icon-qq {background: url("'+e+'/invite/icon-qq-pc2.png") no-repeat;}','.theme-3 .icon-qq {background: url("'+e+'/invite/icon-qq-pc3.png") no-repeat;}','.theme-4 .icon-qq {background: url("'+e+'/invite/icon-qq-pc4.png") no-repeat;}','.theme-5 .icon-qq {background: url("'+e+'/invite/icon-qq-pc5.png") no-repeat;}','.theme-1 .icon-im {background: url("'+e+'/invite/icon-im-pc1.png") no-repeat;}','.theme-2 .icon-im {background: url("'+e+'/invite/icon-im-pc2.png") no-repeat;}','.theme-3 .icon-im {background: url("'+e+'/invite/icon-im-pc3.png") no-repeat;}','.theme-4 .icon-im {background: url("'+e+'/invite/icon-im-pc4.png") no-repeat;}','.theme-5 .icon-im {background: url("'+e+'/invite/icon-im-pc5.png") no-repeat;}',".btns {text-align: center;}",".btn-text {vertical-align:middle;}",".btn {font-size: 22px;color: #1e2330;text-align: center;height: 80px;line-height: 80px;cursor: pointer;}",".btn:last-child {display: none;}",".btn:first-child {display: block;}",".spliter {display: none;width: 1px;height: 40px;vertical-align: middle;background: #dadee7;}",".multi-btn .btn {display: inline-block;width: 218px;}",".multi-btn .spliter {display: inline-block;}"].join("")},2:{required:["content","btn1","btn2","theme","avatar"],width:330,height:390,tpl:['<div class="wpa-invite {theme}">','<a href="javascript:void(0);" id="invite_close" data-event="close" class="icon-close">','<img src="'+e+'/invite/close_black.png" />',"</a>",'<img src="{avatar}" class="avatar" onerror="javascript:parent.__WPA.replaceErrAvatar(this);"/>','<div class="main">','<div class="title">{title}</div>','<div class="content">{content}</div>',"</div>",'<div class="btns {is-multi-btn}">','<div class="btn" id="btn1" data-event="{btn1Event}">','<span class="btn-icon {btn1Icon}"></span>','<span class="btn-text">{btn1Text}</span>','</div><div class="btn" id="btn2" data-event="{btn2Event}">','<span class="btn-icon {btn2Icon}"></span>','<span class="btn-text">{btn2Text}</span>',"</div>","</div>","</div>"].join(""),
css:[r.innerBody,".wpa-invite {width: 328px;height: 388px;border-radius: 4px;border: 1px solid #dadee7;position: relative;text-align: center;background: #fff;}",".icon-close {position: absolute;right: -2px;top: -2px;z-index: 10;}",p.css,".avatar {width: 140px;height: 140px;border-radius: 50%;position: relative;top: 40px;}",".main {position: relative;top: 60px;}",".title {font-size: 30px;color: #1e2330;}",".content {font-size: 18px;color: #777;margin-top: 9px;}",".btns {position: absolute;left: 0;bottom: 0;width: 100%;height: 60px;line-height: 60px;color: #fff;}",'.icon-im {display: inline-block;width: 25px;height: 25px;background: url("'+e+'/invite/im-bubble-pc-white.png") no-repeat;}','.icon-qq {display: inline-block;width: 22px;height: 26px;background: url("'+e+'/invite/icon-qq-white-small.png") no-repeat;}',".btn-icon {margin-right: 7px;vertical-align: middle;}",".btn-text {vertical-align: middle;}",".btn {font-size: 22px;cursor: pointer;border-bottom-left-radius: 4px;border-bottom-right-radius: 4px;height: 60px;}",".btn:last-child {display: none;}",".btn:first-child {display: block;}",".multi-btn .btn {display: inline-block;width: 163px;}",".multi-btn .btn:first-child {float: left;border-bottom-left-radius: 4px;border-bottom-right-radius: 0;}",".multi-btn .btn:last-child {float: right;border-bottom-left-radius: 0;border-bottom-right-radius: 4px;}",".theme-1 .btn {background: "+o[1]+";}",".theme-2 .btn {background: "+o[2]+";}",".theme-3 .btn {background: "+o[3]+";}",".theme-4 .btn {background: "+o[4]+";}",".theme-5 .btn {background: "+o[5]+";}"].join("")},3:{required:["xc","btn1","btn2","theme"],width:480,height:400,tpl:['<div class="wpa-invite {theme}">','<a href="javascript:void(0);" id="invite_close" data-event="close" class="icon-close">','<img src="'+e+'/invite/close_black.png" />',"</a>",'<img src="{xc}" class="xc" />','<div class="btns {is-multi-btn}">','<div class="btn" id="btn1" data-event="{btn1Event}">','<span class="btn-icon {btn1Icon}"></span>','<span class="btn-text">{btn1Text}</span>','</div><div class="btn" id="btn2" data-event="{btn2Event}">','<span class="btn-icon {btn2Icon}"></span>','<span class="btn-text">{btn2Text}</span>',"</div>","</div>","</div>"].join(""),css:[r.innerBody,".wpa-invite {width: 478px;height: 398px;border-radius: 4px;border: 1px solid #dadee7;position: relative;background: #fff;}",p.css,".xc {width: 480px;height: 280px;position: relative;left: -1px;top: -1px;}",".btn:last-child {display: none;}",".btn:first-child {display: inline-block;}",".multi-btn .btn {display: inline-block;}",".multi-btn .btn:first-child {margin-right: 26px;}",'.icon-im {display: inline-block;width: 25px;height: 25px;background: url("'+e+'/invite/im-bubble-pc-white.png") no-repeat;}','.icon-qq {display: inline-block;width: 22px;height: 26px;background: url("'+e+'/invite/icon-qq-white-small.png") no-repeat;}',".btns {text-align: center;height: 60px;line-height: 60px;position: relative;left: 0;top: 24px;}",".btn {cursor:pointer;display: inline-block;width: 180px;height: 60px;line-height: 60px;font-size: 22px;color: #fff;text-align: center;border-radius: 4px;}",".btn-icon, .btn-text {vertical-align: middle;}",".btn-icon {margin-right: 7px;}",".theme-1 .btn {background: "+o[1]+";}",".theme-2 .btn {background: "+o[2]+";}",".theme-3 .btn {background: "+o[3]+";}",".theme-4 .btn {background: "+o[4]+";}",".theme-5 .btn {background: "+o[5]+";}"].join("")}}},h=function(t,e){var i,n=(t.required,t.css),o=t.tpl,r=e.btns,l=e.avatar,p=e.title||c.title,d=e.content||c.content,u=e.xc,h="theme-"+(e.theme||c.theme),f=r.length>1?!0:!1,g=f?"multi-btn":"",m=r[0],b=m.type,x=m.text||c.btns[b].text,v=s[b],w=r[1]||{},_=w.type,y=w.text,E=s[_];return i=o.replace("{title}",a.htmlEncode(p)).replace("{content}",a.htmlEncode(d)).replace("{theme}",a.htmlEncode(h)).replace("{avatar}",a.htmlEncode(l)).replace("{xc}",a.htmlEncode(u)).replace("{is-multi-btn}",g).replace("{btn1Text}",a.htmlEncode(x)).replace("{btn2Text}",a.htmlEncode(y)).replace("{btn1Icon}",v).replace("{btn2Icon}",E).replace("{btn1Event}",b).replace("{btn2Event}",_),{css:n,tpl:i,height:t.height,width:t.width}};exports.getTpl=function(t){var e=t.type,i=n?u.mobile[e]:u.pc[e],a=h(i,t);return a},exports.getIframeStyle=function(t,e){var i=r.iframe,a=t.width,o=t.height;if(!n){var l=a/2;i=["position:fixed","z-index: 2000001000","top: 25%","left: 50%","margin-left:-"+l+"px"].join(";")+";"}return{style:i,width:a,height:o}}}),LBF.define("wpa.util.getOffset",function(require,exports,module){module.exports=exports=function(t,e){if(t){e=e||{};var i=t.offsetParent,n=t.offsetLeft,a=t.offsetTop;if(e.isAbsolute)for(;i;)n+=i.offsetLeft,a+=i.offsetTop,i=i.offsetParent;return{offsetParent:i,x:n,y:a}}}}),LBF.define("monitor.SpeedReport",function(require){var t=require("util.report"),e=require("lang.Class"),i=require("util.serialize"),n=require("util.Attribute"),a={url:"http://isdspeed.qq.com/cgi-bin/r.cgi",rate:1,calGap:!1},o=e.inherit(n,{initialize:function(t){this.set(a).set({points:[],start:+new Date}).set(t)},add:function(t,e){var i=this.get("points");return t=t||+new Date,e=e||i.length,i[e]=t,this},send:function(){var e=this.get("points").splice(0);if(Math.random()>this.get("rate"))return this;var n,a=this.get("start"),o=this.get("flag1"),r=this.get("flag2"),l=this.get("flag3"),s=this.get("url")+"?flag1="+o+"&flag2="+r+"&flag3="+l+"&",c=this.get("proxy");if(this.get("calGap"))for(n=e.length-1;n>0;n--)e[n-1]=e[n-1]||0,e[n]-=e[n-1];else for(n=e.length-1;n>0;n--)e[n]&&(e[n]-=a);s+=i(e),c&&(s=c.replace("{url}",encodeURIComponent(s))),t(s)}}),r=function(e){var i,n,a,o=e.flag1,r=e.flag2,l=e.flag3IE,s=e.flag3Chrome,c=e.initTime,p=e.proxy,d=window.performance||window.webkitPerformance||window.msPerformance,u=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],h=[],f=l;if(d&&(i=d.timing)){"undefined"!=typeof i.msFirstPaint?u.push("msFirstPaint"):s&&(f=s),n=i[u[0]];for(var g=1,m=u.length;m>g;g++)a=i[u[g]],a=a?a-n:0,a>0&&h.push(g+"="+a);c&&h.push("30="+(c-n));var b="http://isdspeed.qq.com/cgi-bin/r.cgi?flag1="+o+"&flag2="+r+"&flag3="+f+"&"+h.join("&");p&&(b=p.replace("{url}",encodeURIComponent(b))),t(b)}};return{create:function(t){return new o(t)},reportPerformance:r}}),LBF.define("util.domain",function(){var t={},e=document.domain;try{t.url=location.href}catch(i){t.url=""}return t.topDomain=function(){var t=/\.(?:(?:edu|gov|com|org|net)\.cn|co\.nz)$/,i=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,n=t.test(e)?-3:i.test(e)?0:-2;return e.split(".").slice(n).join(".")}(),t.domain=function(){var i=/(?::[\/]{2}|:[\\]{3})([a-zA-Z0-9_\.]+)/;try{var n=i.exec(t.url);return n?n[1]||e:e}catch(a){return e}}(),t}),LBF.define("wpa.util.getReportData",function(require,exports,module){var t=require("lang.extend"),e=require("lang.browser"),i=require("wpa.conf.config"),n=i.gWin,a=require("lang.JSON"),o=2,r="click",l=0,s=1,c=2,p=3,d=4,u=5,h=8,f=function(t){var e,i=l;return(e=t.roleQQ)?i=e.value?s:c:t.roleTEL?i=p:t.roleKFEXT?i=u:t.roleGROUP?i=d:t.rolePUB&&(i=h),{tptype:i}};module.exports=exports=function(i,l,s){l=l||r;var c={mid:"",id:i.id,visitorid:i.guid,kfuin:i.fkfuin,kfext:i.fkfext,ldpg:n.location.href,refurl:"undefined"!=typeof document.referrer?document.referrer:"",ua:window.navigator.userAgent,eptype:e.isMobile?2:1},p=f(i),d=t(c,p);return l==r&&(d=t(d,{visitorId:i.visitorId,url:n.location.href,clickId:i.clickId,eventtp:o,title:encodeURIComponent(document.title)})),s?a.stringify(d):d}}),LBF.define("util.xssFilter",function(){return{htmlEncode:function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/ /g,"&nbsp;").replace(/=/g,"&#61;").replace(/`/g,"&#96;")},uriComponentEncode:function(t){return t=encodeURIComponent(t+""),t.replace(/~/g,"%7E").replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27").replace(/\?/g,"%3F").replace(/;/g,"%3B")},cssEncode:function(t){return(t+"").replace(/\b/g,"\\08 ").replace(/\t/g,"\\09 ").replace(/\n/g,"\\0A ").replace(/\f/g,"\\0C ").replace(/\r/g,"\\0D ").replace(/'/g,"\\27 ").replace(/"/g,"\\22 ").replace(/\\/g,"\\5C ").replace(/&/g,"\\26 ").replace(/\//g,"\\2F ").replace(/</g,"\\3C ").replace(/>/g,"\\3E ").replace(/\u2028/g,"\\002028 ").replace(/\u2029/g,"\\002029 ")},cssColorValidate:function(t){var e=/#[0-9a-fA-f]{3}([0-9a-fA-f]{3})?/,i=/[a-zA-Z]{1,20}/;return e.test(sStr)&&i.test(sStr)}}}),LBF.define("wpa.conf.colors",function(require,exports,module){var t=require("wpa.util.backgroundMixin");config=require("wpa.conf.config"),baseUrl=config.imageBaseUrl,png8Url=config.png8Url;var e={4:{0:{n:{s:"#3e87d5",e:"#327ccb",p:"#278cde"},h:{s:"#499ef8",e:"#327dcc",p:"#4ea9e9"}},1:{n:{s:"#0aa60a",e:"#009900",p:"#009900"},h:{s:"#14b914",e:"#009a00",p:"#3aa93a"}},2:{n:{s:"#f5b400",e:"#e0a501",p:"#f5b400"},h:{s:"#ffc934",e:"#e1a602",p:"#ffc934"}},3:{n:{s:"#ee685e",e:"#e05248",p:"#ee685e"},h:{s:"#f4867e",e:"#e05348",p:"#f3837b"}}},5:{0:{n:{p:"#278cde"}},1:{n:{p:"#009900"}},2:{n:{p:"#f5b400"}},3:{n:{p:"#ee685e"}},4:{n:{p:"#ffffff"}}},6:{0:{n:{p:"#278cde"},h:{p:"#4ea9e9"}},1:{n:{p:"#009900"},h:{p:"#3aa93a"}},2:{n:{p:"#f5b400"},h:{p:"#ffc934"}},3:{n:{p:"#ee685e"},h:{p:"#f3837b"}}},8:{0:{n:{p:baseUrl+"dialog1_bg_blue.png",p_png8:png8Url+"dialog1_bg_blue.png"},h:{p:"#278cde"}},1:{n:{p:baseUrl+"dialog1_bg_green.png",p_png8:png8Url+"dialog1_bg_green.png"},h:{p:"#009900"}},2:{n:{p:baseUrl+"dialog1_bg_yellow.png",p_png8:png8Url+"dialog1_bg_yellow.png"},h:{p:"#f5b400"}},3:{n:{p:baseUrl+"dialog1_bg_pink.png",p_png8:png8Url+"dialog1_bg_pink.png"},h:{p:"#ee685e"}}}},i={4:{0:{n:t({tmpl:1,colors:e[4][0].n}),h:t({tmpl:1,colors:e[4][0].h})},1:{n:t({tmpl:1,colors:e[4][1].n}),h:t({tmpl:1,colors:e[4][1].h})},2:{n:t({tmpl:1,colors:e[4][2].n}),h:t({tmpl:1,colors:e[4][2].h})},3:{n:t({tmpl:1,colors:e[4][3].n}),h:t({tmpl:1,colors:e[4][3].h})}},5:{0:{n:t({tmpl:2,colors:e[5][0].n})},1:{n:t({tmpl:2,colors:e[5][1].n})},2:{n:t({tmpl:2,colors:e[5][2].n})},3:{n:t({tmpl:2,colors:e[5][3].n})}},6:{0:{n:t({tmpl:2,colors:e[6][0].n}),h:t({tmpl:2,colors:e[6][0].h})},1:{n:t({tmpl:2,colors:e[6][1].n}),h:t({tmpl:2,colors:e[6][1].h})},2:{n:t({tmpl:2,colors:e[6][2].n}),h:t({tmpl:2,colors:e[6][2].h})},3:{n:t({tmpl:2,colors:e[6][3].n}),h:t({tmpl:2,colors:e[6][3].h})}},8:{0:{n:t({tmpl:3,colors:e[8][0].n}),h:t({tmpl:2,colors:e[8][0].h})},1:{n:t({tmpl:3,colors:e[8][1].n}),h:t({tmpl:2,colors:e[8][1].h})},2:{n:t({tmpl:3,colors:e[8][2].n}),h:t({tmpl:2,colors:e[8][2].h})},3:{n:t({tmpl:3,colors:e[8][3].n}),h:t({tmpl:2,colors:e[8][3].h})}}};module.exports=exports=i}),LBF.define("wpa.util.borderRadiusMixin",function(require,exports,module){var t=function(t){return["-webkit-border-radius: {{radius}}px;","-moz-border-radius: {{radius}}px;","border-radius: {{radius}}px;"].join("").replace(/\{\{radius\}\}/g,t||5)},e=function(t){return["-webkit-border-top-left-radius: {{radius}}px;","-moz-border-top-left-radius: {{radius}}px;","border-top-left-radius: {{radius}}px;","-webkit-border-top-right-radius: {{radius}}px;","-moz-border-top-right-radius: {{radius}}px;","border-top-right-radius: {{radius}}px;"].join("").replace(/\{\{radius\}\}/g,t||5)},i=function(t){return["-webkit-border-bottom-left-radius: {{radius}}px;","-moz-border-bottom-left-radius: {{radius}}px;","border-bottom-left-radius: {{radius}}px;","-webkit-border-bottom-right-radius: {{radius}}px;","-moz-border-bottom-right-radius: {{radius}}px;","border-bottom-right-radius: {{radius}}px;"].join("").replace(/\{\{radius\}\}/g,t||5)};module.exports=exports={getBorderRadius:t,getTopBorderRadius:e,getBottomBorderRadius:i}}),LBF.define("wpa.util.urlBackground",function(require,exports,module){var t=require("globalSettings"),e=t.png8Url,i={4:{blue:e+"fixed4_white_qq_blue.png",green:e+"fixed4_white_qq_green.png",yellow:e+"fixed4_white_qq_yellow.png",pink:e+"fixed4_white_qq_pink.png"}};module.exports=exports=function(t,e){return i[t]?i[t][e]:void 0}}),LBF.define("wpa.util.replaceImg3X",function(require,exports){return function(t,e){return e>2?t.replace(/2x\.png/g,"3x.png"):t}}),LBF.define("wpa.conf.tpl",function(require,exports,module){var t,e=require("wpa.conf.config"),i=e.imageBaseUrl,n=(require("lang.browser"),require("wpa.conf.defaultConst")),a=n.defaultEventTagName,o={1:"callChat",2:"callPhone",3:"callAddPal",4:"callAddGroup",5:"callAddFan"},r={IP5:["@media only screen ","and (min-device-width : 320px) ","and (max-device-width : 568px) "].join(""),IP6P:["@media only screen ","and (min-device-width : 414px) ","and (max-device-width : 736px) "].join("")},l=!1,s={1:{tpl:['<div class="wpa-container {theme} {closable} {has-avatar} {class}">','<div style="float:left;">','<a href="javascript:void(0);" name="'+a+'" data-event="callClose" class="icon-close"></a>','<img class="avatar" src="{avatar}" />',"</div>",'<div style="overflow:hidden;">','<div class="texts" style="width:calc(73%);">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<a class="btnText" style="background:{btnBgColor}" name="'+a+'" data-event="{event}">{btnText}</a>',"</div>","</div>"].join("")},2:{tpl:['<div class="wpa-container">','<a class="close" data-event="callClose" name="'+a+'" href="javascript:void(0);"></a>','<img class="avatar" src="{avatar}" />','<div class="content">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<a class="btn" style="background: {btnBgColor};" href="javascript:void(0);" name="'+a+'" data-event="{event}">{btnText}</a>',"</div>"].join("")},3:{tpl:['<div class="wpa-container {theme} {closable} {has-avatar} {class}">','<div style="float:left;">','<a href="javascript:void(0);" name="'+a+'" data-event="callClose" class="icon-close"></a>','<img class="avatar" src="{avatar}" />',"</div>",'<div style="overflow:hidden;">','<div class="texts" style="width:{calc};">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<div class="actions {has-btnText}">','<a class="action {hasAction2}" href="javascript:void(0);" name="'+a+'" data-event="{event2}"><span class="{icon2} icon"></span>','</a><span class="spliter {spliterLength}"></span><a class="action" href="javascript:void(0);" name="'+a+'" data-event="{event1}">','<span class="{icon1} icon"></span><br/>','<span class="btnText">{fixedBtnText}</span>',"</a>","</div>","</div>","</div>"].join("")},4:{tpl:['<div class="wpa-container {has-avatar}">','<div style="float:left;">','<img class="avatar" src="{avatar}" />',"</div>",'<div style="overflow:hidden;">','<div class="texts" style="width:{calc};">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<div class="actions {has-btnText}">','<a class="action {hasAction2}" href="javascript:void(0);" name="'+a+'" data-event="{event2}"><span class="{icon2} icon"></span>','</a><span class="spliter {spliterLength}"></span><a class="action" href="javascript:void(0);" name="'+a+'" data-event="{event1}">','<span class="{icon1} icon"></span>','<span class="btnText">{fixedBtnText}</span>',"</a>","</div>","</div>","</div>"].join("")},5:{tpl:['<div class="wpa-container {has-avatar}">','<div style="float:left;">','<img class="avatar" src="{avatar}" />',"</div>",'<div style="overflow:hidden;">','<div class="texts" style="width:calc(73%);">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<a href="javascript:void(0);" name="'+a+'" data-event="{event1}" class="button {btnWithoutIconAdd}">','<span class="icon-add {btnWithoutIconAdd}"></span>',"<span>{fixedBtnText}</span>","</a>","</div>","</div>"].join("")},6:{tpl:['<div class="wpa-container {theme} {closable} {has-avatar} {class}">','<div style="float:left;">','<a href="javascript:void(0);" name="'+a+'" data-event="callClose" class="icon-close"></a>','<img class="avatar" src="{avatar}" />',"</div>",'<div style="overflow:hidden;">','<div class="texts" style="width:calc(73%);">','<p class="title">{title}</p>','<p class="signature">{signature}</p>',"</div>",'<a href="javascript:void(0);" name="'+a+'" data-event="{event1}" class="button {btnWithoutIconAdd}">','<span class="icon-add"></span>',"<span>{fixedBtnText}</span>","</a>","</div>","</div>"].join("")}},c=require("wpa.util.getSize"),p=function(e){var n=e.ratio,a=e.type,o=c(n);return l||(t={1:{cssText:["* {{common}margin: 0;padding: 0;}",".wpa-container {{dib}position: relative;width: 100%;height: "+o(130)+"px;line-height: "+o(126)+"px;}",".theme-1 {background: #fff;}",".theme-2 {background-color: rgba(0, 0, 0, 0.8);}",".theme-3 {background: #f0f0f0;}",".wpa-container.middle {background: transparent;}",".avatar {width: "+o(86)+"px;height: "+o(86)+"px;border-radius: 50%;vertical-align: middle;margin-left: "+o(30)+"px;display: none;}",".has-avatar .avatar {{dib}}",".has-avatar .texts, .closable .texts {margin-left: "+o(10)+"px;}",".closable .avatar {margin-left: "+o(20)+"px;}",r.IP5+"{.closable .avatar {margin-left:"+o(20)+"px;}}",r.IP6P+"{.closable .avatar {margin-left:"+o(30)+"px;}}",".closable .icon-close {{dib}}",".middle.closable .icon-close {display:none;}",".middle.closable .texts {margin-left: "+o(30)+"px;}",".icon-qq {{dib}width: "+o(37)+"px;height: "+o(44)+"px;vertical-align: middle;background: url("+i+"/icon-qq-44-2x.png) no-repeat;background-size:"+o(37)+"px "+o(44)+"px;}",".icon-close {display: none;width: "+o(20)+"px;height: "+o(20)+"px;vertical-align: middle;background: url("+i+"/icon-close-2x.png) no-repeat;margin-left: "+o(20)+"px;background-size:"+o(20)+"px "+o(20)+"px;}",r.IP5+"{.icon-close {margin-left:"+o(20)+"px;}}",r.IP6P+"{.icon-close {margin-left:"+o(30)+"px;}}",".theme-2 .icon-close {background: url("+i+"/icon-close-for-black-2x.png) no-repeat;background-size:"+o(20)+"px "+o(20)+"px;}",".texts {{dib}vertical-align: middle;line-height: "+o(40)+"px;margin-top: "+o(0)+"px;margin-left: "+o(30)+"px;position:relative;top:-2px;}",".title {font-size: "+o(34)+"px;color: #000;}",".signature {font-size: "+o(28)+"px;color: #777;position:relative;top: 6px;}",".theme-2 .title, .theme-2 .signature {color: #fff;}",".middle .title {color: #000!important;}",".middle .signature {color: #999!important;}",".btnText {cursor: pointer;background: #0067ed;border-radius: "+o(10)+"px;{dib}font-size: "+o(28)+"px;color: #fff;height: "+o(26)+"px;max-width: "+o(147)+"px;line-height: "+o(26)+"px;padding: "+o(17)+"px "+o(18)+"px;position: absolute;top: "+o(35)+"px;right: "+o(30)+"px;margin-left: "+o(30)+"px;{ell}}",".theme-2 .btnText {background: transparent!important;border: "+o(2)+"px solid #fff;padding: "+o(15)+"px "+o(16)+"px;height: "+o(22)+"px;line-height:"+o(22)+"px;}"].join("")},2:{cssText:["* {{common}margin: 0;padding: 0;}",'.wpa-container {{dib}width: 404px;height: 200px;border-radius: 2px;position: relative;background: #fff;border: 1px solid #ebedf2;font-family:"microsoft yahei";font-size: 14px;{boxShadow}}',".close {position: absolute;top: 15px;right: 15px;{dib}width: 14px;height: 14px;background: url("+i+"/icon-close.png) no-repeat;background-size:14px 14px;}",".avatar {position: absolute;top: 26px;left: 26px;border-radius: 100%;width: 94px;height: 94px;}",".content {position: absolute;top: 35px;left: 146px;}",".title {font-size: 22px;{ell}}",".signature {color: #777;line-height: 24px;margin-top: 10px;width: 226px;}",".btn {{ell}text-decoration: none;color: #fff;position: absolute;right: 15px;bottom: 15px;width: 100px;border-radius: 2px;text-align: center;height: 35px;line-height: 35px;}"].join("")},3:{cssText:["* {{common}margin: 0;padding: 0;}",".wpa-container {{dib}position: relative;width: 100%;height: "+o(130)+"px;line-height: "+o(126)+"px;}",".theme-1 {background: #fff;}",".theme-2 {background-color: rgba(0, 0, 0, 0.8);}",".theme-3 {background: #f0f0f0;}",".wpa-container.middle {background: transparent!important;}",".avatar {width: "+o(86)+"px;height: "+o(86)+"px;border-radius: 50%;vertical-align: middle;margin-left: "+o(30)+"px;display: none;}",".has-avatar .avatar {{dib}}",".has-avatar .texts, .closable .texts {margin-left: "+o(18)+"px;}",r.IP5+"{.has-avatar .texts, .closable .texts {margin-left: "+o(18)+"px;}}",r.IP6P+"{.has-avatar .texts, .closable .texts {margin-left: "+o(30)+"px;}}",".closable .avatar {margin-left: "+o(18)+"px;}",r.IP5+"{.closable .avatar {margin-left:"+o(20)+"px;}}",r.IP6P+"{.closable .avatar {margin-left:"+o(30)+"px;}}",".closable .icon-close {{dib}}",".middle.closable .icon-close {display:none;}",".action .icon {position:relative; top: "+o(44)+"px;display: none;}",".action .icon.icon-qq {{dib}width: "+o(37)+"px;height: "+o(44)+"px;vertical-align: middle;background: url("+i+"/icon-qq-44-2x.png) no-repeat;background-size:"+o(37)+"px "+o(44)+"px;}",".action .icon.icon-im {{dib}width: "+o(44)+"px;height: "+o(44)+"px;vertical-align: middle;background: url("+i+"/icon-im-44-blue-2x.png) no-repeat;background-size:"+o(44)+"px "+o(44)+"px;}",".action .icon.icon-call {{dib}width: "+o(40)+"px;height: "+o(42)+"px;vertical-align: middle;background: url("+i+"/icon-call-44-2x.png) no-repeat;background-size:"+o(40)+"px "+o(42)+"px;}",".icon-close {display: none;width: "+o(20)+"px;height: "+o(20)+"px;vertical-align: middle;background: url("+i+"/icon-close-2x.png) no-repeat;margin-left: "+o(20)+"px;background-size:"+o(20)+"px "+o(20)+"px;}",r.IP5+"{.icon-close {margin-left:"+o(20)+"px;}}",r.IP6P+"{.icon-close {margin-left:"+o(30)+"px;}}",".theme-2 .icon-close {background: url("+i+"/icon-close-for-black-2x.png) no-repeat;background-size:"+o(20)+"px "+o(20)+"px;}",".texts {{dib}vertical-align: middle;line-height: "+o(40)+"px;margin-top: "+o(-4)+"px;margin-left: "+o(30)+"px;}",".title {font-size: "+o(34)+"px;color: #000;{ell}}",".signature {font-size: "+o(28)+"px;color: #777;{ell}position:relative;top: "+o(5)+"px;}",".theme-2 .title, .theme-2 .signature {color: #fff;}",".middle .title {color: #000!important;}",".middle .signature {color: #999!important;}",".spliter {{dib}vertical-align: middle;height: "+o(56)+"px;width: 1px;background: #d6d6d6;}",".spliter.spliter-long {height: "+o(80)+"px;}",".theme-2 .spliter {background: #565656;}",".middle .spliter {background: #d6d6d6!important;}",".actions {{dib}vertical-align: middle;position: absolute;right: 0;top: 0;height: "+o(130)+"px;}",".actions span.icon {cursor: pointer;}",".btnText {font-size: "+o(22)+"px;color: #777;display: none;}",".theme-2 .btnText, .theme-2 .title, .theme-2 .signature {color: #fff;}",".middle .btnText {color: #777!important;}",".action {margin-top: -3px;{dib}vertical-align: middle;text-align: center;line-height: "+o(40)+"px;position: relative;width: "+o(100)+"px;height: "+o(130)+"px;}",r.IP5+"{.action {width: "+o(100)+"px;}}",r.IP6P+"{.action {width: "+o(120)+"px;}}",".has-btnText .action {width: "+o(150)+"px;}",".has-btnText .action .icon {top: "+o(28)+"px;}",".action.no-action2 {display:none;}",".has-btnText .action .btnText {{dib}position: relative;top: "+o(30)+"px;{ell}}"].join("")},4:{cssText:["* {{common}margin: 0;padding: 0;}",".wpa-container {{dib}position: relative;width: 100%;height: "+o(140)+"px;line-height: "+o(136)+"px;background: transparent;}",".avatar {width: "+o(100)+"px;height: "+o(100)+"px;border-radius: 50%;vertical-align: middle;margin-left: "+o(0)+"px;display: none;}",".has-avatar .avatar {{dib}}",".has-avatar .texts {margin-left: "+o(22)+"px;}",".action .icon {position: absolute;top: "+o(44)+"px;left: "+o(40)+"px;display: none;}",".has-btnText .action .icon {left: "+o(57)+"px;}",".action .icon.icon-qq {{dib}width: "+o(37)+"px;height: "+o(44)+"px;vertical-align: middle;background: url("+i+"/icon-qq-44-2x.png) no-repeat;background-size:"+o(37)+"px "+o(44)+"px;}",".action .icon.icon-im {{dib}width: "+o(44)+"px;height: "+o(44)+"px;vertical-align: middle;background: url("+i+"/icon-im-44-blue-2x.png) no-repeat;background-size:"+o(44)+"px "+o(44)+"px;}",".action .icon.icon-call {{dib}width: "+o(40)+"px;height: "+o(42)+"px;vertical-align: middle;background: url("+i+"/icon-call-44-2x.png) no-repeat;background-size:"+o(40)+"px "+o(42)+"px;}",".texts {{dib}vertical-align: middle;line-height: "+o(40)+"px;margin-top: "+o(-4)+"px;margin-left: "+o(30)+"px;}",".title {font-size: "+o(34)+"px;color: #000;}",".signature {font-size: "+o(28)+"px;color: #777;position:relative; top:"+o(5)+"px;}",".spliter {{dib}vertical-align: middle;height: "+o(56)+"px;width: 1px;background: #d6d6d6;}",".spliter.spliter-long {height: "+o(80)+"px;}",".actions {{dib}vertical-align: middle;position: absolute;right: "+o(-20)+"px;top: 0;height: "+o(140)+"px;}",".actions span.icon {cursor: pointer;}",".btnText {font-size: "+o(22)+"px;color: #777;display: none;{ell}}",".action {{dib}vertical-align: middle;text-align: center;line-height: "+o(40)+"px;position: relative;width: "+o(122)+"px;height: "+o(140)+"px;}",r.IP5+".action {{width: "+o(100)+"px;}}",r.IP6P+".action {{width: "+o(120)+"px;}}",".has-btnText .action {width: "+o(150)+"px;}",".has-btnText .action .icon {top: "+o(28)+"px;}",".action.no-action2 {display:none;}",".has-btnText .action .btnText {{dib}{ell}position: relative;top: "+o(77)+"px;}"].join("")},5:{cssText:["* {{common}margin: 0;padding: 0;}",".wpa-container {{dib}position: relative;width: 100%;height: "+o(140)+"px;line-height: "+o(136)+"px;background: transparent;}",".avatar {width: "+o(100)+"px;height: "+o(100)+"px;border-radius: 50%;vertical-align: middle;margin-left: "+o(0)+"px;display: none;}",".has-avatar .avatar {{dib}}",".has-avatar .texts {margin-left: "+o(22)+"px;}",".texts {{dib}vertical-align: middle;line-height: "+o(40)+"px;margin-top: "+o(0)+"px;margin-left: "+o(30)+"px;position:relative;top:-2px;}",".title {font-size: "+o(34)+"px;color: #000;}",".signature {font-size: "+o(28)+"px;color: #777;position:relative;top:6px;}",".button {{dib}text-decoration: none;color: #00a5e0;font-size: "+o(24)+"px;padding: "+o(12)+"px "+o(16)+"px;max-width: "+o(110)+"px;height: "+o(24)+"px;line-height: "+o(24)+"px;text-align: center;border-radius: "+o(10)+"px;border: "+o(2)+"px solid #00a5e0;position: absolute;right: "+o(0)+"px;top: "+o(45)+"px;}",".btn-without-icon-add {padding: "+o(12)+"px "+o(30)+"px;}",".button.btn-without-icon-add .icon-add {display:none;}",".icon-add {{dib}width: "+o(18)+"px;height: "+o(18)+"px;background: url("+i+"/icon-add-2x.png) no-repeat;margin-right:"+o(10)+"px;background-size:"+o(18)+"px "+o(18)+"px;}"].join("")},6:{cssText:["* {{common}margin: 0;padding: 0;}",".wpa-container {{dib}position: relative;width: 100%;height: "+o(140)+"px;line-height: "+o(136)+"px;background: transparent;}",".theme-1 {background: #fff;}",".theme-2 {background-color: rgba(0, 0, 0, 0.8);}",".theme-3 {background: #f0f0f0;}",".wpa-container.middle {background: transparent;}",".closable .avatar {margin-left: "+o(20)+"px;}",r.IP5+"{.closable .avatar {margin-left:"+o(20)+"px;}}",r.IP6P+"{.closable .avatar {margin-left:"+o(30)+"px;}}",".closable .icon-close {{dib}}",".middle.closable .icon-close {display:none;}",".middle.closable .texts {margin-left: "+o(30)+"px;}",".avatar {width: "+o(100)+"px;height: "+o(100)+"px;border-radius: 50%;vertical-align: middle;margin-left: "+o(30)+"px;display: none;}",".icon-close {display: none;width: "+o(20)+"px;height: "+o(20)+"px;vertical-align: middle;background: url("+i+"/icon-close-2x.png) no-repeat;margin-left: "+o(20)+"px;background-size:"+o(20)+"px "+o(20)+"px;}",r.IP5+"{.icon-close {margin-left:"+o(20)+"px;}}",r.IP6P+"{.icon-close {margin-left:"+o(30)+"px;}}",".has-avatar .avatar {{dib}}",".has-avatar .texts {margin-left: "+o(22)+"px;}",".texts {{dib}vertical-align: middle;line-height: "+o(40)+"px;margin-top: "+o(0)+"px;margin-left: "+o(30)+"px;position:relative;top:-2px;}",".title {font-size: "+o(34)+"px;color: #000;}",".signature {font-size: "+o(28)+"px;color: #777;position:relative;top:6px;}",".theme-2 .icon-close {background: url("+i+"/icon-close-for-black-2x.png) no-repeat;background-size:"+o(20)+"px "+o(20)+"px;}",".button {{dib}text-decoration: none;color: #00a5e0;font-size: "+o(24)+"px;padding: "+o(12)+"px "+o(16)+"px;height: "+o(24)+"px;line-height: "+o(24)+"px;text-align: center;border-radius: "+o(10)+"px;border: "+o(2)+"px solid #00a5e0;position: absolute;right: "+o(30)+"px;top: "+o(45)+"px;}",r.IP5+"{.button {top: "+o(45)+"px;padding: "+o(12)+"px "+o(16)+"px;font-size: "+o(24)+"px;height: "+o(24)+"px;line-height: "+o(24)+"px;}}",r.IP6P+"{.button {top: "+o(38)+"px;padding: "+o(12)+"px "+o(24)+"px;font-size: "+o(28)+"px;height: "+o(36)+"px;line-height: "+o(36)+"px;}}",".icon-add {{dib}width: "+o(18)+"px;height: "+o(18)+"px;background: url("+i+"/icon-add-2x.png) no-repeat;margin-right:"+o(10)+"px;background-size:"+o(18)+"px "+o(18)+"px;}",".theme-2 .title, .theme-2 .signature, .theme-2 .button {color: #fff;}",".theme-2 .button {border-color: #fff;}",".theme-2 .icon-add {background: url("+i+"/icon-add-for-black-2x.png) no-repeat;background-size:9px 9px;}",".middle .title {color: #000!important;}",".middle .signature {color: #999!important;}",".middle .button {color: #00a5e0!important;border-color: #00a5e0!important;}",".btn-without-icon-add {padding: "+o(12)+"px "+o(30)+"px;}",".button.btn-without-icon-add .icon-add {display:none;}",".middle .icon-add {background: url("+i+"/icon-add-2x.png) no-repeat;background-size:9px 9px;}"].join("")}},l=!0),t[a].cssText};module.exports=exports=function(t,e){t=t||1,e=e||{};var i=s[t],n=e.ratio,a=i.tpl,r=p({type:t,ratio:n}),l=void 0!==typeof e.hasBtnText&&e.hasBtnText?"has-btnText":"",c=void 0!==typeof e.hasAvatar&&e.hasAvatar?"has-avatar":"",d=e.eventList||[],u=e.fixedBtnText||"",h=e.iconList||[],f=e.btnWithoutIconAdd?"btn-without-icon-add":"",g=d[0]||"",m=d[1]||"",b=h[0]||"",x=h[1]||"",v=x?"":"no-action2",w=x?"":"spliter-long",_=x?"calc(60%)":"calc(73%)";l&&!u&&(a=a.replace(/fixedBtnText/,"btnText"));var y=a.replace(/\{has-avatar\}/g,c).replace(/\{has-btnText\}/g,l).replace(/\{fixedBtnText\}/g,u).replace(/\{icon1\}/g,b).replace(/\{icon2\}/g,x).replace(/\{event1\}/g,g).replace(/\{event2\}/g,m).replace(/\{spliterLength\}/g,w).replace(/\{hasAction2\}/g,v).replace(/\{btnWithoutIconAdd\}/g,f).replace(/\{calc\}/g,_);return function(t){t=t||{};var e=o[t.event]||o[1],i=y.replace(/\{event\}/g,e);return n>2&&(r=r.replace(/2x\.png/g,"3x.png")),{tpl:i,cssText:r}}}}),LBF.define("wpa.util.css",function(require,exports,module){var t=require("util.contains"),e=document,i=e.defaultView&&e.defaultView.getComputedStyle?function(t,i){i=i.replace(/([A-Z])/g,"-$1").toLowerCase();var n=e.defaultView.getComputedStyle(t,"");return n&&n.getPropertyValue(i)}:function(t,e){return t.currentStyle[e]},n=function(i,n){if(!t(i,e))return n();var a,o={opacity:0,filter:"alpha(opacity=0)"},r=i.parentNode,l=i.nextSibling,s=e.createElement("div");return s.appendChild(i),css(s,o),css(i,o),e.body.appendChild(s),a=n(),l?r.insertBefore(i,l):r.appendChild(i),s.parentNode.removeChild(s),a};module.exports=function(t,e,a){var o;if(a)o=e+":"+a;else{if("string"==typeof e)return n(t,function(){return i(t,e)});"object"!=typeof e&&new TypeError("Arg style should be string or object"),o=[];for(var r in e)o.push(r+":"+e[r]);o=o.join(";")}return o=o.replace(/([A-Z])/g,"-$1").toLowerCase(),t.style.cssText+=";"+o,t}}),LBF.define("util.report",function(){var t={};return function(e){var i=+new Date,n="log_"+i,a=t[n]=new Image;return a.onload=a.onerror=function(){t[n]=null},e+=(e.indexOf("?")>-1?"&":"?")+i,a.src=e,arguments.callee}}),LBF.define("util.Attribute",function(require,exports,module){var t=require("lang.extend"),e="_ATTRIBUTES",i="_VALIDATES";exports.set=function(i,n,a){var o=this[e];if(o||(o=this[e]={}),"object"!=typeof i){var r=o[i];return o[i]=n,this.validate(o)?n===r||a&&a.silence||!this.trigger||(this.trigger("change:"+i,[o[i],r]),this.trigger("change",[o])):o[i]=r,this}a=n;var l=t({},o,i);if(this.validate(l)&&(this[e]=l,(!a||!a.silence)&&this.trigger)){
var s=0;for(var c in i)i.hasOwnProperty(c)&&l[c]!==o[c]&&(s++,this.trigger("change:"+c,[l[c],o[c]]));s>0&&this.trigger("change",[l])}return this},exports.get=function(t){return this[e]?this[e][t]:null},exports.attributes=function(){return this[e]||{}},exports.addValidate=function(t){var e=this[i];return e||(e=this[i]=[]),e.push(t),this},exports.removeValidate=function(t){if(!t)return this[i]=null,this;for(var e=this[i],n=0,a=e.length;a>n;n++)e[n]===t&&(e.splice(n,1),--n,--a);return this},exports.validate=function(t){var n=this[i];if(!n)return!0;t=t||this[e];for(var a=0,o=n.length;o>a;a++)if(n[a].call(this,t)===!1)return!1;return!0}}),LBF.define("wpa.util.backgroundMixin",function(require,exports,module){var t={1:["background: {{p}};","background: -moz-linear-gradient(top, {{s}} 0%, {{e}} 100%);","background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,{{s}}), color-stop(100%,{{e}}));","background: -webkit-linear-gradient(top, {{s}} 0%,{{e}} 100%);","background: -o-linear-gradient(top, {{s}} 0%,{{e}} 100%);","background: -ms-linear-gradient(top, {{s}} 0%,{{e}} 100%);","background: linear-gradient(to bottom, {{s}} 0%,{{e}} 100%);",'filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="{{s}}", endColorstr="{{e}}",GradientType=0 );'].join(""),2:"background: {{p}};",3:"background: url({{p}});_background: url({{p_png8}});"},e=function(e){var i;switch(e.tmpl){case 1:i=1;break;case 2:i=2;break;case 3:i=3;break;default:i=1}return t[i].replace(/\{\{p\}\}/g,e.colors.p).replace(/\{\{s\}\}/g,e.colors.s).replace(/\{\{e\}\}/g,e.colors.e).replace(/\{\{p_png8\}\}/g,e.colors.p_png8||"")};module.exports=exports=e}),LBF.define("util.contains",function(){return document.createElement("div").compareDocumentPosition?function(t,e,i){if(!i&&t===e)return!1;var n=t.compareDocumentPosition(e);return 20==n||0==n}:function(t,e,i){return i||t!==e?e==document?t.contains(document.body):t.contains(e):!1}}),LBF.use("wpa.app",function(t){t.init(),t.lbf=LBF,LBF.noConflict()});