function strip_stack_span(t){var e=$("<div>"+t+"</div>");e.find("li,colgroup,a").each(function(){""==$.trim($(this).text())&&0==$(this).find("img").size()&&$(this).remove()});var a=!1;do a=!1,e.find("span:has(span)").each(function(t){var e=$(this).find("> span");if(e.size()>1)return void $(this).find("span").each(function(){""==$.trim($(this).text())&&$(this).replaceWith($(this).html())});if(0!=e.size()&&$.trim($(this).text())==$.trim(e.text())){a=!0;var r=$(this).attr("style"),i=e.attr("style"),o="";r&&""!=r&&(o+=";"+r),i&&""!=i&&(o+=";"+i);var n="";$(this).find("> *").each(function(){n+="SPAN"==this.tagName?$(e).html():$(this).prop("outerHTML")}),$(this).attr("style",o).html(n)}});while(a);return e.html()}function strip_tags(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var a=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,r=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(r,"").replace(a,function(t,a){return e.indexOf("<"+a.toLowerCase()+">")>-1?t:""})}function htmlspecialchars_decode(t,e){var a=0,r=0,i=!1;"undefined"==typeof e&&(e=2),t=t.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var o={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===e&&(i=!0),"number"!=typeof e){for(e=[].concat(e),r=0;r<e.length;r++)0===o[e[r]]?i=!0:o[e[r]]&&(a|=o[e[r]]);e=a}return e&o.ENT_HTML_QUOTE_SINGLE&&(t=t.replace(/&#0*39;/g,"'")),i||(t=t.replace(/&quot;/g,'"')),t=t.replace(/&amp;/g,"&")}function strip_imgthumb_opr(t){var e=t.indexOf("@");e>0&&(t=t.substring(0,e));var a=t.indexOf("?");return a>0&&(t=t.substring(0,a)),t}function base64_decode(t){var e,a,r,i,o,n,s,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,u=0,h="",f=[];if(!t)return t;t+="";do i=d.indexOf(t.charAt(c++)),o=d.indexOf(t.charAt(c++)),n=d.indexOf(t.charAt(c++)),s=d.indexOf(t.charAt(c++)),l=i<<18|o<<12|n<<6|s,e=l>>16&255,a=l>>8&255,r=255&l,64==n?f[u++]=String.fromCharCode(e):64==s?f[u++]=String.fromCharCode(e,a):f[u++]=String.fromCharCode(e,a,r);while(c<t.length);return h=f.join(""),decodeURIComponent(escape(h.replace(/\0+$/,"")))}function base64_encode(t){var e,a,r,i,o,n,s,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,u=0,h="",f=[];if(!t)return t;t=unescape(encodeURIComponent(t));do e=t.charCodeAt(c++),a=t.charCodeAt(c++),r=t.charCodeAt(c++),l=e<<16|a<<8|r,i=l>>18&63,o=l>>12&63,n=l>>6&63,s=63&l,f[u++]=d.charAt(i)+d.charAt(o)+d.charAt(n)+d.charAt(s);while(c<t.length);h=f.join("");var p=t.length%3;return(p?h.slice(0,p-3):h)+"===".slice(p||3)}function str_replace(t,e,a,r){var i=0,o=0,n="",s="",l=0,d=0,c=[].concat(t),u=[].concat(e),h=a,f="[object Array]"===Object.prototype.toString.call(u),p="[object Array]"===Object.prototype.toString.call(h);for(h=[].concat(h),r&&(this.window[r]=0),i=0,l=h.length;l>i;i++)if(""!==h[i])for(o=0,d=c.length;d>o;o++)n=h[i]+"",s=f?void 0!==u[o]?u[o]:"":u[0],h[i]=n.split(c[o]).join(s),r&&h[i]!==n&&(this.window[r]+=(n.length-h[i].length)/c[o].length);return p?h:h[0]}function getSelectionHtml(t){var e=current_editor.selection.getRange();if("BODY"==e.startContainer.tagName&&e.startContainer===e.endContainer&&e.endOffset>0&&e.endOffset===e.startContainer.childNodes.length)return getEditorHtml(t);e.select();var a=current_editor.selection.getNative(),r=a.getRangeAt(0),i=r.cloneContents(),o=document.createElement("div");o.appendChild(i);var n=o.innerHTML;return""==n?"":parse135EditorHtml(n)}function getDealingHtml(){var t=getSelectionHtml(!0);return""==t?current_editor.currentActive135Item()?$(current_editor.currentActive135Item()).html():getEditorHtml(!0):t}function setDealingHtml(t){t=$.trim(t);var e=getSelectionHtml();return""!=e?(insertHtml(t),custom_style_set=!0,void current_editor.undoManger.save()):current_editor.currentActive135Item()?($(current_editor.currentActive135Item()).html(t),void current_editor.undoManger.save()):(current_editor.setContent(t),void current_editor.undoManger.save())}function parse135EditorHtml(t,e){t=parseMmbizUrl(t);var a=$("<div>"+t+" </div>");a.find("*").each(function(){if(this.style.transform)return void setElementTransform(this,this.style.transform);if("SECTION"==this.tagName){var t=$(this).attr("style");if(t){if(t=t.toLowerCase(),t.indexOf("box-sizing")>=0)return;(t.indexOf("padding")>=0||t.indexOf("border")>=0)&&$(this).css("box-sizing","border-box")}}else{if("IMG"==this.tagName||"BR"==this.tagName||"TSPAN"==this.tagName||"TEXT"==this.tagName||"IMAGE"==this.tagName)return;if("STRONG"==this.tagName||"SPAN"==this.tagName||"B"==this.tagName||"EM"==this.tagName||"I"==this.tagName)return;if("P"==this.tagName)return void $(this).css("white-space","normal");if("H1"==this.tagName||"H2"==this.tagName||"H3"==this.tagName||"H4"==this.tagName||"H5"==this.tagName||"H6"==this.tagName)return $(this).css("font-weight","bold"),this.style.fontSize||$(this).css({"font-size":"16px"}),void(this.style.lineHeight||$(this).css({lineHeight:"1.6em"}));if("OL"==this.tagName||"UL"==this.tagName||"DL"==this.tagName)return void $(this).css({margin:"0px",padding:"0 0 0 30px"})}"TD"!=this.tagName&&"TH"!=this.tagName||""!=this.style.padding||""!=this.style.paddingLeft||""!=this.style.paddingRight||""!=this.style.paddingTop||""!=this.style.paddingBottom||$(this).css({margin:"5px 10px"})});var t=a.html();return""==$.trim(t)?"":t}function setElementTransform(t,e){if("none"!=e){var a=$(t).attr("style");a=a.replace(/;\s*transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim,";"),a=a.replace(/\s*\-[a-z]+\-transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim,""),a=a+";transform: "+e+";-webkit-transform: "+e+";-moz-transform: "+e+";-ms-transform: "+e+";-o-transform: "+e+";",a=a.replace(";;",";"),$(t).attr("style",a)}}function parseMmbizUrl(t){return t=t.replace(/https:\/mmbiz./g,"https://mmbiz."),t=t.replace(/https:\/\/mmbiz.qlogo.cn/g,"http://mmbiz.qpic.cn")}function setEditorHtml(t){t=strip_stack_span(t),t=parseMmbizUrl(t),current_editor.undoManger.save(),current_editor.setContent(t),current_editor.undoManger.save()}function insertHtml(t,e){t=parseMmbizUrl(t),t=current_editor.parseInsertPasteSetHtml(t);var a=$.trim(getSelectionHtml(!0));if(""!=a){if(e){var r=$("<div>"+a+"</div>");r.find("*").each(function(){$(this).removeAttr("style"),$(this).removeAttr("class"),$(this).removeAttr("placeholder")});for(var i in e.replace)r.find(i).each(function(){e.replace[i]&&""!=e.replace[i]?$(this).replaceWith("<"+e.replace[i]+">"+$(this).html()+"</"+e.replace[i]+">"):$(this).replaceWith($(this).html())});for(var i in e.attributes)r.find(i).attr(e.attributes[i]);for(var i in e.style)r.find(i).attr("style",e.style[i]);for(var i in e["class"])r.find(i).attr("class",e["class"][i]);for(var i in e.css)r.find(i).css(e.css[i]);return t=r.html(),current_editor.execCommand("insertHtml",t),current_editor.undoManger.save(),!0}a=strip_tags(a,"<br><p><h1><h2><h3><h4><h5><h6><img>");var r=$("<div>"+a+"</div>");r.find(".assistant").remove(),r.find("*").each(function(){$(this).removeAttr("style"),$(this).removeAttr("class"),$(this).removeAttr("placeholder")});var o=$("<div>"+t+"</div>");o.find("> ._135editor").siblings("p").each(function(t){""!=$(this).html()&&"&nbsp;"!=$(this).html()&&"<br>"!=$(this).html()&&"<br/>"!=$(this).html()||"undefined"==typeof $(this).attr("style")&&$(this).remove()}),r.find("h1,h2,h3,h4,h5,h6").each(function(t){var e=o.find(".135title").eq(t);e&&e.size()>0?(e.html($.trim($(this).text())),$(this).remove()):$(this).replaceWith("<p>"+$(this).text()+"</p>")}),r.find("img").each(function(t){var e=o.find(".135bg").eq(t);e&&e.size()>0&&(e.css("background-image","url("+$(this).attr("src")+")"),$(this).remove())});var n=0;r.find("img").each(function(){for(var t=o.find("img").eq(n);t.hasClass("assistant");)n++,t=o.find("img").eq(n);t&&t.size()>0&&0==$(t).parents(".135brush").size()&&(t.attr("src",$(this).attr("src")),"circle"!=t.parent().attr("data-role")&&"square"!=t.parent().attr("data-role")&&"bgmirror"!=t.parent().attr("data-role")||t.parent().css("backgroundImage","url("+$(this).attr("src")+")"),n++,$(this).remove())}),r.find("img").each(function(t){var e=o.find("image").eq(t);e&&e.size()>0&&(e.attr("xlink:href",$(this).attr("src")),$(this).remove())});var s=o.find(".135brush"),l=s.size();if(l>0)if(1==l){var d=o.find(".135brush:first");if("text"==d.data("brushtype"))d.html($.trim(r.text()));else{r.contents().each(function(t){var e=this;"IMG"!=this.tagName&&(""!=$.trim($(e).text())&&"BR"!=this.tagName&&""!=$(this).html()&&"&nbsp;"!=$(this).html()&&"<br>"!=$(this).html()&&"<br/>"!=$(this).html()||$(this).remove())});var c=d.data("style");c&&r.find("*").each(function(){$(this).attr("style",c)});var t=r.html();""!=t&&d.html(t)}}else r.contents().each(function(t){var e=this;if(3==e.nodeType&&(e=$("<p>"+$(this).text()+"</p>").get(0)),l>t){var a=s.eq(t);if("text"==a.data("brushtype"))a.html($.trim($(e).text()));else{var r=a.data("style");r&&$(e).attr("style",r),a.empty().append($(e))}}else{var a=s.eq(l-1);if("text"==a.data("brushtype"))a.append($(e).text());else{var r=a.data("style");r&&$(e).attr("style",r),a.append($(e))}}});return t=o.html(),current_editor.execCommand("insertHtml",t),current_editor.undoManger.save(),!0}return current_editor.execCommand("insertHtml",t),current_editor.undoManger.save(),!0}function resetMapUrl(){$(current_editor.selection.document).find("img").each(function(){var t=$(this),e=$(this).attr("mapurl");if(e){var a=$(this).attr("usemap");a&&$(a).each(function(){$(this).remove()}),a=randomString(10),t.attr("usemap",a),t.after('<map name="'+a+'" id="'+a+'" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="'+e+'" shape="default" target="_blank"/></map><section><map name="'+a+'" id="'+a+'" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="'+e+'" shape="default" target="_blank"/></map></section>')}})}function setBackgroundColor(t,e,a){if(isGreyColor(t))return!1;a&&current_editor.undoManger.save();var r=current_editor.currentActive135Item();return!replace_full_color&&r?(parseObject(r,t,e),r.attr("data-color",t),r.attr("data-custom",t),void current_editor.undoManger.save()):void(replace_full_color&&(parseObject($(current_editor.selection.document),t,e),$(current_editor.selection.document).find("._135editor").each(function(){$(this).attr("data-color",t)}),a&&current_editor.undoManger.save()))}function parseObject(t,e,a){return isGreyColor(e)?!1:(t.find("*").each(function(){if(this.nodeName&&"HTML"!=this.nodeName&&"HEAD"!=this.nodeName&&"STYLE"!=this.nodeName&&"LINK"!=this.nodeName&&"BODY"!=this.nodeName){if("HR"==this.nodeName||"hr"==this.nodeName){var t=$(this).attr("style");return void $(this).attr("style",t+";border-color:"+e+";")}if(""!=this.nodeName&&""!=$(this).attr("style")&&"fix"!=$(this).attr("data-ct")){if($(this).attr("fill"))return void $(this).attr("fill",e);var r=$(this).parents("._135editor:first").attr("data-color"),t=$(this).attr("style");if(r!=e){if(r&&t&&t.indexOf("text-shadow")>=0){var i=str_replace(rgb2hex(r),e,t);i=str_replace(hex2rgb(r),e,i),$(this).attr("style",i)}var o,n=$(this).attr("data-clessp")?$(this).attr("data-clessp"):"50%",s=!1,l=$(this).get(0).style.backgroundColor;if(l&&"initial"!==l&&"transparent"!==l&&""!==l)if("undefined"!=typeof $(this).attr("data-bgless")){var d,c=$(this).attr("data-bglessp")?$(this).attr("data-bglessp"):"30%";"true"==$(this).attr("data-bgless")||1==$(this).attr("data-bgless")?isLightenColor(e)?(d=getColor(rgb2hex(e),"darken",c),d=getColor(rgb2hex(d),"saturate","20%")):d=getColor(rgb2hex(e),"lighten",c):d=getColor(rgb2hex(e),$(this).attr("data-bgless"),c),$(this).attr("data-bgopacity")&&(d=getColor(rgb2hex(d),"fadeout",$(this).attr("data-bgopacity"))),s=!0,$(this).css("backgroundColor",d),isLightenColor(d)?(o=getColor(rgb2hex(d),"darken",n),o=getColor(rgb2hex(o),"saturate","20%")):o=a,$(this).css("color",o)}else if($(this).attr("data-bgopacity")){var d;d=getColor(rgb2hex(e),"fadeout",$(this).attr("data-bgopacity")),o=isLightenColor(d)?getColor(rgb2hex(d),"darken",n):a,$(this).css("backgroundColor",d),$(this).css("color",o)}else if(isGreyColor(l)){var u=$(this).get(0).style.color;u&&""!=u&&"inherit"!=u&&!isGreyColor(u)&&$(this).css("backgroundColor")!=e&&$(this).css("color",e)}else{s=!0,$(this).css("backgroundColor",e);var u=$(this).get(0).style.color;"inherit"!=u&&(o=isLightenColor(e)?getColor(rgb2hex(e),"darken",n):a,$(this).css("color",o))}else{var u=$(this).get(0).style.color;if(u&&""!=u&&"inherit"!=u&&!isGreyColor(u))if($(this).attr("data-txtless")){var h=$(this).attr("data-txtlessp")?$(this).attr("data-txtlessp"):"30%";o=getColor(rgb2hex(e),$(this).attr("data-txtless"),h),$(this).css("color",o)}else if(isLightenColor(e))o=getColor(rgb2hex(e),"darken",n),$(this).css("color",o);else{var f=getPrarentBgColor($(this));f==e?(o=getColor(rgb2hex(e),"lighten",n),$(this).css("color",o)):$(this).css("color",e)}}if($(this).attr("data-bcless")){var p=e;if(isLightenColor(e)){var n=$(this).attr("data-bclessp")?$(this).attr("data-bclessp"):"20%";"darken"==$(this).attr("data-bcless")?p=getColor(rgb2hex(e),"darken",n):(p=getColor(rgb2hex(e),"darken",n),$(this).attr("data-bcless")&&"auto"!=$(this).attr("data-bcless")&&"true"!=$(this).attr("data-bcless")&&(p=getColor(rgb2hex(e),$(this).attr("data-bcless"),n)))}else{var n=$(this).attr("data-bclessp")?$(this).attr("data-bclessp"):"20%";"lighten"==$(this).attr("data-bcless")||"auto"==$(this).attr("data-bcless")||"true"==$(this).attr("data-bcless")?p=getColor(rgb2hex(e),"lighten",n):$(this).attr("data-bcless")&&"auto"!=$(this).attr("data-bcless")&&"true"!=$(this).attr("data-bcless")&&(p=getColor(rgb2hex(e),$(this).attr("data-bcless"),n))}$(this).attr("data-bdopacity")&&(p=getColor(rgb2hex(p),"fadeout",$(this).attr("data-bdopacity"))),this.style.borderBottomColor||this.style.borderTopColor||this.style.borderLeftColor||this.style.borderRightColor?("transparent"!=this.style.borderBottomColor&&"rgb(255, 255, 255)"!=this.style.borderBottomColor.toLowerCase()&&"#fff"!=this.style.borderBottomColor.toLowerCase()&&"initial"!=this.style.borderBottomColor&&(this.style.borderBottomColor=p),"transparent"!=this.style.borderTopColor&&"rgb(255, 255, 255)"!=this.style.borderTopColor.toLowerCase()&&"#fff"!=this.style.borderTopColor.toLowerCase()&&"initial"!=this.style.borderTopColor&&(this.style.borderTopColor=p),"transparent"!=this.style.borderLeftColor&&"rgb(255, 255, 255)"!=this.style.borderLeftColor.toLowerCase()&&"#fff"!=this.style.borderLeftColor.toLowerCase()&&"initial"!=this.style.borderLeftColor&&(this.style.borderLeftColor=p),"transparent"!=this.style.borderRightColor&&"rgb(255, 255, 255)"!=this.style.borderRightColor.toLowerCase()&&"#fff"!=this.style.borderRightColor.toLowerCase()&&"initial"!=this.style.borderRightColor&&(this.style.borderRightColor=p)):"transparent"!==this.style.borderColor&&"initial"!==this.style.borderColor&&(this.style.borderColor=p)}else{var p=e;if($(this).attr("data-bdopacity")&&(p=getColor(rgb2hex(e),"fadeout",$(this).attr("data-bdopacity"))),this.style.borderBottomColor||this.style.borderTopColor||this.style.borderLeftColor||this.style.borderRightColor)"transparent"!=this.style.borderBottomColor&&"initial"!=this.style.borderBottomColor&&setColor(this,"borderBottomColor",p),"transparent"!=this.style.borderTopColor&&"initial"!=this.style.borderTopColor&&setColor(this,"borderTopColor",p),"transparent"!=this.style.borderLeftColor&&"initial"!=this.style.borderLeftColor&&setColor(this,"borderLeftColor",p),"transparent"!=this.style.borderRightColor&&"initial"!=this.style.borderRightColor&&setColor(this,"borderRightColor",p);else{var g=this.style.borderColor;"transparent"===g||"initial"===g||isGreyColor(g)||(this.style.borderColor=p)}}var m=$(this).css("backgroundImage");if(m.indexOf("linear-gradient(")>=0){var v=$(this).attr("style"),b=new RegExp("rgb\\([\\d|,|\\s]+?\\)","ig"),_=m.match(b);if(_){if($(this).attr("data-bgless")){var c=$(this).attr("data-bglessp")?$(this).attr("data-bglessp"):"30%";main_color=getColor(rgb2hex(e),$(this).attr("data-bgless"),c)}else isLightenColor(e)?main_color=getColor(rgb2hex(e),"saturate","20%"):(main_color=getColor(rgb2hex(e),"lighten","5%"),main_color=getColor(rgb2hex(main_color),"desaturate","10%"),main_color=getColor(rgb2hex(main_color),"fadein","20%"));$(this).attr("data-grless")?gradient_color=getColor(rgb2hex(main_color),$(this).attr("data-grless"),$(this).attr("data-grlessp")):$(this).attr("data-gradient")?gradient_color=$(this).attr("data-gradient"):gradient_color=getColor(rgb2hex(main_color),"lighten","30%"),isLightenColor(main_color)?(o=getColor(rgb2hex(main_color),"darken","50%"),o=getColor(rgb2hex(o),"saturate","30%")):o=getColor(rgb2hex(main_color),"lighten","50%");for(var y=0;y<_.length;y++)isGreyColor(_[y])||(v="reverse"==$(this).attr("data-grorder")?y%2==0||y>0&&_[y]==_[y-1]?v.replace(_[y],gradient_color).replace(_[y].replace(/ /g,""),gradient_color):v.replace(_[y],main_color).replace(_[y].replace(/ /g,""),main_color):y%2==0||y>0&&_[y]==_[y-1]?v.replace(_[y],main_color).replace(_[y].replace(/ /g,""),main_color):v.replace(_[y],gradient_color).replace(_[y].replace(/ /g,""),gradient_color));$(this).attr("style",v),$(this).css("color",o)}}}}}}),t)}function parseHtml(t,e,a){var r=$('<div id="editor-content">'+t+"</div>");r=parseObject(r,e,a);var i=r.html();return r=null,i}function style_click(t){var e="http://www.135editor.com/editor_styles/click_num";return ajaxAction(e,{id:t}),!1}function setFavorColor(t,e){var a="http://www.135editor.com/editor_styles/setFavorColor";ajaxAction(a,{colors:t},null,e)}function color_click(t){t=hex2rgb(t);var e="http://www.135editor.com/colors/click";return ajaxAction(e,{color:t}),!1}function setColor(t,e,a){var r=$(t).css(e);"transparent"!==r&&"initial"!==r&&(isGreyColor(r)||$(t).css(e,a))}function getPrarentBgColor(t){if(!t.parent().get(0))return"";if(t.parent().get(0).tagName&&"BODY"==t.parent().get(0).tagName){if(t.parent().get(0).style){var e=t.parent().get(0).style.backgroundColor;return e}return""}if(t.parent().get(0).style){var e=t.parent().get(0).style.backgroundColor;return e&&"initial"!==e&&"transparent"!==e&&""!==e?e:getPrarentBgColor(t.parent())}return""}function rgb2hex(t){return rgb=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),rgb&&4===rgb.length?"#"+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2):t}function hex2rgb(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,a=t.toLowerCase();if(a&&e.test(a)){if(4===a.length){for(var r="#",i=1;4>i;i+=1)r+=a.slice(i,i+1).concat(a.slice(i,i+1));a=r}for(var o=[],i=1;7>i;i+=2)o.push(parseInt("0x"+a.slice(i,i+2)));return"rgb("+o.join(",")+")"}return a}function isLightenColor(t){var e=rgb2hex(t),a=""+e.substring(1,3),r=""+e.substring(3,5),i=""+e.substring(5,7);return a>"C0"&&r>"C0"&&i>"C0"}function isGreyColor(t){var e=rgb2hex(t),a=""+e.substring(1,3),r=""+e.substring(3,5),i=""+e.substring(5,7);return a==r&&r==i}function getColor(t,e,a){var r=tinycolor(t);return"function"==typeof r[e]?(a=parseInt(a.replace("%","")),hex2rgb(r[e](a).toString())):"fade"==e||"fadein"==e||"fadeout"==e?(a.indexOf("%")>0&&(a=a.replace("%",""),a=parseInt(a)/100),"fadein"==e?a+=r.getAlpha():"fadeout"==e&&(a=r.getAlpha()-a),hex2rgb(r.setAlpha(a).toString())):t}function LightenDarkenColor(t,e){var a=!1;"#"==t[0]&&(t=t.slice(1),a=!0);var r=parseInt(t,16),i=(r>>16)+e;i>255?i=255:0>i&&(i=0);var o=(r>>8&255)+e;o>255?o=255:0>o&&(o=0);var n=(255&r)+e;return n>255?n=255:0>n&&(n=0),(a?"#":"")+(n|o<<8|i<<16).toString(16)}function openTplModal(){$("#templateModal").modal("show"),$("#template-modal-body").html("正在加载").load(BASEURL+"/editor_styles/myTemplates #my-templates",function(){$("#my-templates .nav-tabs a:first").tab("show")})}function set_style(t){ckeditors.WxMsgContent.execCommand("removeFormat");var e=ckeditors.WxMsgContent.getSelection().getStartElement();if("img"==e.getName())e.setStyles(t);else{var a=new CKEDITOR.style({element:e.getName(),styles:t});ckeditors.WxMsgContent.applyStyle(a)}}function getPreferences(t){var e=current_editor.getPreferences("editor135");return e&&e[t]?e[t]:null}function setPreferences(t,e){var a=current_editor.getPreferences("editor135"),r={};"string"==typeof t?r[t]=e:r=t,a||(a={}),$.extend(a,r),current_editor.setPreferences("editor135",a)}function applyParagraph(t){var e;if("all"==t){var a=current_editor.selection.document;e=$(a)}else{if(!current_editor.currentActive135Item())return;e=current_editor.currentActive135Item()}$(e).find("p").each(function(){$(this).css("lineHeight",$("#paragraph-lineHeight").val()),$(this).css("fontFamily",$("#paragraph-fontFamily").val()),$(this).css("fontSize",$("#paragraph-fontSize").val()),$(this).css("textIndent",$("#paragraph-textIndent").val()),$(this).css("paddingTop",$("#paragraph-paddingTop").val()),$(this).css("paddingBottom",$("#paragraph-paddingBottom").val())})}function clean_135helper(){var t=current_editor.selection.document;$(t).find("._135editor").each(function(){$(this).find(".tool-border").remove(),$(this).css({border:"0 none",padding:0})}),current_editor.sync()}function showColorPlan(t){if(current_editor){var e=$(current_editor.container),a=e.offset(),r=e.width(),i=e.height();if(a.left+r+$("#color-plan").width()<$(window).width()?$("#color-plan").css("left",a.left+r-5):$("#color-plan").css("left",a.left-$("#color-plan").width()),t)if(t-$(window).scrollTop()>$("#color-plan").height()/2){var o=t-$(window).scrollTop()-$("#color-plan").height()/2;$(window).height()-o>$("#color-plan").height()?($("#color-plan").css("bottom","auto"),o<a.top+e.find(".edui-editor-toolbarbox").height()-$(window).scrollTop()?$("#color-plan").css("top",a.top+e.find(".edui-editor-toolbarbox").height()-$(window).scrollTop()):o+$("#color-plan").height()>a.top+e.height()-$(window).scrollTop()?$("#color-plan").css("top",a.top+e.height()-$(window).scrollTop()-$("#color-plan").height()+20):$("#color-plan").css("top",o)):($("#color-plan").css("top","auto"),$("#color-plan").css("bottom",0))}else $(window).scrollTop()<a.top+e.find(".edui-editor-toolbarbox").height()?($("#color-plan").css("top",a.top+e.find(".edui-editor-toolbarbox").height()-$(window).scrollTop()),$("#color-plan").css("bottom","auto")):($("#color-plan").css("top",0),$("#color-plan").css("bottom","auto"));else $("#color-plan").css("top",a.top+i/2-120-$(window).scrollTop());$("#color-plan").show()}else $("#color-plan").show()}function hideColorPlan(){$("#color-plan").hide()}function meitu_upload(callback){sso.check_userlogin()?(publishController.open_html_dialog("meitu-full"),xiuxiu.setLaunchVars("titleVisible",0),xiuxiu.setLaunchVars("maxFinalWidth",600),xiuxiu.setLaunchVars("customMenu",["decorate","facialMenu","puzzle"]),xiuxiu.setLaunchVars("uploadBtnLabel","上传","meitu_full"),xiuxiu.embedSWF("MeituFullContent",3,940,600,"meitu_full"),xiuxiu.setUploadURL(BASEURL+"/uploadfiles/upload"),xiuxiu.setUploadType(2),xiuxiu.setUploadDataFieldName("upload"),xiuxiu.onBeforeUpload=function(t,e){var a=t.size;return a>1048576?(alert("图片不能超过1M"),!1):(xiuxiu.setUploadArgs({"return":"xiuxiu",remote_type:"wechatUploadimg",no_thumb:1,"MIAOCMS[Auth][User]":$.cookie("MIAOCMS[Auth][User]")},e),!0)},xiuxiu.onUploadResponse=function(data,id){try{var json=eval("("+data+")")}catch(e){return void alert(data)}return-1==json.ret?showErrorMessage(json.error):(insertHtml('<img src="'+json.url+'" _src="'+json.url+'">'),publishController.close_dialog()),"function"==typeof callback?callback(json.url):void 0},xiuxiu.onClose=function(t){publishController.close_dialog()}):showErrorMessage("图片美图上传功能需要登录后才能使用")}function pingtu_upload(callback){sso.check_userlogin()?(publishController.open_html_dialog("meitu-pingtu"),xiuxiu.setLaunchVars("titleVisible",0),xiuxiu.setLaunchVars("maxFinalWidth",600),xiuxiu.setLaunchVars("uploadBtnLabel","上传","meitu_pingtu"),xiuxiu.embedSWF("MeituPingTuContent",2,700,500,"meitu_pingtu"),xiuxiu.setUploadURL(BASEURL+"/uploadfiles/upload"),xiuxiu.setUploadType(2),xiuxiu.setUploadDataFieldName("upload"),xiuxiu.onBeforeUpload=function(t,e){var a=t.size;return a>1048576?(alert("图片不能超过1M"),!1):(xiuxiu.setUploadArgs({"return":"xiuxiu",remote_type:"wechatUploadimg",no_thumb:1,"MIAOCMS[Auth][User]":$.cookie("MIAOCMS[Auth][User]")},e),!0)},xiuxiu.onUploadResponse=function(data,id){try{var json=eval("("+data+")")}catch(e){return void alert(data)}return-1==json.ret?showErrorMessage(json.error):(insertHtml('<img src="'+json.url+'" _src="'+json.url+'">'),publishController.close_dialog()),"function"==typeof callback?callback(json.url):void 0},xiuxiu.onClose=function(t){publishController.close_dialog()}):showErrorMessage("图片拼图上传功能需要登录后才能使用")}function edit_image(url){sso.check_userlogin()?(publishController.open_html_dialog("meitu-beautify"),xiuxiu.setLaunchVars("titleVisible",0),xiuxiu.setLaunchVars("maxFinalWidth",600),xiuxiu.setLaunchVars("uploadBtnLabel","上传","beautify"),xiuxiu.embedSWF("MeituContent",1,700,500,"beautify"),xiuxiu.setUploadURL(BASEURL+"/uploadfiles/upload"),xiuxiu.setUploadType(2),xiuxiu.setUploadDataFieldName("upload"),xiuxiu.onBeforeUpload=function(t,e){var a=t.size;return a>1048576?(alert("图片不能超过1M"),!1):(xiuxiu.setUploadArgs({"return":"xiuxiu",url:url,remote_type:"wechatUploadimg",no_thumb:1,"MIAOCMS[Auth][User]":$.cookie("MIAOCMS[Auth][User]")},e),!0)},xiuxiu.onInit=function(){url&&((url.indexOf("remote.wx135.com")>0||url.indexOf(".135editor.com")<0&&url.indexOf(".wx135.com")<0)&&(url=BASEURL+"/downloads/fetch_url?fu="+encodeURIComponent(url)),xiuxiu.loadPhoto(url)),publishController.focus_close()},xiuxiu.onUploadResponse=function(data,id){try{var json=eval("("+data+")")}catch(e){return void alert(data)}if(-1==json.ret)showErrorMessage(json.error);else{if(url&&current_edit_img){var new_url=json.url;current_edit_img.src=new_url,current_edit_img.setAttribute("_src",new_url)}else insertHtml('<img src="'+json.url+'" _src="'+json.url+'">');publishController.close_dialog()}},xiuxiu.onClose=function(t){publishController.close_dialog()}):showErrorMessage("编辑图片属于付费功能。更换图片请直接双击图片")}function singleSubmitDigg(t,e,a,r,i){var o={model:t,data_id:e};return o["options["+a+"]["+r+"]"]=1,$.ajax({type:"post",url:BASEURL+"/appraiseresults/singlesubmit",data:o,success:function(t){if(t.error)return alert(t.error),!1;if("function"==typeof i){i(t)}},dataType:"json"}),!1}function setDiggNum(t,e){var a="#Digg-"+t.model+"-"+t.data_id+"-"+t.question_id+"-"+t.option_id;if($(a).html("("+t.value+")"),e){var r="#Diggbar-"+t.model+"-"+t.data_id+"-"+t.question_id+"-"+t.option_id,i=t.value/e*100;$(r).attr("width",i)}else{var r="#Diggbar-"+t.model+"-"+t.data_id+"-"+t.question_id+"-"+t.option_id;if($(r).size()>0){var e=0;$("[id^='Digg-"+t.model+"-"+t.data_id+"-']").each(function(){var t=$(this).html();t=t.replace(/\(|\)/g,""),e+=parseInt(t)}),$("[id^='Diggbar-"+t.model+"-"+t.data_id+"-']").each(function(){var t=this.id.replace(/Diggbar-/,"Digg-"),a=$("#"+t).html();a=a.replace(/\(|\)/g,"");var r=parseInt(a),i=r/e*100;$("span",this).css("width",i),$(this).next().html(i.toFixed(2)+"%")})}}}function keep_session(){var t=BASEURL+"/users/keep_session";ajaxActionHtml(t,null,function(t){})}function ajaxAction(url,postdata,form,callback_func_name,moreags){return url+=-1!=url.search(/\?/)?"&inajax=1":"?inajax=1",form&&$(":submit",form).each(function(){var t=$(this).html();$(this).data("html",t).html('<img src="'+BASEURL+'/img/ajax/circle_ball.gif"> '+t).attr("disabled","disabled")}),$.ajax({type:"post",url:url,data:postdata,complete:function(t,e){form&&$(":submit",form).each(function(){var t=$(this).data("html");$(this).html(t).removeAttr("disabled")})},success:function(request){if(request.msg)0==request.ret?showSuccessMessage(request.msg):showErrorMessage(request.msg);else if(request.success)showSuccessMessage(request.success);else if(request.error&&!request.tasks){showErrorMessage(request.error);var errorinfo="";for(var i in request)errorinfo+="<span class='ui-state-error ui-corner-all'><span class='ui-icon ui-icon-alert'></span>"+request[i]+"</span>"}if(form&&$(":submit",form).each(function(){var t=$(this).data("html");$(this).html(t).removeAttr("disabled")}),"function"==typeof callback_func_name)callback_func_name(request);else if(callback_func_name&&rs_callbacks[callback_func_name]){var func=rs_callbacks[callback_func_name];moreags?func(request,moreags):func(request)}request.tasks&&$(request.tasks).each(function(i){var task=request.tasks[i];if("html"==task.dotype)$(task.selector,form).size()?$(task.selector,form).html(task.content).show():$(task.selector).html(task.content).show();else if("value"==task.dotype)$(task.selector,form).size()?$(task.selector,form).val(task.content):$(task.selector).val(task.content);else if("append"==task.dotype)$(task.content).appendTo(task.selector);else if("msg_dialog"==task.dotype)publishController.open_msg_dialog(task.id,task.title,task.content);else if("close_dialog"==task.dotype)publishController.close_dialog();else if("location"==task.dotype)window.location.href=task.url;else if(form&&"reset"==task.dotype)$(form).trigger("reset");else if("reload"==task.dotype)window.location.reload();else if("jquery"==task.dotype&&task.func&&"function"==typeof $(task.selector)[task.func])task.args?$(task.selector)[task.func](task.args):$(task.selector)[task.func]();else if(callback_func_name||"rscallback"!=task.dotype){if("callback"==task.dotype){var callback=null,thisArg=null;eval("callback= "+task.callback+";"),eval("thisArg= "+task.thisArg+";");var args=[];for(var i in task.callback_args)args[args.length]=task.callback_args[i];callback&&callback.apply(thisArg,args)}}else{var func=rs_callbacks[task.callback];moreags?func(request,moreags):func(request)}})},dataType:"json"}),!1}function ajaxActionHtml(url,selector,callback){$.ajax({async:!0,type:"get",url:url,success:function(data){selector&&$(selector).html(data),"function"==typeof callback?callback(data):callback&&eval(callback)},dataType:"html"})}function setCKEditorVal(t){"undefined"!=typeof CKEDITOR&&(t?$(t).find("textarea").each(function(t){if(this.id&&""!=this.id){var e=CKEDITOR.instances[this.id];if("undefined"!=typeof e){var a=e.getData();$(this).val(a)}}}):$("form .wygiswys").find("textarea").each(function(){var t=CKEDITOR.instances[this.id];if("undefined"!=typeof t){var e=t.getData();$(this).val(e)}}))}function ajaxSubmitForm(t,e){return setCKEditorVal(t),$(t).find(".help-block").html(""),ajaxAction(t.action,$(t).serialize(),t,e),!1}function clearUserCookie(){$.cookie.raw=!0,$.removeCookie("MIAOCMS[Auth][User]",{path:"/"}),$.removeCookie("MIAOCMS[Auth][User]",{domain:document.domain,path:"/"}),domain_host&&$.removeCookie("MIAOCMS[Auth][User]",{domain:domain_host,path:"/"});var t=document.domain.split(".");if(t.length>2){t.shift();var e=t.join(".");$.removeCookie("MIAOCMS[Auth][User]",{domain:e,path:"/"})}return $.cookie.raw=!1,showSuccessMessage("清除Cookie成功"),!1}function checkLogin(t){return sso.check_userlogin(t)?(ajaxAction("/users/login","loginSuccess"),!1):!1}function inner_open(t,e){$(t).find("a").click(function(){var a=$(this).attr("href");e&&(a=a+" "+e);var r=/^#/;return"undefined"!=typeof $(this).attr("onclick")||"_blank"==$(this).attr("target")||r.test(a)||"javascript"==a.substr(0,10).toLowerCase()?!0:($(t).scrollTop(0).prepend('<div style="margin:10px;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载内容...</div>').load(a,function(){page_loaded(),inner_open(t,e)}),!1)})}function follow_wx(t){var e=BASEURL+"/user_follows/follow/"+t;return sso.callback=follow_wx,sso.callback_args=arguments,publishController.open_dialog(e,{title:"Follow",width:400}),!1}function addtofavor(t,e,a,r){var i=BASEURL+"/favorites/add/",o={
"data[Favorite][model]":t,"data[Favorite][data_id]":e};sso.callback=addtofavor,sso.callback_args=arguments;var n=window.event||arguments.callee.caller.arguments[0];return n.stopPropagation(),"function"==typeof r?ajaxAction(i,o,null,r):ajaxAction(i,o,null,function(t){if(0==t.ret){a&&($(a).attr("disabled","disabled").removeClass("text-primary").addClass("text-success"),$(a).find(".fa-heart-o").size()>0&&$(a).find(".fa-heart-o").removeClass("fa-heart-o").addClass("fa-heart"));var e="#Stats-"+t.data.model+"-"+t.data.data_id+"-favor_nums";if($(e).size()>0){var r=$(e).html();r=r.replace(/\(|\)/g,""),""==r&&(r=0),r=parseInt(r),r++,$(e).html(r)}}}),!1}function unfavorite(t,e){var a=window.event||arguments.callee.caller.arguments[0];if(a.stopPropagation(),!confirm("您确认要取消收藏这条数据吗？"))return!1;var r=$(t).data("url");return sso.callback=unfavorite,sso.callback_args=arguments,ajaxAction(r,null,null,function(a){0==a.ret&&("function"==typeof e&&e(a),$(t).attr("disabled","disabled"),$(t).find(".fa-heart").size()>0?$(t).find(".fa-heart").removeClass("fa-heart").addClass("fa-heart-o"):($(t).parents("li:first").remove(),$(".tooltip.in").remove(),$(".popover.in").remove()))}),!1}function refreshfavorite(t){var e=window.event||arguments.callee.caller.arguments[0];e.stopPropagation();var a=$(t).data("url");return sso.callback=refreshfavorite,sso.callback_args=arguments,ajaxAction(a,null,null,function(e){0==e.ret&&$(t).parents("li:first").prependTo($(t).parents("ul:first"))}),!1}function addtoCart(t,e,a){a||(a="product");var r=BASEURL+"/carts/add",i={"data[Cart][num]":e,"data[Cart][product_id]":t,"data[Cart][product_model]":a};return sso.callback=addtoCart,sso.callback_args=arguments,ajaxAction(r,i,null,"addtoCart"),!1}function directBuy(t,e,a){a||(a="product");var r=BASEURL+"/carts/add?redirect=/carts/listcart&ck_ids="+t,i={"data[Cart][num]":e,"data[Cart][product_id]":t,"data[Cart][product_model]":a};return sso.callback=directBuy,sso.callback_args=arguments,ajaxAction(r,i,null,function(){location.href=BASEURL+"/carts/listcart"}),!1}function loadDiggData(){var t=[],e={};$(".ui-dig-num").each(function(a){var r=this.id.split("-");if($.inArray(r[1],t)<0&&(t[t.length]=r[1]),e[r[1]]||(e[r[1]]=[]),$.inArray(r[2],e[r[1]])<0){var i=e[r[1]].length;e[r[1]][i]=r[2]}});for(var a in t){var r=t[a],i=e[t];loadModelDataDigg(r,i)}}function loadModelDataDigg(t,e){$.ajax({type:"get",url:BASEURL+"/appraiseresults/getdigdata",data:{model:t,data_id:e},success:function(t){for(var e in t)setDiggNum(t[e].Appraiseresult)},dataType:"json"})}function loadStatsData(){var t=[],e={};$(".ui-stats-num").each(function(a){var r=this.id,i=r.split("-");if($.inArray(i[1],t)<0&&(t[t.length]=i[1]),e[i[1]]||(e[i[1]]=[]),$.inArray(i[2],e[i[1]])<0){var o=e[i[1]].length;e[i[1]][o]=i[2]}});for(var a in t){var r=t[a],i=e[r];r&&""!=r&&loadModelDataStats(r,i)}}function loadModelDataStats(t,e){$.ajax({type:"get",url:BASEURL+"/stats_days/getdata",data:{model:t,data_id:e},success:function(t){for(var e in t)setStatsNum(t[e].StatsDay)},dataType:"json"})}function setStatsNum(t){if(parseInt(t.favor_nums)>0){var e="#Stats-"+t.model+"-"+t.data_id+"-favor_nums";setQuoteNum(e,t.favor_nums)}if(parseInt(t.comment_nums)>0){var e="#Stats-"+t.model+"-"+t.data_id+"-comment_nums";setQuoteNum(e,t.comment_nums)}if(parseInt(t.view_nums)>0){var e="#Stats-"+t.model+"-"+t.data_id+"-view_nums";setQuoteNum(e,t.view_nums)}}function setQuoteNum(t,e){if($(t).size()>0){var a=$(t).eq(0).html();a=a.replace(/&nbsp;| /g,""),a=a.replace(/\(|\)/g,""),""==a&&(a=0),a=parseInt(a),a+=parseInt(e),$(t).html(a)}}function loadModelDataMood(t,e){$.ajax({type:"get",url:BASEURL+"/appraiseresults/getdigdata",data:{model:t,data_id:e},success:function(t){var e=0;for(var a in t)3==t[a].Appraiseresult.question_id&&(e+=parseInt(t[a].Appraiseresult.value));for(var a in t)setDiggNum(t[a].Appraiseresult,e)},dataType:"json"})}function loadComments(t,e){$.get(BASEURL+"/comments/get_comments_data/"+t+"/"+e,{},function(a){var r=null,i=".comments-"+t+"-"+e;$(i).html("");for(var o=0;o<a.length;o++){r=a[o].Comment;var n='<li><span class="t">'+r.name+"  "+r.created+"</span><p>"+r.body+"</p><li>";$(i).append(n)}},"json")}function loadMoodDigg(t,e){$.get(BASEURL+"/appraises/load/3/"+e+"/"+t+"?inajax=1",{},function(a){$("#mood-"+t+"-"+e).html(a)},"html")}function Html5Uploadfile(file_id){this.file_input=null;var uploading_id=file_id+randomString(10);this.upload=function(t,e){this.file_input=t;var a=t.files[0];if(a){var r=0;r=a.size>1048576?(Math.round(100*a.size/1048576)/100).toString()+"MB":(Math.round(100*a.size/1024)/100).toString()+"KB";var i=new FormData;i.append("file_post_name",e.file_post_name),i.append("file_model_name",e.file_model_name),i.append("no_db",e.no_db),i.append("data_id",e.data_id),i.append("item_css",e.item_css),i.append("save_folder",e.save_folder),i.append("return_type",e.return_type),i.append(e.file_post_name,a),this.uploading_files[e.file_post_name]={},this.uploading_files[e.file_post_name][a.name]=!0;var o='<div id="'+uploading_id+'-status" class="uploading-item clearfix"><span class="filename">'+a.name+'</span> <div class="progress pull-left" style="width:200px;"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:0%"><span class="sr-only">0%</span></div></div> </div>';$(t).after(o);var n=new XMLHttpRequest;n.upload.addEventListener("progress",this.uploadProgress,!1),n.addEventListener("load",this.uploadComplete,!1),n.addEventListener("error",this.uploadFailed,!1),n.addEventListener("abort",this.uploadCanceled,!1),n.open("POST",e.upload_url),n.send(i)}},this.uploading_files={},this.check_upload=function(){return!1},this.uploadProgress=function(t){if(t.lengthComputable){var e=Math.round(100*t.loaded/t.total);$("#"+uploading_id+"-status").find(".progress-bar").css("width",e.toString()+"%")}else alert("Unable to compute.Please retry.")},this.uploadComplete=function(evt){var data=eval("("+evt.target.responseText+")");$("#fileuploadinfo_"+data.fieldname).append(data.message),$("#"+uploading_id+"-status").fadeOut("slow").remove()},this.uploadFailed=function(t){alert("There was an error attempting to upload the file.")},this.uploadCanceled=function(t){alert("The upload has been canceled by the user or the browser dropped the connection.")}}function debug_object(t){var e="";for(var a in t)e+=a+"="+t[a]+";	";$("body").append("<hr/>"+e)}function getAvatarUrl(t){return BASEURL+"/files/avatar/"+parseInt(t/1e3%1e3)+"/"+parseInt(t%1e3)+"/"+t+"_0.jpg"}function getUnreadMsgNum(){$.ajax({type:"get",url:BASEURL+"/shortmessages/unreadnum/",success:function(t){var e=parseInt(t);e>0&&$(".user-unread-msgnum").html(t).show()},dataType:"html"})}function validateForm(t){if("undefined"!=typeof $(t).attr("onsubmit")||"undefined"!=typeof $(t).data("noajax")||"undefined"!=typeof $(t).attr("target")||"get"==$(t).attr("method")||"GET"==$(t).attr("method"))return!0;var e=$(t).validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,highlight:function(t){$(t).closest(".form-group").addClass("has-error")},success:function(t){t.closest(".form-group").removeClass("has-error"),t.remove()},errorPlacement:function(t,e){e.parent("div").append(t)},submitHandler:function(t){if($(t).validate().form()){if("undefined"!=typeof $(t).data("noajax")||"undefined"!=typeof $(t).attr("target")||"get"==$(t).attr("method")||"GET"==$(t).attr("method"))return!0;ajaxSubmitForm(t)}}});return e}function randomString(t){t=t||8;var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=e.length,r="";for(i=0;i<t;i++)r+=e.charAt(Math.floor(Math.random()*a));return r}function strtolower(t){return(t+"").toLowerCase()}function substr(t,e,a){var r=0,i=!0,o=0,n=0,s=0,l="";t+="";var d=t.length;switch(this.php_js=this.php_js||{},this.php_js.ini=this.php_js.ini||{},this.php_js.ini["unicode.semantics"]&&this.php_js.ini["unicode.semantics"].local_value.toLowerCase()){case"on":for(r=0;r<t.length;r++)if(/[\uD800-\uDBFF]/.test(t.charAt(r))&&/[\uDC00-\uDFFF]/.test(t.charAt(r+1))){i=!1;break}if(!i){if(0>e)for(r=d-1,o=e+=d;r>=o;r--)/[\uDC00-\uDFFF]/.test(t.charAt(r))&&/[\uD800-\uDBFF]/.test(t.charAt(r-1))&&(e--,o--);else for(var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!=c.exec(t);){var u=c.lastIndex;if(!(e>u-2))break;e++}if(e>=d||0>e)return!1;if(0>a){for(r=d-1,n=d+=a;r>=n;r--)/[\uDC00-\uDFFF]/.test(t.charAt(r))&&/[\uD800-\uDBFF]/.test(t.charAt(r-1))&&(d--,n--);return e>d?!1:t.slice(e,d)}for(s=e+a,r=e;s>r;r++)l+=t.charAt(r),/[\uD800-\uDBFF]/.test(t.charAt(r))&&/[\uDC00-\uDFFF]/.test(t.charAt(r+1))&&s++;return l}case"off":default:return 0>e&&(e+=d),d="undefined"==typeof a?d:0>a?a+d:a+e,e>=t.length||0>e||e>d?!1:t.slice(e,d)}}function loadUserCateOptions(t,e){ajaxAction("/user_cates/getUserCates/"+e,null,null,function(e){var a="";e[""]&&(a="<option>"+e[""]+"</option>");for(var r in e)""!=r&&(a=a+'<option value="'+r+'">'+e[r]+"</option>");$(t).empty().append(a),showSuccessMessage("分类数据加载成功")})}function showSuccessMessage(t){return $.fn.jGrowl?($("#jGrowl").find(".jGrowl-notification").trigger("jGrowl.close"),$.jGrowl("<i style='margin-right:10px;' class='fa fa-check'></i> "+t,{theme:"alert alert-success",life:4e3,closer:!0,closeTemplate:"&times;",closerTemplate:"",themeState:"",position:"bottom-right"})):alert(t),!0}function showErrorMessage(t){return $.fn.jGrowl?($("#jGrowl").find(".jGrowl-notification").trigger("jGrowl.close"),$.jGrowl("<i class='fa fa-warning'></i> "+t,{theme:"alert alert-danger",position:"bottom-right",closer:!0,closeTemplate:"&times;",closerTemplate:"",life:5e3,themeState:""})):alert(t),!0}function page_loaded(){$(".popover-trigger").popover({trigger:"hover"}),$(".ui-portlet-content").each(function(){""==jQuery.trim($(this).html())&&$(this).parent(".ui-portlet").hide()}),$('[data-toggle="tooltip"],.showtooltip').tooltip({container:"body",html:!0}),$('[data-toggle="popover"]').popover({html:!0}),$(".delete-pop").popover({trigger:"click",container:"body",placement:"top",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content">确定删除此内容吗？ </div> <div class="popover_bar text-center" style="margin-bottom:10px;"><a href="javascript:;" class="btn btn-primary btn-sm pop-comfirm">确定</a>&nbsp;<a href="javascript:;" class="btn btn-default btn-sm pop-cancel">取消</a></div></div>',html:!0}).unbind("shown.bs.popover").on("shown.bs.popover",function(){var t=$(this);t.trigger("blur");var e=t.data("bs.popover").tip();e.find(".pop-cancel").unbind("click").click(function(){t.popover("hide")}),e.find(".pop-comfirm").unbind("click").click(function(){t.popover("hide"),ajaxAction(t.data("url"),null,null,function(e){(e.success||0==e.ret)&&t.parents(".appmsg:first").remove()})})})}function detectCapsLock(t,e){var a=t.keyCode?t.keyCode:t.which,r=t.shiftKey?t.shiftKey:16==a;e.className=a>=65&&90>=a&&!r||a>=97&&122>=a&&r?"form-control clck txt":"form-control txt",$(e).blur(function(){$(this).className="form-control txt"})}function showValidateErrors(t,e,a){var r=e,i="",o="",n=!0;for(var s in t){r=e,i=s;var l=s.split(".");l.length>1&&(r=l[0],i=l[1]);var d=i.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});d=d.replace(/\_\w/g,function(t){return t.substring(1,2).toUpperCase()}),n&&(window.location.hash="#"+r+d+a,n=!1),$("#error_"+r+d+a).remove(),$("#"+r+d+a).parent("div:first").append("<span id='error_"+r+d+a+"' name='error_"+r+d+a+"' class='ui-state-error ui-corner-all' style='position: absolute;'><span class='ui-icon ui-icon-alert'></span>"+t[s]+"</span>");var c=$('label[for="'+r+d+a+'"]').html();o+=c+":"+t[s]+"<br/>"}""!=o&&show_message(o,8)}function addNewCrawlRegular(){var t=$(".model-schema-list").val();$(".model-schema-area").before($('<div class="regexp-add"><label for="CrawlRegexp'+t+'">Regexp '+t+'</label><textarea id="CrawlRegexp'+t+'" cols="60" rows="2" name="data[Crawl][regexp_'+t+']"></textarea></div>'))}function showAlert(t,e,a){if(!($("#"+a).size()>0)){var r=document.createElement("span");r.id=a,r.className="ui-state-error",r.innerHTML=t,$(e).append($(r))}}function removeAlert(t){$(t).remove()}function clearSubmitError(t){$(t).parent().find(".errorInfo").remove()}function clearWaitInfo(t){t?$(t).parent().find(".waitInfo").remove():$(".waitInfo").remove()}function showWaitInfo(t,e){try{if(null==e)return;clearWaitInfo();var a=document.createElement("span");a.className="waitInfo",a.id="waitInfo",a.innerHTML=t,e.parentNode.appendChild(a)}catch(r){}}function showWaitInfoOnInner(t,e){try{if(null==e)return;clearWaitInfo();var a=document.createElement("span");a.className="waitInfo",a.id="waitInfo",a.innerHTML=t,e.innerHTML="",e.appendChild(a)}catch(r){}}function upload_multi_file(file,serverData){try{var progress=progress_list[file.id];if(progress.setComplete()," "===serverData)this.customSettings.upload_successful=!1;else{var data=eval("("+serverData+")");if(1==data.status){this.customSettings.upload_successful=!0;var filesize="";filesize=data.size/1024/1024>1?Math.round(data.size/1024/1024*100)/100+"MB":data.size/1024>1?Math.round(data.size/1024*100)/100+"KB":data.size+"B",$("#fileuploadinfo_"+data.fieldname+"_"+data.data_id).append('<div class="col-md-4  upload-fileitem"> <a target="_blank" href="'+BASEURL+"/uploadfiles/download/"+data.id+'" class="btn btn-success "><i class="glyphicon glyphicon-cloud-download"></i><div>'+data.name+"</div><small>File Size: "+filesize+'</small></a><i class="glyphicon glyphicon-remove remove" data-id="'+data.data_id+'" title="Remove"></i></div>')}}}catch(e){alert(serverData)}}function WxMsgCoverimgUploaded(t){$("#WxMsgThumbMediaId").size()>0&&(t.media_id?$("#WxMsgThumbMediaId").val(t.media_id):$("#WxMsgThumbMediaId").val(""))}UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",fontborder:"字符边框",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",deletecaption:"删除表格标题",inserttitle:"插入标题",mergecells:"合并多个单元格",deletetable:"删除表格",cleardoc:"清空文档",insertparagraphbeforetable:"表格前插入行",insertcode:"代码语言",fontfamily:"字体",fontsize:"字号 10~72px",paragraph:"段落格式",simpleupload:"单图上传",insertimage:"多图上传",edittable:"表格属性",edittd:"单元格属性",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittip:"编辑提示",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",music:"音乐",inserttable:"插入表格",drafts:"从草稿箱加载",charts:"图表"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"一,二,三....",cn1:"一),二),三)....",cn2:"(一),(二),(三)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圆圈",disc:"● 小黑点",square:"■ 小方块 ",dash:"— 破折号",dot:" 。 小圆圈"},paragraph:{p:"段落",h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},autoupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},simpleupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",loadconfigError:"获取后台配置项请求出错，上传功能将不能正常使用！",loadconfigFormatError:"后台配置项返回格式出错，上传功能将不能正常使用！",loadconfigHttpError:"请求后台配置项http错误，上传功能将不能正常使用！",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"确定清空当前文档么？",contextMenu:{"delete":"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",aligntd:"单元格对齐方式",aligntable:"表格对齐方式",tableleft:"左浮动",tablecenter:"居中显示",tableright:"右浮动",edittd:"单元格属性",setbordervisible:"设置表格边线可见",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",inserttable:"插入表格",deletetable:"删除表格",insertparagraphbefore:"前插入段落",insertparagraphafter:"后插入段落",deleterow:"删除当前行",deletecol:"删除当前列",insertrow:"前插入行",insertcol:"左插入列",insertrownext:"后插入行",insertcolnext:"右插入列",insertcaption:"插入表格名称",deletecaption:"删除表格名称",inserttitle:"插入表格标题行",deletetitle:"删除表格标题行",inserttitlecol:"插入表格标题列",deletetitlecol:"删除表格标题列",averageDiseRow:"平均分布各行",averageDisCol:"平均分布各列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",tablesort:"表格排序",enablesort:"设置表格可排序",disablesort:"取消表格可排序",reversecurrent:"逆序当前",orderbyasc:"按ASCII字符升序",reversebyasc:"按ASCII字符降序",orderbynum:"按数值大小升序",reversebynum:"按数值大小降序",borderbk:"边框底纹",setcolor:"表格隔行变色",unsetcolor:"取消表格隔行变色",setbackground:"选区背景隔行",unsetbackground:"取消选区背景",redandblue:"红蓝相间",threecolorgradient:"三色渐变",copy:"复制(Ctrl + c)",copymsg:"浏览器不支持,请使用 'Ctrl + c'",paste:"粘贴(Ctrl + v)",pastemsg:"浏览器不支持,请使用 'Ctrl + v'"},copymsg:"浏览器不支持,请使用 'Ctrl + c'",pastemsg:"浏览器不支持,请使用 'Ctrl + v'",anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性","default":"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",changeImage:"换图",edit:"编辑",radiusCircle:"圆形",cancelRadius:"取消圆形",ok:"确定",recentlyColor:"最近使用颜色",clear:"清除",anchorMsg:"锚点","delete":"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",pasteOpt:"粘贴选项",pasteSourceFormat:"保留源格式",tagFormat:"只保留标签",pasteTextFormat:"只保留文本",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行",symbol:"符号转换",bdc2sb:"全角转半角",tobdc:"半角转全角"},background:{"static":{lang_background_normal:"背景设置",lang_background_local:"在线图片",lang_background_set:"选项",lang_background_none:"无背景色",lang_background_colored:"有背景色",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{"static":{lang_tab_remote:"插入图片",lang_tab_upload:"本地上传",lang_tab_online:"在线管理",lang_tab_search:"图片搜索",lang_input_url:"地 址：",lang_input_size:"大 小：",lang_input_width:"宽度",lang_input_height:"高度",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_align:"图片浮动方式：",lang_imgLoading:"　图片加载中……",lang_start_upload:"开始上传",lock:{title:"锁定宽高比例"},searchType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},searchTxt:{value:"请输入搜索关键词"},searchBtn:{value:"百度一下"},searchReset:{value:"清空搜索"},noneAlign:{title:"无浮动"},leftAlign:{title:"左浮动"},rightAlign:{title:"右浮动"},centerAlign:{title:"居中独占一行"}},uploadSelectFile:"点击选择图片",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",uploadNoPreview:"不能预览",updateStatusReady:"选中_张图片，共_KB。",updateStatusConfirm:"已成功上传_张照片，_张照片上传失败",updateStatusFinish:"共_张（_KB），_张上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错",remoteLockError:"宽高不正确,不能所定比例",numError:"请输入正确的长度或者宽度值！例如：123，400",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",searchRemind:"请输入搜索关键词",searchLoading:"图片加载中，请稍后……",searchRetry:" :( ，抱歉，没有找到图片！请重试一次！"},attachment:{"static":{lang_tab_upload:"上传附件",lang_tab_online:"在线附件",lang_start_upload:"开始上传",lang_drop_remind:"可以将文件拖到这里，单次最多可选100个文件"},uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"已成功上传_个文件，_个文件上传失败",updateStatusFinish:"共_个（_KB），_个上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},insertvideo:{"static":{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_tab_uploadV:"上传视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"},lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"视频尺寸",lang_upload_width:"宽度",lang_upload_height:"高度",lang_upload_alignment:"对齐方式",lang_format_advice:"建议使用mp4格式."},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动",'"default"':"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",browseFiles:"浏览文件",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型不允许！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……",uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"成功上传_个，_个失败",updateStatusFinish:"共_个(_KB)，_个成功上传",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{"static":{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{"static":{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},music:{"static":{lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",J_searchBtn:{value:"搜索歌曲"}},emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",chapter:"歌曲",singer:"歌手",special:"专辑",listenTest:"试听"},anchor:{"static":{lang_input_anchorName:"锚点名字："}},charts:{"static":{lang_data_source:"数据源：",lang_chart_format:"图表格式：",lang_data_align:"数据对齐方式",lang_chart_align_same:"数据源与图表X轴Y轴一致",lang_chart_align_reverse:"数据源与图表X轴Y轴相反",lang_chart_title:"图表标题",lang_chart_main_title:"主标题：",lang_chart_sub_title:"子标题：",lang_chart_x_title:"X轴标题：",lang_chart_y_title:"Y轴标题：",lang_chart_tip:"提示文字",lang_cahrt_tip_prefix:"提示文字前缀：",lang_cahrt_tip_description:"仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀",lang_chart_data_unit:"数据单位",lang_chart_data_unit_title:"单位：",lang_chart_data_unit_description:"显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃",lang_chart_type:"图表类型：",lang_prev_btn:"上一个",lang_next_btn:"下一个"}},emotion:{"static":{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{"static":{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{"static":{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_visualEnter:"软回车",lang_Txt_fullscreen:"全屏"}},insertframe:{"static":{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{"static":{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{"static":{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索",lang_dynamicmap:"插入动态地图"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{"static":{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{"static":{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},spechars:{"static":{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",yyyb:"英语音标",zyzf:"其他"},edittable:{"static":{lang_tableStyle:"表格样式",lang_insertCaption:"添加表格名称行",lang_insertTitle:"添加表格标题行",lang_insertTitleCol:"添加表格标题列",lang_orderbycontent:"使表格内容可排序",lang_tableSize:"自动调整表格尺寸",lang_autoSizeContent:"按表格文字自适应",lang_autoSizePage:"按页面宽度自适应",lang_example:"示例",lang_borderStyle:"表格边框",lang_color:"颜色:"},captionName:"表格名称",titleName:"标题",cellsName:"内容",errorMsg:"有合并单元格，不可排序"},edittip:{"static":{lang_delRow:"删除整行",lang_delCol:"删除整列"}},edittd:{"static":{lang_tdBkColor:"背景颜色:"}},formula:{"static":{}},wordimage:{"static":{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}},autosave:{saving:"保存中...",success:"本地保存成功"}},jQuery(function(t){t.jslanguage={selectAll:"全选",noSelect:"没有选中项",confirm_trash:"您确认要删除数据到回收站吗？",confirm_delete:"您确认要彻底删除数据吗？",confirm_restore:"您确认要从回收站恢复数据吗？",confirm_publish:"您确认要发布这些数据吗？",confirm_batchEdit:"批量修改将会修改您选择的所有行的值，您确认要进行批量修改吗？",confirm_unpublish:"您确认要使这些发布的数据下线吗？",cancel_fav_confirm:"您确认要取消收藏这条数据吗？",needlogin:"登录",sure_delete:"您确认要删除数据吗？",dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"",noSelect:"没有选中项",wysiswyg_mode:"不能在查看源代码时插入",select_editor:"请先在编辑器中选择要插入的位置",insert_portlet:"插入portlet",use_editor:"使用编辑器",destory_editor:"注销编辑器"},"undefined"!=typeof t.tools&&"undefined"!=typeof t.tools.validator&&t.tools.validator.localize("zh",{"*":"请检查输入格式是否正确",":email":"请输入有效的邮箱地址。",":number":"请输入有效的数字。",":url":"请输入有效的网址。","[max]":"最大值不大于$1","[min]":"最小值不小于$1","[required]":"此项必填，不允许为空。"})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function e(t){return s.raw?t:encodeURIComponent(t)}function a(t){return s.raw?t:decodeURIComponent(t)}function r(t){return e(s.json?JSON.stringify(t):String(t))}function i(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(n," ")),s.json?JSON.parse(t):t}catch(e){}}function o(e,a){var r=s.raw?e:i(e);return t.isFunction(a)?a(r):r}var n=/\+/g,s=t.cookie=function(i,n,l){if(arguments.length>1&&!t.isFunction(n)){if(l=t.extend({},s.defaults,l),"number"==typeof l.expires){var d=l.expires,c=l.expires=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*d)}return document.cookie=[e(i),"=",r(n),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=i?void 0:{},h=document.cookie?document.cookie.split("; "):[],f=0,p=h.length;p>f;f++){var g=h[f].split("="),m=a(g.shift()),v=g.join("=");if(i===m){u=o(v,n);break}i||void 0===(v=o(v))||(u[m]=v)}return u};s.defaults={},t.removeCookie=function(e,a){return t.cookie(e,"",t.extend({},a,{expires:-1})),!t.cookie(e)}}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var n=e||window.event,s=l.call(arguments,1),d=0,u=0,h=0,f=0,p=0,g=0;if(e=t.event.fix(n),e.type="mousewheel","detail"in n&&(h=-1*n.detail),"wheelDelta"in n&&(h=n.wheelDelta),"wheelDeltaY"in n&&(h=n.wheelDeltaY),"wheelDeltaX"in n&&(u=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(u=-1*h,h=0),d=0===h?u:h,"deltaY"in n&&(h=-1*n.deltaY,d=h),"deltaX"in n&&(u=n.deltaX,0===h&&(d=-1*u)),0!==h||0!==u){if(1===n.deltaMode){var m=t.data(this,"mousewheel-line-height");d*=m,h*=m,u*=m}else if(2===n.deltaMode){var v=t.data(this,"mousewheel-page-height");d*=v,h*=v,u*=v}if(f=Math.max(Math.abs(h),Math.abs(u)),(!o||o>f)&&(o=f,r(n,f)&&(o/=40)),r(n,f)&&(d/=40,u/=40,h/=40),d=Math[d>=1?"floor":"ceil"](d/o),u=Math[u>=1?"floor":"ceil"](u/o),h=Math[h>=1?"floor":"ceil"](h/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();p=e.clientX-b.left,g=e.clientY-b.top}return e.deltaX=u,e.deltaY=h,e.deltaFactor=o,
e.offsetX=p,e.offsetY=g,e.deltaMode=0,s.unshift(e,d,u,h),i&&clearTimeout(i),i=setTimeout(a,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function a(){o=null}function r(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var i,o,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var d=n.length;d;)t.event.fixHooks[n[--d]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var a=s.length;a;)this.addEventListener(s[--a],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=s.length;a;)this.removeEventListener(s[--a],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var a=t(e),r=a["offsetParent"in t.fn?"offsetParent":"parent"]();return r.length||(r=t("body")),parseInt(r.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),!function(){function t(a,r){if(a=a?a:"",r=r||{},a instanceof t)return a;if(!(this instanceof t))return new t(a,r);var i=e(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=z(100*this._a)/100,this._format=r.format||i.format,this._gradientType=r.gradientType,this._r<1&&(this._r=z(this._r)),this._g<1&&(this._g=z(this._g)),this._b<1&&(this._b=z(this._b)),this._ok=i.ok,this._tc_id=P++}function e(t){var e={r:0,g:0,b:0},r=1,o=!1,s=!1;return"string"==typeof t&&(t=L(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=a(t.r,t.g,t.b),o=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=M(t.s),t.v=M(t.v),e=n(t.h,t.s,t.v),o=!0,s="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=M(t.s),t.l=M(t.l),e=i(t.h,t.s,t.l),o=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=x(r),{ok:o,format:t.format||s,r:F(255,H(e.r,0)),g:F(255,H(e.g,0)),b:F(255,H(e.b,0)),a:r}}function a(t,e,a){return{r:255*C(t,255),g:255*C(e,255),b:255*C(a,255)}}function r(t,e,a){t=C(t,255),e=C(e,255),a=C(a,255);var r,i,o=H(t,e,a),n=F(t,e,a),s=(o+n)/2;if(o==n)r=i=0;else{var l=o-n;switch(i=s>.5?l/(2-o-n):l/(o+n),o){case t:r=(e-a)/l+(a>e?6:0);break;case e:r=(a-t)/l+2;break;case a:r=(t-e)/l+4}r/=6}return{h:r,s:i,l:s}}function i(t,e,a){function r(t,e,a){return 0>a&&(a+=1),a>1&&(a-=1),1/6>a?t+6*(e-t)*a:.5>a?e:2/3>a?t+6*(e-t)*(2/3-a):t}var i,o,n;if(t=C(t,360),e=C(e,100),a=C(a,100),0===e)i=o=n=a;else{var s=.5>a?a*(1+e):a+e-a*e,l=2*a-s;i=r(l,s,t+1/3),o=r(l,s,t),n=r(l,s,t-1/3)}return{r:255*i,g:255*o,b:255*n}}function o(t,e,a){t=C(t,255),e=C(e,255),a=C(a,255);var r,i,o=H(t,e,a),n=F(t,e,a),s=o,l=o-n;if(i=0===o?0:l/o,o==n)r=0;else{switch(o){case t:r=(e-a)/l+(a>e?6:0);break;case e:r=(a-t)/l+2;break;case a:r=(t-e)/l+4}r/=6}return{h:r,s:i,v:s}}function n(t,e,a){t=6*C(t,360),e=C(e,100),a=C(a,100);var r=U.floor(t),i=t-r,o=a*(1-e),n=a*(1-i*e),s=a*(1-(1-i)*e),l=r%6,d=[a,n,o,o,s,a][l],c=[s,a,a,n,o,o][l],u=[o,o,s,a,a,n][l];return{r:255*d,g:255*c,b:255*u}}function s(t,e,a,r){var i=[T(z(t).toString(16)),T(z(e).toString(16)),T(z(a).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(t,e,a,r){var i=[T(D(r)),T(z(t).toString(16)),T(z(e).toString(16)),T(z(a).toString(16))];return i.join("")}function d(e,a){a=0===a?0:a||10;var r=t(e).toHsl();return r.s-=a/100,r.s=k(r.s),t(r)}function c(e,a){a=0===a?0:a||10;var r=t(e).toHsl();return r.s+=a/100,r.s=k(r.s),t(r)}function u(e){return t(e).desaturate(100)}function h(e,a){a=0===a?0:a||10;var r=t(e).toHsl();return r.l+=a/100,r.l=k(r.l),t(r)}function f(e,a){a=0===a?0:a||10;var r=t(e).toRgb();return r.r=H(0,F(255,r.r-z(255*-(a/100)))),r.g=H(0,F(255,r.g-z(255*-(a/100)))),r.b=H(0,F(255,r.b-z(255*-(a/100)))),t(r)}function p(e,a){a=0===a?0:a||10;var r=t(e).toHsl();return r.l-=a/100,r.l=k(r.l),t(r)}function g(e,a){var r=t(e).toHsl(),i=(z(r.h)+a)%360;return r.h=0>i?360+i:i,t(r)}function m(e){var a=t(e).toHsl();return a.h=(a.h+180)%360,t(a)}function v(e){var a=t(e).toHsl(),r=a.h;return[t(e),t({h:(r+120)%360,s:a.s,l:a.l}),t({h:(r+240)%360,s:a.s,l:a.l})]}function b(e){var a=t(e).toHsl(),r=a.h;return[t(e),t({h:(r+90)%360,s:a.s,l:a.l}),t({h:(r+180)%360,s:a.s,l:a.l}),t({h:(r+270)%360,s:a.s,l:a.l})]}function _(e){var a=t(e).toHsl(),r=a.h;return[t(e),t({h:(r+72)%360,s:a.s,l:a.l}),t({h:(r+216)%360,s:a.s,l:a.l})]}function y(e,a,r){a=a||6,r=r||30;var i=t(e).toHsl(),o=360/r,n=[t(e)];for(i.h=(i.h-(o*a>>1)+720)%360;--a;)i.h=(i.h+o)%360,n.push(t(i));return n}function $(e,a){a=a||6;for(var r=t(e).toHsv(),i=r.h,o=r.s,n=r.v,s=[],l=1/a;a--;)s.push(t({h:i,s:o,v:n})),n=(n+l)%1;return s}function w(t){var e={};for(var a in t)t.hasOwnProperty(a)&&(e[t[a]]=a);return e}function x(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function C(t,e){S(t)&&(t="100%");var a=j(t);return t=F(e,H(0,parseFloat(t))),a&&(t=parseInt(t*e,10)/100),U.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return F(1,H(0,t))}function A(t){return parseInt(t,16)}function S(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function j(t){return"string"==typeof t&&-1!=t.indexOf("%")}function T(t){return 1==t.length?"0"+t:""+t}function M(t){return 1>=t&&(t=100*t+"%"),t}function D(t){return Math.round(255*parseFloat(t)).toString(16)}function I(t){return A(t)/255}function L(t){t=t.replace(R,"").replace(G,"").toLowerCase();var e=!1;if(B[t])t=B[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var a;return(a=q.rgb.exec(t))?{r:a[1],g:a[2],b:a[3]}:(a=q.rgba.exec(t))?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=q.hsl.exec(t))?{h:a[1],s:a[2],l:a[3]}:(a=q.hsla.exec(t))?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=q.hsv.exec(t))?{h:a[1],s:a[2],v:a[3]}:(a=q.hsva.exec(t))?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=q.hex8.exec(t))?{a:I(a[1]),r:A(a[2]),g:A(a[3]),b:A(a[4]),format:e?"name":"hex8"}:(a=q.hex6.exec(t))?{r:A(a[1]),g:A(a[2]),b:A(a[3]),format:e?"name":"hex"}:(a=q.hex3.exec(t))?{r:A(a[1]+""+a[1]),g:A(a[2]+""+a[2]),b:A(a[3]+""+a[3]),format:e?"name":"hex"}:!1}function E(t){var e,a;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),a=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==a&&"large"!==a&&(a="small"),{level:e,size:a}}var R=/^\s+/,G=/\s+$/,P=0,U=Math,z=U.round,F=U.min,H=U.max,O=U.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,a,r,i,o,n=this.toRgb();return t=n.r/255,e=n.g/255,a=n.b/255,r=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4),i=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4),o=.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4),.2126*r+.7152*i+.0722*o},setAlpha:function(t){return this._a=x(t),this._roundA=z(100*this._a)/100,this},toHsv:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=o(this._r,this._g,this._b),e=z(360*t.h),a=z(100*t.s),r=z(100*t.v);return 1==this._a?"hsv("+e+", "+a+"%, "+r+"%)":"hsva("+e+", "+a+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=r(this._r,this._g,this._b),e=z(360*t.h),a=z(100*t.s),i=z(100*t.l);return 1==this._a?"hsl("+e+", "+a+"%, "+i+"%)":"hsla("+e+", "+a+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:z(this._r),g:z(this._g),b:z(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+z(this._r)+", "+z(this._g)+", "+z(this._b)+")":"rgba("+z(this._r)+", "+z(this._g)+", "+z(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:z(100*C(this._r,255))+"%",g:z(100*C(this._g,255))+"%",b:z(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+z(100*C(this._r,255))+"%, "+z(100*C(this._g,255))+"%, "+z(100*C(this._b,255))+"%)":"rgba("+z(100*C(this._r,255))+"%, "+z(100*C(this._g,255))+"%, "+z(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:N[s(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var a="#"+l(this._r,this._g,this._b,this._a),r=a,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=t(e);r=o.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+a+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var a=!1,r=this._a<1&&this._a>=0,i=!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(a=this.toRgbString()),"prgb"===t&&(a=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(a=this.toHexString()),"hex3"===t&&(a=this.toHexString(!0)),"hex8"===t&&(a=this.toHex8String()),"name"===t&&(a=this.toName()),"hsl"===t&&(a=this.toHslString()),"hsv"===t&&(a=this.toHsvString()),a||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(t,e){var a=t.apply(null,[this].concat([].slice.call(e)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination($,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},t.fromRatio=function(e,a){if("object"==typeof e){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]="a"===i?e[i]:M(e[i]));e=r}return t(e,a)},t.equals=function(e,a){return e&&a?t(e).toRgbString()==t(a).toRgbString():!1},t.random=function(){return t.fromRatio({r:O(),g:O(),b:O()})},t.mix=function(e,a,r){r=0===r?0:r||50;var i,o=t(e).toRgb(),n=t(a).toRgb(),s=r/100,l=2*s-1,d=n.a-o.a;i=-1==l*d?l:(l+d)/(1+l*d),i=(i+1)/2;var c=1-i,u={r:n.r*i+o.r*c,g:n.g*i+o.g*c,b:n.b*i+o.b*c,a:n.a*s+o.a*(1-s)};return t(u)},t.readability=function(e,a){var r=t(e),i=t(a);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},t.isReadable=function(e,a,r){var i,o,n=t.readability(e,a);switch(o=!1,i=E(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7}return o},t.mostReadable=function(e,a,r){var i,o,n,s,l=null,d=0;r=r||{},o=r.includeFallbackColors,n=r.level,s=r.size;for(var c=0;c<a.length;c++)i=t.readability(e,a[c]),i>d&&(d=i,l=t(a[c]));return t.isReadable(e,l,{level:n,size:s})||!o?l:(r.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],r))};var B=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},N=t.hexNames=w(B),q=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",a="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?",i="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.tinycolor=t}();var random_color_step=1,custom_style_set=!1,current_edit_img=null,allow_upload_img=null,current_edit_msg_id="",current_editor,replace_full_color=!1,replace_clear_interval=null;!function(t){var e=function(){return!1===t.support.boxModel&&t.support.objectAll&&t.support.leadingWhitespace}();t.jGrowl=function(e,a){0===t("#jGrowl").size()&&t('<div id="jGrowl"></div>').addClass(a&&a.position?a.position:t.jGrowl.defaults.position).appendTo("body"),t("#jGrowl").jGrowl(e,a)},t.fn.jGrowl=function(e,a){if(t.isFunction(this.each)){var r=arguments;return this.each(function(){void 0===t(this).data("jGrowl.instance")&&(t(this).data("jGrowl.instance",t.extend(new t.fn.jGrowl,{notifications:[],element:null,interval:null})),t(this).data("jGrowl.instance").startup(this)),t.isFunction(t(this).data("jGrowl.instance")[e])?t(this).data("jGrowl.instance")[e].apply(t(this).data("jGrowl.instance"),t.makeArray(r).slice(1)):t(this).data("jGrowl.instance").create(e,a)})}},t.extend(t.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!1,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(e,a){var r=t.extend({},this.defaults,a);"undefined"!=typeof r.speed&&(r.openDuration=r.speed,r.closeDuration=r.speed),this.notifications.push({message:e,options:r}),r.log.apply(this.element,[this.element,e,r])},render:function(e){var a=this,r=e.message,i=e.options;i.themeState=""===i.themeState?"":"ui-state-"+i.themeState;var o=t("<div/>").addClass("jGrowl-notification "+i.themeState+" ui-corner-all"+(void 0!==i.group&&""!==i.group?" "+i.group:"")).append(t("<div/>").addClass("jGrowl-close").html(i.closeTemplate)).append(t("<div/>").addClass("jGrowl-header").html(i.header)).append(t("<div/>").addClass("jGrowl-message").html(r)).data("jGrowl",i).addClass(i.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){t(this).parent().trigger("jGrowl.beforeClose")}).parent();t(o).bind("mouseover.jGrowl",function(){t("div.jGrowl-notification",a.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){t("div.jGrowl-notification",a.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){i.beforeOpen.apply(o,[o,r,i,a.element])!==!1&&t(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){i.open.apply(o,[o,r,i,a.element])!==!1&&("after"==i.glue?t("div.jGrowl-notification:last",a.element).after(o):t("div.jGrowl-notification:first",a.element).before(o),t(this).animate(i.animateOpen,i.openDuration,i.easing,function(){t.support.opacity===!1&&this.style.removeAttribute("filter"),null!==t(this).data("jGrowl")&&(t(this).data("jGrowl").created=new Date),t(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){i.afterOpen.apply(o,[o,r,i,a.element])}).bind("jGrowl.beforeClose",function(){i.beforeClose.apply(o,[o,r,i,a.element])!==!1&&t(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){t(this).data("jGrowl.pause",!0),t(this).animate(i.animateClose,i.closeDuration,i.easing,function(){t.isFunction(i.close)?i.close.apply(o,[o,r,i,a.element])!==!1&&t(this).remove():t(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==i.corners&&void 0!==t.fn.corner&&t(o).corner(i.corners),t("div.jGrowl-notification:parent",a.element).size()>1&&0===t("div.jGrowl-closer",a.element).size()&&this.defaults.closer!==!1&&t(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(a.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){t(this).siblings().trigger("jGrowl.beforeClose"),t.isFunction(a.defaults.closer)&&a.defaults.closer.apply(t(this).parent()[0],[t(this).parent()[0]])})},update:function(){t(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!==t(this).data("jGrowl")&&void 0!==t(this).data("jGrowl").created&&t(this).data("jGrowl").created.getTime()+parseInt(t(this).data("jGrowl").life,10)<(new Date).getTime()&&t(this).data("jGrowl").sticky!==!0&&(void 0===t(this).data("jGrowl.pause")||t(this).data("jGrowl.pause")!==!0)&&t(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||t(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),t(this.element).find("div.jGrowl-notification:parent").size()<2&&t(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){t(this).remove()})},startup:function(a){this.element=t(a).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){t(a).data("jGrowl.instance").update()},parseInt(this.defaults.check,10)),e&&t(this.element).addClass("ie6")},shutdown:function(){t(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){t(this.element).find("div.jGrowl-notification").each(function(){t(this).trigger("jGrowl.beforeClose")})}}),t.jGrowl.defaults=t.fn.jGrowl.prototype.defaults}(jQuery),function(t){var e="slider",a="[data-role=slider], .slider",r=["InitValue","Accuracy"];t[e]=function(a,r){if(!a)return t()[e]({initAll:!0});var i={initValue:0,accuracy:1},o=this;o.settings={};var n,s,l,d,c,u,h,f,p,g=t(a),m=!1;o.init=function(){o.settings=t.extend({},i,r),n=t('<div class="complete"></div>'),s=t('<div class="marker"></div>'),n.appendTo(g),s.appendTo(g),m=g.hasClass("vertical"),w(),l=v(o.settings.initValue),y(l),s.on("mousedown",function(t){t.preventDefault(),$(t)}),g.on("mousedown",function(t){t.preventDefault(),$(t)}),g.trigger("inited",[l])};var v=function(t){var e=o.settings.accuracy;return 0===e?t:100===t?100:(t=Math.floor(t/e)*e+Math.round(t%e/e)*e,t>100?100:t)},b=function(t){var e;return e=t*f,v(e)},_=function(t){return 0===f?0:t/f},y=function(t){var e,a;m?(e=_(t)+p,a=d-e,s.css("top",a),n.css("height",e)):(e=_(t),s.css("left",e),n.css("width",e))},$=function(e){t(document).on("mousemove.sliderMarker",function(t){x(t)}),t(document).on("mouseup.sliderMarker",function(){t(document).off("mousemove.sliderMarker"),t(document).off("mouseup.sliderMarker"),g.data("value",l),g.trigger("changed",[l])}),w(),x(e)},w=function(){m?(d=g.height(),c=g.offset().top,p=s.height()):(d=g.width(),c=g.offset().left,p=s.width()),f=100/(d-p),u=p/2,h=d-p/2},x=function(t){var e,a,r;e=m?t.pageY-c:t.pageX-c,u>e?e=u:e>h&&(e=h),r=m?d-e-p/2:e-p/2,a=b(r),y(a),l=a,g.trigger("change",[l])};o.val=function(t){return"undefined"!=typeof t?(l=v(t),y(l),l):l},o.init()},t.fn[e]=function(i){var o=i.initAll?t(a):this;return o.each(function(){var a,i=t(this),o={};void 0==i.data(e)&&(t.each(r,function(t,e){o[e[0].toLowerCase()+e.slice(1)]=i.data("param"+e)}),a=new t[e](this,o),i.data(e,a))})},t(function(){t()[e]({initAll:!0})})}(jQuery);var swfu_array=[],ckeditors={},swfu_array=[],last_open_dialog=null,jqgrid_scrollOffset=null,form_submit_flag_for_swfupload=!1,form_submit_obj_for_swfupload=null,rs_callbacks={loginSuccess:function(t){0==t.ret&&(publishController.close_dialog(),$("#login_errorinfo").hide(),sso.form&&($(sso.form).trigger("submit"),sso.form=null),sso.callback&&sso.callback.apply(sso.callback,sso.callback_args),$("#login-menus").removeClass("hidden"),$("#login-links").remove(),$("#login-user-name").html(t.userinfo.username),t.userinfo&&t.userinfo.session_flash&&(t.msg+=t.userinfo.session_flash),keep_session())},addtoCart:function(t){$("#shopping-cart-num").html(t.total)},deleteFromCart:function(t){},deleteGridRow:function(t,e){$(e).closest("tr.jqgrow").remove()},reloadGrid:function(t,e){var a=$(e).closest("table.jqgrid-list").remove(),r=a.jqGrid("getGridParam","page");a.jqGrid("setGridParam",{page:r}).trigger("reloadGrid")}},sso={usercookie:$.cookie("MIAOCMS[Auth][User]"),form:null,callback:null,callback_args:null,check_userlogin:function(t){if(this.usercookie=$.cookie("MIAOCMS[Auth][User]"),null==this.usercookie||""==this.usercookie||"undefined"==typeof this.usercookie){t&&t.callback?this.callback=t.callback:this.callback="",t&&t.form?this.form=t.form:this.form=null,t&&t.callback_args?this.callback_args=t.callback_args:this.callback_args="";var e=BASEURL+"/users/login";return t&&t.query?(t.query+="&return=html",e+="?"+t.query):e+="?return=html",publishController.open_dialog(e,{title:$.jslanguage.needlogin,selector:"#login-form",width:550}),!1}return!0},is_login:function(){return this.usercookie=$.cookie("MIAOCMS[Auth][User]"),null!=this.usercookie&&""!=this.usercookie&&"undefined"!=typeof this.usercookie}},publishController={_crontroller:"questions",dialogid:null,overlays:{},loading_html:'<img src="/img/ajax/wheel_throbber.gif"> 正在加载...',open_dialog:function(t,e,a){function r(){$(".nav-tabs a","#"+o.dialogid).click(function(t){t.preventDefault(),$(this).blur(),$(this).tab("show")}),$(".nav-tabs a:first","#"+o.dialogid).tab("show"),$(".dropdown-toggle","#"+o.dialogid).dropdown(),$("button","#"+o.dialogid).addClass("btn"),$('[data-toggle="tooltip"],.showtooltip',"#"+o.dialogid).tooltip({container:"#"+o.dialogid,html:!0}),$('[data-toggle="popover"]',"#"+o.dialogid).popover({html:!0}),"function"==typeof e.callback&&e.callback($("#"+o.dialogid)),$("#"+o.dialogid).find("form").each(function(){return"undefined"!=typeof $(this).attr("target")?!0:void("undefined"==typeof $(this).attr("onsubmit")&&($.fn.validate?validateForm(this):$(this).on("submit",function(){return ajaxSubmitForm(this,function(t){0==t.ret&&("function"==typeof e.submitCallback&&e.submitCallback(t),$("#"+o.dialogid).modal("hide"))}),!1})))})}function i(){$("#"+o.dialogid).find("a").unbind("click").click(function(){var t=$(this).attr("href"),e=/^#/;return"_blank"==$(this).attr("target")||e.test(t)||"undefined"!=typeof $(this).attr("onclick")||"javascript"==t.substr(0,10).toLowerCase()?!0:($("#"+o.dialogid).find(".modal-body").load(t,function(){i()}),!1)}),r(),page_loaded()}var o=this;o.loading_html='<img src="'+BASEURL+'/img/ajax/wheel_throbber.gif"> 正在加载...';o.dialogid;if(e.id?o.dialogid=e.id:o.dialogid=t.replace(/\/|\.|:|,| |\{|\}|\]|\[|\"|\'|\?|=|&/g,"_")+"-ajax—action",$("#"+o.dialogid).size()<1?$('<div  class="modal" id="'+o.dialogid+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel">'+e.title+'</h3></div><div class="modal-body">'+o.loading_html+"</div></div></div></div>").appendTo("body"):$("#"+o.dialogid).find(".modal-body").html(o.loading_html),$("#"+o.dialogid).find(".modal-body").css("max-height",$(window).height()-80).css("overflow-y","auto"),null!=a)$.ajax({type:"post",url:t,data:a,complete:function(t,e){},success:function(t){e.selector&&$(t).find(e.selector).size()>0?$("#"+o.dialogid).find(".modal-body").html($(t).find(e.selector).html()):$("#"+o.dialogid).find(".modal-body").html(t),i()},dataType:"html"});else if(e.selector){$("#"+o.dialogid).find(".modal-body").load(t+" "+e.selector,{},function(){i()})}else{$("#"+o.dialogid).find(".modal-body").load(t,{},function(){i()})}return e.nobackdrop?$("#"+o.dialogid).modal({backdrop:!1}):$("#"+o.dialogid).modal({backdrop:"static",keyboard:!0}),"remove"==e.hidden&&$("#"+o.dialogid).on("hidden.bs.modal",function(t){$("#"+o.dialogid).remove()}),e.width&&$("#"+o.dialogid+" .modal-dialog").width(e.width),e.zIndex&&$("#"+o.dialogid).css("z-index",e.zIndex),!1},load_url:function(t,e){var a=this,r=/^#/;return r.test(t)||"javascript"==t.substr(0,10).toLowerCase()?!1:(e&&(t+=" "+e),void $("#"+a.dialogid).load(t,function(){$("#"+a.dialogid).find("a").click(function(){return a.load_url($(this).attr("href"),{}),!1}),page_loaded()}))},focus_close:function(){this.dialogid&&$("#"+this.dialogid).find(".modal-header .close").focus()},remove:function(){this.dialogid&&($(".modal-backdrop").remove(),$("#"+this.dialogid).remove())},close_dialog:function(){this.dialogid&&($("#"+this.dialogid).modal("hide"),$(".modal-backdrop").remove())},open_msg_dialog:function(t,e,a){this.dialogid=t,$('<div  class="modal fade" id="'+t+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+e+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel"></h3></div><div class="modal-body">'+a+"</div></div></div></div>").appendTo("body"),$("#"+t).modal("show"),$("#"+t).on("hidden.bs.modal",function(e){$("#"+t).remove()})},open_html_dialog:function(t,e){this.dialogid=t,$("#"+this.dialogid).size()<1&&$('<div  class="modal fade" id="'+this.dialogid+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+e+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel"></h3></div><div class="modal-body"></div></div></div></div>').appendTo("body"),$("#"+t).modal()},invite_tabs:{}},page_hash={storedHash:"",currentTabHash:"",cache:"",interval:null,listen:!0,startListening:function(){setTimeout(function(){page_hash.listen=!0},600)},stopListening:function(){page_hash.listen=!1},checkHashChange:function(){var t=page_hash.currHash();page_hash.storedHash!=t&&(1==page_hash.listen&&page_hash.refreshToHash(),page_hash.storedHash=t),page_hash.interval||(page_hash.interval=setInterval(page_hash.checkHashChange,500))},refreshToHash:function(t){if(t)var e=!0;t=t||page_hash.currHash();var a=t.split("&");for(var r in a){var i=a[r].split("=");if(i[0]&&i[1]&&"page_"==i[0].substr(0,5)){var o=i[0].replace("page_",""),n=i[1];$(".page_"+n,"#"+o).trigger("click")}}e&&page_hash.updateHash(t,!0)},updateHash:function(t,e){1==e&&page_hash.stopListening(),window.location.hash=t,1==e&&(page_hash.storedHash=t,page_hash.startListening())},clean:function(t){return t.replace(/%23/g,"").replace(/[\?#]+/g,"")},currHash:function(){return page_hash.clean(window.location.hash)},currSearch:function(){return page_hash.clean(window.location.search)},init:function(){page_hash.storedHash="",page_hash.checkHashChange()}};$(function(){$(".nav .dropdown,.navbar-nav .dropdown,header .dropdown").hover(function(t){$(this).addClass("open")},function(){$(this).removeClass("open")}).click(function(t){t.stopPropagation()}),$.fn.validate&&(jQuery.validator.addMethod("biggerThen",function(t,e){var a=$(e).attr("biggerThen"),r=$(e).data("type");return"string"==r?t>$(a).val():parseInt(t)>parseInt($(a).val())},"Please check the value is in the right range"),$("form").each(function(){validateForm(this)})),$(document).on("click.bs.collapse.data-api",".collapse-itemmenu > a",function(t){var e=$(this);t.preventDefault(),e.parents(".collapse-itemmenu:first").toggleClass("open"),e.find(".glyphicon-plus").size()>0?e.find(".glyphicon-plus").addClass("glyphicon-minus").removeClass("glyphicon-plus"):e.find(".glyphicon-minus").addClass("glyphicon-plus").removeClass("glyphicon-minus")}),$(".collapse-menu > li.open").each(function(){$(this).find("a:first>.glyphicon-plus").addClass("glyphicon-minus").removeClass("glyphicon-plus")}),$(document).on("click",".upload-fileitem .remove",function(){if(!confirm("Are you sure to delete this file."))return!1;var t=$(this),e=$(this).data("id");$.ajax({type:"post",url:BASEURL+"/uploadfiles/delete",data:{id:e},success:function(e){return e.error?(alert(e.error),!1):void t.parents(".upload-fileitem:first").remove()},dataType:"json"})})});var stack_custom={dir1:"right",dir2:"down"},setAmount={min:1,max:9999,reg:function(t){return new RegExp("^[1-9]\\d*$").test(t)},amount:function(t,e){var a=$(t).val();return this.reg(a)?e?a++:a--:(alert("请输入正确的数量！"),$(t).val(this.min),$(t).focus()),a},reduce:function(t){var e=this.amount(t,!1);e>=this.min?$(t).val(e):(alert("商品数量最少为"+this.min),$(t).val(this.min),$(t).focus())},add:function(t){var e=this.amount(t,!0);e<=this.max?$(t).val(e):(alert("商品数量最多为"+this.max),
$(t).val(this.max),$(t).focus())},modify:function(t){var e=$(t).val();(e<this.min||e>this.max||!this.reg(e))&&(alert("请输入正确的数量！"),$(t).val(this.min),$(t).focus())}};$(document).ready(function(){page_loaded()});var AjaxHelper={dialog_open:!1,open_help:function(){$("#ajax_doing_help").html('<img src="/img/ajax/circle_ball.gif" /> 正在提交...'),$("#ajax_doing_help").dialog({width:650,close:function(t,e){$("#invite-user-html").hide().appendTo("body")}}),this.dialog_open=!0},has_init_tab:!1,friends_tab:null};$(function(){$(".ui-navi li").hover(function(){$(this).children(".ui-drop-menu:first").show()},function(){$(this).children(".ui-drop-menu:first").hide()}),$(document).on("click",'[data-toggle="tab"]',function(){var t=$(this).attr("href"),e=$(this).data("selector");""!=$(t).html()&&"always"!=$(this).data("refresh")||$(this).data("url")&&($(t).html('<img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载...'),$(t).load($(this).data("url"),function(){function a(){$(t+" img").lazyload({effect:"fadeIn",container:t,data_attribute:"src",threshold:50,failure_limit:50}),page_loaded(),$(t).find("a").click(function(){var r=$(this).attr("href");r+=-1!=r.search(/\?/)?"&inajax=1":"?inajax=1",e&&(r=r+" "+e);var i=/^#/;if("undefined"!=typeof $(this).attr("onclick")||"_blank"==$(this).attr("target")||"undefined"==typeof r||i.test(r)||"javascript"==r.substr(0,10).toLowerCase())return!0;var o=t;return $(this).data("target")&&(o+=" "+$(this).data("target")),console.log(o),$(o).load(r,function(){a()}),!1}),$(t).find("form").submit(function(){var e=$(this).attr("action");return"get"!=$(this).attr("method")||"undefined"==typeof e?!0:(e+=-1!=e.search(/\?/)?"&inajax=1&"+$(this).serialize():"?inajax=1&"+$(this).serialize(),$(t).load(e,function(){a()}),!1)}),$(t).scrollTop(0).trigger("scroll")}a()}))}),sso.is_login()&&getUnreadMsgNum(),$(".ui-sidemenu li").hover(function(){var t=$(this).width(),e=$(this).offset();$(this).children("a").addClass("ui-state-default");var a=$(this).children(".ui-secondmenu");e.left>$(window).width()/2?a.css("left",-a.width()+2).show():a.css("left",t-2).show();a.offset();e.top-$(window).scrollTop()+a.height()>$(window).height()&&(a.height()<$(window).height()?a.css("top",$(window).height()-2-e.top-a.height()+$(window).scrollTop()):a.css("top",-e.top+$(window).scrollTop()+2))},function(){$(this).children("a").removeClass("ui-state-default"),$(".ui-secondmenu",this).hide()})}),function(t){t.fn.UItoTop=function(e){var a={text:"To Top",min:200,inDelay:600,outDelay:400,containerID:"toTop",containerHoverID:"toTopHover",scrollSpeed:1200,easingType:"linear"},r=t.extend(a,e),i="#"+r.containerID,o="#"+r.containerHoverID;t("body").append('<a href="#" id="'+r.containerID+'">'+r.text+"</a>"),t(i).hide().on("click.UItoTop",function(){return t("html, body").animate({scrollTop:0},r.scrollSpeed,r.easingType),t("#"+r.containerHoverID,this).stop().animate({opacity:0},r.inDelay,r.easingType),!1}).prepend('<span id="'+r.containerHoverID+'"></span>').hover(function(){t(o,this).stop().animate({opacity:1},600,"linear")},function(){t(o,this).stop().animate({opacity:0},700,"linear")}),t(window).scroll(function(){var e=t(window).scrollTop();"undefined"==typeof document.body.style.maxHeight&&t(i).css({position:"absolute",top:e+t(window).height()-50}),e>r.min?t(i).fadeIn(r.inDelay):t(i).fadeOut(r.Outdelay)})}}(jQuery),$(function(){$().UItoTop({easingType:"easeOutQuart"})}),!function(t,e,a,r){function i(t,e){var a=Math.max(0,t[0]-e[0],e[0]-t[1]),r=Math.max(0,t[2]-e[1],e[1]-t[3]);return a+r}function o(e,a,r,i){for(var o=e.length,i=i?"offset":"position",r=r||0;o--;){var n=e[o].el?e[o].el:t(e[o]),s=n[i]();s.left+=parseInt(n.css("margin-left"),10),s.top+=parseInt(n.css("margin-top"),10),a[o]=[s.left-r,s.left+n.outerWidth()+r,s.top-r,s.top+n.outerHeight()+r]}}function n(t,e){var a=e.offset();return{left:t.left-a.left,top:t.top-a.top}}function s(t,e,a){for(var r,e=[e.left,e.top],a=a&&[a.left,a.top],o=t.length,n=[];o--;)r=t[o],n[o]=[o,i(r,e),a&&i(r,a)];return n=n.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},h,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=r))}function d(e,a){this.el=e,this.options=t.extend({},u,a),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var r=this.rootGroup.options.itemPath;this.target=r?this.el.find(r):this.el,this.target.on(c.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var c,u={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},h={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e){e.css({height:e.height(),width:e.width()}),e.addClass("dragged"),t("body").addClass("dragging")},onDrop:function(e){e.removeClass("dragged").removeAttr("style"),t("body").removeClass("dragging")},onMousedown:function(t,e,a){return a.target.nodeName.match(/^(input|select)$/i)?void 0:(a.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,a,r){return e=t.extend({},e.data()),r?[a]:(a[0]&&(e.children=a),delete e.subContainers,delete e.sortable,e)},tolerance:0},f={},p=0,g={left:0,top:0,bottom:0,right:0};c={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},l.get=function(t){return f[t.group]||(t.group===r&&(t.group=p++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,a){this.$document=t(a.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=a,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,h.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,h.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,n(this.pointer,this.item.offsetParent()),h.onDrag,t);var e=t.pageX||t.originalEvent.pageX,t=t.pageY||t.originalEvent.pageY,a=this.sameResultBox,r=this.options.tolerance;(!a||a.top-r>t||a.bottom+r<t||a.left-r>e||a.right+r<e)&&(this.searchValidTarget()||this.placeholder.detach())},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,h.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),h.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=r,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var a=s(this.getContainerDimensions(),t,e),i=a.length;i--;){var o=a[i][0];if((!a[i][1]||this.options.pullPlaceholder)&&(o=this.containers[o],!o.disabled)){if(!this.$getOffsetParent())var l=o.getItemOffsetParent(),t=n(t,l),e=n(e,l);if(o.searchValidTarget(t,e))return!0}}this.sameResultBox&&(this.sameResultBox=r)},movePlaceholder:function(t,e,a,r){var i=this.lastAppendedItem;!r&&i&&i[0]===e[0]||(e[a](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=r,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||o(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(a)},$getOffsetParent:function(){if(this.offsetParent===r){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){if(t=this.getPointer(t),this.$getOffsetParent()){var e=n(t,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=e}this.lastPointer=this.pointer,this.pointer=t},distanceMet:function(t){return t=this.getPointer(t),Math.max(Math.abs(this.pointer.left-t.left),Math.abs(this.pointer.top-t.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var a=this;t.each(["drag","drop","scroll"],function(t,r){a.$document[e](c[r],a[r+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=r},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=r},_destroy:function(){f[this.options.group]=r}},d.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var a=s(this.getItemDimensions(),t,e),r=a.length,i=this.rootGroup,o=!i.options.isValidTarget||i.options.isValidTarget(i.item,this);if(!r&&o)return i.movePlaceholder(this,this.target,"append"),!0;for(;r--;)if(i=a[r][0],!a[r][1]&&this.hasChildGroup(i)){if(this.getContainerGroup(i).searchValidTarget(t,e))return!0}else if(o)return this.movePlaceholder(i,t),!0},movePlaceholder:function(e,a){var r=t(this.items[e]),i=this.itemDimensions[e],o="after",n=r.outerWidth(),s=r.outerHeight(),l=r.offset(),l={left:l.left,right:l.left+n,top:l.top,bottom:l.top+s};this.options.vertical?a.top<=(i[2]+i[3])/2?(o="before",l.bottom-=s/2):l.top+=s/2:a.left<=(i[0]+i[1])/2?(o="before",l.right-=n/2):l.left+=n/2,this.hasChildGroup(e)&&(l=g),this.rootGroup.movePlaceholder(this,r,o,l)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get(),o(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t=this.el;return"relative"===t.css("position")||"absolute"===t.css("position")||"fixed"===t.css("position")?t:t.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var i=t.data(this.items[e],"subContainers");if(i===r){var o=this.$getChildren(this.items[e],"container"),i=!1;o[0]&&(i=t.extend({},this.options,{rootGroup:this.rootGroup,group:p++}),i=o[a](i).data(a).group),t.data(this.items[e],"subContainers",i)}return i},$getChildren:function(e,a){var r=this.rootGroup.options,i=r[a+"Path"],r=r[a+"Selector"],e=t(e);return i&&(e=e.find(i)),e.children(r)},_serialize:function(e,a){var r=this,i=this.$getChildren(e,a?"item":"container").not(this.options.exclude).map(function(){return r._serialize(t(this),!a)}).get();return this.rootGroup.options.serialize(e,i,a)},traverse:function(e){t.each(this.items||[],function(){var a=t.data(this,"subContainers");a&&a.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=r},_destroy:function(){var e=this;this.target.off(c.start,this.handle),this.el.removeData(a),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,"subContainers")})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(d.prototype,m),t.fn[a]=function(e){var i=Array.prototype.slice.call(arguments,1);return this.map(function(){var o=t(this),n=o.data(a);return n&&m[e]?m[e].apply(n,i)||this:(!n&&(e===r||"object"==typeof e)&&o.data(a,new d(o,e)),this)})}}(jQuery,window,"sortable"),function(t,e,a,r){var i=t(e);t.fn.lazyload=function(o){function n(){var e=0;l.each(function(){var a=t(this);if(!d.skip_invisible||a.is(":visible"))if(t.abovethetop(this,d)||t.leftofbegin(this,d));else if(t.belowthefold(this,d)||t.rightoffold(this,d)){if(++e>d.failure_limit)return!1}else a.trigger("appear"),e=0})}var s,l=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return o&&(r!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),r!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),t.extend(d,o)),s=d.container===r||d.container===e?i:t(d.container),0===d.event.indexOf("scroll")&&s.bind(d.event,function(){return n()}),this.each(function(){var e=this,a=t(e);e.loaded=!1,a.attr("src")!==r&&a.attr("src")!==!1||a.is("img")&&a.attr("src",d.placeholder),a.one("appear",function(){if(!this.loaded){if(d.appear){var r=l.length;d.appear.call(e,r,d)}t("<img />").bind("load",function(){var r=a.attr("data-"+d.data_attribute);a.hide(),a.is("img")?a.attr("src",r):a.css("background-image","url('"+r+"')"),a[d.effect](d.effect_speed),e.loaded=!0;var i=t.grep(l,function(t){return!t.loaded});if(l=t(i),d.load){var o=l.length;d.load.call(e,o,d)}}).attr("src",a.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&a.bind(d.event,function(){e.loaded||a.trigger("appear")})}),i.bind("resize",function(){n()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(a).ready(function(){n()}),this},t.belowthefold=function(a,o){var n;return o.container===r||o.container===e?(n=(e.innerHeight?e.innerHeight:i.height())+i.scrollTop(),n<=t(a).offset().top-o.threshold):(n=t(o.container).offset().top+t(o.container).height(),n<=t(a).offset().top-o.threshold)},t.rightoffold=function(a,o){var n;return o.container===r||o.container===e?(n=i.width()+i.scrollLeft(),n<=t(a).offset().left-o.threshold):(n=t(o.container).offset().left+t(o.container).width(),n<=t(a).offset().left-o.threshold)},t.abovethetop=function(a,o){var n;return n=o.container===r||o.container===e?i.scrollTop():t(o.container).offset().top,n>=t(a).offset().top+o.threshold+t(a).height()},t.leftofbegin=function(a,o){var n;return n=o.container===r||o.container===e?i.scrollLeft():t(o.container).offset().left,n>=t(a).offset().left+o.threshold+t(a).width()},t.inviewport=function(e,a){return!(t.rightoffold(e,a)||t.leftofbegin(e,a)||t.belowthefold(e,a)||t.abovethetop(e,a))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document);