


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>产品管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/admin.css" media="all">
    <script type="text/javascript" src="/layuiadmin/js/jquery-3.3.1.js"></script>
</head>

<body>
<form class="layui-form" action="" lay-filter="component-form-group" id="frm">
    <div class="layui-fluid">
        <div class="layui-card">
            <div class="layui-card-header1">活动基本信息</div>
            <div class="layui-card-body" style="padding: 15px;">

                <div class="layui-form-item">
                    <label class="layui-form-label">活动名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" lay-verify="required" autocomplete="off" value="{$act_info['title']}" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">活动图片（280x140）</label>
                        <div class="layui-input-inline">
                            <button class="layui-btn layui-btn-sm" onclick="uploadpic('chrimg_m','admin',280,140); return false;">上传大图</button>
                            <input  type="hidden" name="pic" value="{$act_info.pic}"/>
                            <div style="border: solid 1px #ccc;width: 200px;height: 100px;margin-top: 5px;"  ><img height="100" src="{$act_info.pic}" /></div>
                        </div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">活动日期：</label>
                        <div class="layui-input-inline">
                            <input name="date_start" type="text" class="layui-input"  lay-verify="date" id="test-laydate-start" value="{$act_info['start_time']}">
                        </div>
                        <div class="layui-form-mid">
                            -
                        </div>
                        <div class="layui-input-inline">
                            <input name="date_end"  type="text" class="layui-input" lay-verify="date" id="test-laydate-end" value="{$act_info['end_time']}" >
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">活动负责人：</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" lay-verify="title" autocomplete="off" value="{$act_info['leader']}" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">状态</label>
                    <div class="layui-input-inline">
                        <select name="state"  lay-search="">
                            <option value=""  >请选择状态</option>
                            <option value="1" <?php if ($act_info['state'] == 1) {echo "selected";}?> >进行中</option>
                            <option value="2" <?php if ($act_info['state'] == 2) {echo "selected";}?> >未开始</option>
                            <option value="3" <?php if ($act_info['state'] == 3) {echo "selected";}?> >已过期</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-form-item layui-layout-admin">
            <div class="layui-input-block">
                <div class="layui-footer" style="left: 0;z-index: 9999;">
                    <button class="layui-btn" lay-submit="" lay-filter="component-form-demo1">立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </div>
    </div>
</form>




<script src="/layuiadmin/layui/layui.js"></script>
<script>
    layui.config({
        base: '/layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'form', 'laydate'], function(){
        var $ = layui.$
            ,admin = layui.admin
            ,element = layui.element
            ,layer = layui.layer
            ,laydate = layui.laydate
            ,form = layui.form;

        form.render(null, 'component-form-group');


        //举办开始日期
        var insStart = laydate.render({
            elem: '#test-laydate-start'
            , min: 0
            ,trigger: 'click'
            , done: function (value, date) {
                //更新结束日期的最小日期
                insEnd.config.min = lay.extend({}, date, {
                    month: date.month - 1
                });
                //自动弹出结束日期的选择器
                insEnd.config.elem[0].click();
            }
        });

        //举办结束日期
        var insEnd = laydate.render({
            elem: '#test-laydate-end'
            , min: 0
            ,trigger: 'click'
            , done: function (value, date) {
                //更新开始日期的最大日期
                insStart.config.max = lay.extend({}, date, {
                    month: date.month - 1
                });
            }
        });

        /* 自定义验证规则 */
        form.verify({
            content: function(value){
                layedit.sync(editIndex);
            }
        });

        /* 监听指定开关 */
        form.on('switch(component-form-switchTest)', function(data){
            layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
                offset: '6px'
            });
            layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
        });

        /* 监听提交 */
        form.on('submit(component-form-demo1)', function(data){
            console.log(data.form) //被执行提交的form对象，一般在存在form标签时才会返回
            console.log(data.field) //当前容器的全部表单字段，名值对形式：{name: value}
            // $('#frm').submit()
        });
    });

    // 阻止冒泡
    function stopPropagation(event) {
        var event = event || window.event;
        if(event && event.stopPropagation) {
            event.stopPropagation();    // W3C标准
        }else {
            event.cancelBubble = true;  //ie678
        }
    }
</script>
<script>
    var t_index=1;
    function addtao() {
        t_index=t_index+1;
        var strhtml=$("#template-t").html();
        strhtml= strhtml.replace(/TmpIndex/g,t_index);
        $("#t-tontent").html($("#t-tontent").html()+strhtml);

    }
    function deltao(index) {
        $("#t-tontent-"+index).remove();
    }


    function addp(t_index) {
        var index = 1;
        var strhtml=$("#template-p").html();
        strhtml= strhtml.replace(/TmpIndex/g,t_index);
        if($("#p-template"+t_index).length<1)
        {
            strhtml= strhtml.replace(/TmpPIndex/g,index);
            strhtml='<div class="layui-collapse"  p="1" id="p-template-'+t_index+'">'+strhtml+'</div>';
            $("#data_"+t_index).html($("#data_"+t_index).html()+strhtml);
        }
        else
        {
            index =  $("p-template-"+t_index).attr('p');
            strhtml= strhtml.replace(/TmpPIndex/g,index);
            $("#p-template"+t_index).html($("#p-template"+t_index).html()+strhtml);
            $("#p-template"+t_index).attr('p',index+1);
        }



    }
    function delp(index) {
        $("#t-tontent-"+index).remove();
    }
    //上传图片
    function uploadpic(elementid,path,w,h){
        var upurl ='/index.php/admin/Uploadify/uploadimgcut/input/'+elementid+'/w/'+w+'/h/'+h+'/path/'+path;
        layer.open({
            type:2,
            area: ['775px', '575px'],
            shadeClose: true,
            content:upurl,
        })
    }
</script>


</body>
</html>
